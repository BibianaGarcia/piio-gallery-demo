!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.piioGallery=void 0;const o=s(i(2)),n=s(i(3)),r=s(i(4)),a=s(i(5)),l=s(i(6)),h=s(i(7)),d=s(i(8)),u=s(i(9)),p=s(i(10)),c=i(11);class m{constructor(t){let e;this.defaultIndicatorProps={shape:"circle",size:13,spacing:6},this.defaultThumbnailProps={height:70,margin:10,navigationShape:"rectangle",selectedBorderPosition:"bottom",selectedBorderWidth:3,selectedStyle:"overlay",width:70},this.defaultZoomProps={position:"",ratio:2,type:"inline"},this.areAllThumbsInSight=!1,this.currentTranslate=0,this.deviceWidth=window.innerWidth,this.hasCursorMoved=!1,this.isMainSliderSwiping=!1,this.prevTranslate=0,this.startPosition=0,this.targetIndex=0,this.flyoutHandler=()=>{this.isFlyoutVisible=!this.isFlyoutVisible;this.mainWrapper.querySelector(" .current").classList.toggle("flyout-open"),this.isFlyoutVisible?(this.zoomDiv.classList.add("show"),this.mainContainer.addEventListener("mousemove",this.flyoutZoom,!0),this.mainContainer.addEventListener("touchmove",this.flyoutZoom,!1),this.handlePreloadBgZoom(),this.zoomDiv.style.zIndex="100"):(this.zoomDiv.classList.remove("show"),this.zoomDiv.style.backgroundImage="unset",this.mainContainer.removeEventListener("mousemove",this.flyoutZoom,!0),this.mainContainer.removeEventListener("touchmove",this.flyoutZoom,!1),this.zoomDiv.style.zIndex="-1")},this.flyoutZoom=t=>{t.preventDefault(),this.zoomDiv.style.backgroundPosition=c.zoom(t)},this.handlePreloadBgZoom=()=>{const t=this.mainWrapper.querySelector(" .current img");if(this.options.piioDomainKey){let e=t.getAttribute("data-image-zoom");e||(e=t.getAttribute("data-image")),this.zoomDiv.style.backgroundImage=`url(${e})`}else this.zoomDiv.style.backgroundImage=`url(${t.src})`},this.inlineEnterHandler=t=>{this.mainWrapper.querySelector(this.options.gallerySelector+" .current").classList.add("inline-open"),this.zoomDiv.classList.add("show"),this.handlePreloadBgZoom(),this.inlineZoom(t),this.zoomDiv.addEventListener("mousemove",this.inlineZoom,!1),this.zoomDiv.addEventListener("touchmove",this.inlineZoom,!1)},this.inlineLeaveHandler=t=>{this.mainWrapper.querySelector(this.options.gallerySelector+" .current").classList.remove("inline-open"),this.zoomDiv.classList.remove("show"),this.zoomDiv.removeEventListener("mousemove",this.inlineZoom,!1),this.zoomDiv.removeEventListener("touchmove",this.inlineZoom,!1),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.style.backgroundPosition="unset"},this.inlineZoom=t=>{t.preventDefault(),this.zoomDiv.style.backgroundPosition=c.zoom(t)},this.setZoomDivDimension=()=>{if(this.zoomDiv){if(this.zoomDiv.style.width=this.imageWidth+"px","string"==typeof this.options.aspectRatio&&this.options.aspectRatio.includes(":")){const t=this.options.aspectRatio.split(":");this.imageHeight=this.imageWidth/parseInt(t[0],10)*parseInt(t[1],10),this.zoomDiv.style.height=this.imageHeight+"px"}else"object"==typeof this.options.aspectRatio&&null!==this.options.aspectRatio?(this.imageHeight=this.options.aspectRatio.height,this.zoomDiv.style.height=this.imageHeight+"px"):(this.imageHeight=this.imageWidth,this.zoomDiv.style.height=this.imageHeight+"px");this.gallery.style.position="relative",this.zoomDiv.style.position="absolute"}},this.options=t,this.options.piioDomainKey=void 0===t.piioDomainKey?"":t.piioDomainKey,this.options.gallerySelector=t.gallerySelector,this.options.transition=void 0===t.transition?"slide":t.transition,this.options.themeProps=void 0===t.themeProps?{background:"hsla(234, 76%, 50%, 1)",color:"hsla(0, 100%, 100%, 1)"}:{background:void 0===t.themeProps.background?"hsla(234, 76%, 50%, 1)":t.themeProps.background,color:void 0===t.themeProps.color?"hsla(0, 100%, 100%, 1)":t.themeProps.color},this.options.variantSelector=t.variantSelector,e=void 0!==this.options.responsive&&void 0!==this.options.responsive.mobile&&this.deviceWidth<764?t.responsive.mobile:void 0!==this.options.responsive&&void 0!==this.options.responsive.tablet&&this.deviceWidth<1024?t.responsive.tablet:t,this.options.aspectRatio=void 0===e.aspectRatio?"square":e.aspectRatio,this.options.carouselOffset=void 0===e.carouselOffset?15:e.carouselOffset,this.options.carouselPosition=void 0===e.carouselPosition?"bottom":e.carouselPosition,this.options.carouselStyle=void 0===e.carouselStyle?"thumbnails":e.carouselStyle,this.options.indicatorProps=void 0===e.indicatorProps?this.defaultIndicatorProps:{shape:void 0===e.indicatorProps.shape?"circle":e.indicatorProps.shape,size:void 0===e.indicatorProps.size?13:e.indicatorProps.size,spacing:void 0===e.indicatorProps.spacing?6:e.indicatorProps.spacing},this.options.mainNavigation=void 0===e.mainNavigation?"rectangle":e.mainNavigation,this.options.thumbnailProps=void 0===e.thumbnailProps?this.defaultThumbnailProps:{height:void 0===e.thumbnailProps.height?70:e.thumbnailProps.height,margin:void 0===e.thumbnailProps.margin?10:e.thumbnailProps.margin,navigationShape:void 0===e.thumbnailProps.navigationShape?"rectangle":e.thumbnailProps.navigationShape,selectedBorderPosition:void 0===e.thumbnailProps.selectedBorderPosition?this.options.carouselPosition:e.thumbnailProps.selectedBorderPosition,selectedBorderWidth:void 0===e.thumbnailProps.selectedBorderWidth?3:e.thumbnailProps.selectedBorderWidth,selectedStyle:void 0===e.thumbnailProps.selectedStyle?"overlay":e.thumbnailProps.selectedStyle,width:void 0===e.thumbnailProps.width?70:e.thumbnailProps.width},this.options.zoomProps=void 0===e.zoomProps?this.defaultZoomProps:{position:void 0===e.zoomProps.position?"right":e.zoomProps.position,ratio:void 0===e.zoomProps.ratio?2:e.zoomProps.ratio,type:void 0===e.zoomProps.type?"inline":e.zoomProps.type}}render(){document.querySelector(""+this.options.gallerySelector)&&(this.options.piioDomainKey&&void 0===window.piio?setTimeout(()=>{this.render()},10):void 0!==this.options.variantSelector?(this.variantSelector=document.querySelector(""+this.options.variantSelector),this.variantsArray=Array.from(this.variantSelector.children),this.variantSelector.addEventListener("click",t=>{const e=t.target.closest("[data-list]");if(!e)return;const i=this.variantsArray.findIndex(t=>t===e);this.start(i)}),this.start(0)):this.start(),setTimeout(()=>{this.prevMainButton&&this.prevMainButton.classList.add("show"),this.nextMainButton&&this.nextMainButton.classList.add("show"),this.prevCarouselButton&&this.prevCarouselButton.classList.add("show"),this.nextCarouselButton&&this.nextCarouselButton.classList.add("show")},500))}start(t){let e;if(this.gallery=document.querySelector(""+this.options.gallerySelector),e=void 0!==this.options.variantSelector?Array.from(this.variantsArray[t].querySelectorAll("[data-image]")):Array.from(this.gallery.children),this.mainWrapper=document.createElement("div"),this.mainWrapper.classList.add("main-wrapper"),e.forEach((t,e)=>{const i=document.createElement("div");if(i.setAttribute("data-gallery","item-"+e),i.setAttribute("class",0===e?"current":""),void 0!==this.options.variantSelector){const e=t.cloneNode(!0);i.appendChild(e)}else i.appendChild(t);this.mainWrapper.appendChild(i)}),this.galleryContainer=document.createElement("div"),this.galleryContainer.classList.add("gallery-container"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("main-img"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("main-container"),this.contextMenu=document.createElement("div"),this.contextMenu.classList.add("context-menu"),this.mainContainer.appendChild(this.mainWrapper),this.imageContainer.appendChild(this.mainContainer),this.galleryContainer.appendChild(this.imageContainer),this.gallery.innerHTML=" ",this.gallery.appendChild(this.galleryContainer),this.gallery.appendChild(this.contextMenu),"indicators"===this.options.carouselStyle)this.carouselOffset=document.createElement("div"),this.carouselOffset.classList.add("carousel-offset"),this.navIndicators=document.createElement("div"),this.navIndicators.classList.add("navIndicators"),this.galleryContainer.appendChild(this.carouselOffset),this.galleryContainer.appendChild(this.navIndicators);else if("none"!==this.options.carouselStyle){if(this.carouselOffset=document.createElement("div"),this.carouselOffset.classList.add("carousel-offset"),this.carousel=document.createElement("div"),this.carousel.classList.add("carousel"),this.carouselSlider=document.createElement("div"),this.carouselSlider.classList.add("carousel-slider"),this.carouselWrapper=document.createElement("div"),this.carouselWrapper.classList.add("carousel-wrapper"),this.galleryContainer.appendChild(this.carouselOffset),this.carouselSlider.appendChild(this.carouselWrapper),this.carousel.appendChild(this.carouselSlider),"none"!==this.options.thumbnailProps.navigationShape){const t=this.createPrevSvg();this.prevCarouselButton=document.createElement("button"),this.prevCarouselButton.classList.add("arrow"),this.prevCarouselButton.classList.add("prev-arrow"),this.prevCarouselButton.setAttribute("type","button"),this.prevCarouselButton.setAttribute("id","prevCarousel"),this.prevCarouselButton.setAttribute("style","display:none"),this.prevCarouselButton.appendChild(t),this.carousel.appendChild(this.prevCarouselButton);const e=this.createNextSvg();this.nextCarouselButton=document.createElement("button"),this.nextCarouselButton.classList.add("arrow"),this.nextCarouselButton.classList.add("next-arrow"),this.nextCarouselButton.setAttribute("type","button"),this.nextCarouselButton.setAttribute("id","nextCarousel"),this.nextCarouselButton.appendChild(e),this.carousel.appendChild(this.nextCarouselButton)}this.galleryContainer.appendChild(this.carousel)}if(this.images=document.querySelectorAll(this.options.gallerySelector+" [data-image]"),this.images.forEach((t,e)=>{const i=t.getAttribute("data-image");if("indicators"===this.options.carouselStyle){const t=document.createElement("div");t.setAttribute("class",0===e?"active":""),t.classList.add("indicator"),this.navIndicators.appendChild(t)}else if("thumbnails"===this.options.carouselStyle){const t=document.createElement("img");t.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"),t.setAttribute("data-image",i);const s=document.createElement("div");s.classList.add("imgThumb-wrapper");const o=document.createElement("div");o.setAttribute("class",0===e?"active":""),o.classList.add("slide"),s.appendChild(t),o.appendChild(s),this.carouselWrapper.appendChild(o)}}),"none"!==this.options.transition&&this.galleryContainer.setAttribute("data-transition",this.options.transition),"none"!==this.options.mainNavigation){const t=this.createPrevSvg();t.setAttribute("height","24px"),t.setAttribute("width","24px"),this.prevMainButton=document.createElement("button"),this.prevMainButton.classList.add("arrow"),this.prevMainButton.classList.add("prev-arrow"),this.prevMainButton.setAttribute("type","button"),this.prevMainButton.setAttribute("id","prevMainButton"),this.prevMainButton.setAttribute("style","display:none"),this.prevMainButton.appendChild(t),this.imageContainer.appendChild(this.prevMainButton);const e=this.createNextSvg();e.setAttribute("height","24px"),e.setAttribute("width","24px"),this.nextMainButton=document.createElement("button"),this.nextMainButton.classList.add("arrow"),this.nextMainButton.classList.add("next-arrow"),this.nextMainButton.setAttribute("type","button"),this.nextMainButton.setAttribute("id","nextMainButton"),this.nextMainButton.appendChild(e),this.imageContainer.appendChild(this.nextMainButton)}if(this.deviceWidth=window.innerWidth,!document.querySelector(this.options.gallerySelector+" [data-gallery] a"))if("popup"===this.options.zoomProps.type){this.galleryContainer.setAttribute("data-zoom","popup");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 23 23"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M21.5147 21.5147L1.51471 1.51471"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2"),e.setAttribute("stroke-linecap","round");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M1.51469 21.5147L21.5147 1.51471"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","2"),i.setAttribute("stroke-linecap","round"),t.appendChild(e),t.appendChild(i),this.popupClose=document.createElement("span"),this.popupClose.classList.add("popup-close"),this.popupImage=document.createElement("img"),this.popupImage.classList.add("popup-image"),this.popup=document.createElement("div"),this.popup.classList.add("popup"),this.popupClose.appendChild(t),this.popup.appendChild(this.popupClose),this.popup.appendChild(this.popupImage),this.gallery.appendChild(this.popup)}else"flyout"===this.options.zoomProps.type?(this.createZoomDiv(),this.deviceWidth<992?this.galleryContainer.setAttribute("data-zoom","inline"):this.galleryContainer.setAttribute("data-zoom","flyout")):"none"!==this.options.zoomProps.type&&(this.galleryContainer.setAttribute("data-zoom","inline"),this.createZoomDiv());this.launchGallery()}createNextSvg(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("fill","none"),t.setAttribute("viewBox","0 0 24 24");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M9 18L15 12L9 6"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2px"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),t.appendChild(e),t}createPrevSvg(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M15 18L9 12L15 6"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2px"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),t.appendChild(e),t}createZoomDiv(){this.zoomDiv=document.createElement("div"),this.zoomDiv.classList.add("display-zoom"),this.imageContainer.appendChild(this.zoomDiv)}getcarouselSliderScreenSize(){if(!this.carouselSlider)return;return this.isSliderVertical?parseInt(this.imageContainer.style.height,10):parseInt(this.imageContainer.style.width,10)}getCarouselWrapperDimension(){return this.carouselSlides.length*this.carouselSlideSize}getMainImageWidth(){let t;const e=this.gallery.getBoundingClientRect().width;return t="thumbnails"===this.options.carouselStyle?this.isSliderVertical?e-this.options.carouselOffset-this.options.thumbnailProps.width:e:"indicators"===this.options.carouselStyle&&this.isSliderVertical?e-this.options.carouselOffset-this.options.indicatorProps.size-2*this.options.indicatorProps.spacing:e,console.log("galleryScreenWidth: ",e),console.log("imageScreenWidth: ",t),t}getPiioImages(){const t=window.piio.getPiioElements(this.images);window.piio.getPiioImages(t,this.options.zoomProps.ratio)}getThumbsInSight(){return Math.floor(this.getcarouselSliderScreenSize()/(this.thumbImageSize+this.options.thumbnailProps.margin))}keepThumbSelectedOnSight(t){if(this.areAllThumbsInSight)return;const e=this.gallery.querySelector(".active .imgThumb-wrapper").getBoundingClientRect(),i=this.carouselSlider.getBoundingClientRect();if(e.right>i.right||e.left<i.left||e.top<i.top||e.bottom>i.bottom){h.default(this.carouselWrapper,e.width,t,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.areAllThumbsInSight,this.carousel,this.options.thumbnailProps.margin),this.carouselCounter=t;for(let e=t+1;e<t+this.thumbsInSight+1;e++)this.loadImage(this.thumbImages[e],{type:"thumbnail"})}}loadImage(t,{type:e}){if(void 0===t)return;if("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"!==t.getAttribute("src"))return;const i=t.getAttribute("data-image");t.src=i,this.options.piioDomainKey&&window.piio&&window.piio.onLoadImage(t,i)}loadThumbnailImagesInSight(){this.thumbImages=document.querySelectorAll(this.options.gallerySelector+" .imgThumb-wrapper img"),this.thumbsInSight=this.getThumbsInSight();const t=this.thumbsInSight<this.thumbImages.length?this.thumbsInSight+1:this.thumbsInSight;for(let e=0;e<t;e++)this.loadImage(this.thumbImages[e],{type:"thumbnail"})}setCarouselDimension(){const t=this.getCarouselWrapperDimension();this.isSliderVertical?(this.carouselSlider.style.height=""+this.imageContainer.style.height,this.carouselWrapper.style.height=t+"px"):this.carouselWrapper.style.width=t+"px"}setNavIndicatorsDimension(){this.isSliderVertical?this.navIndicators.style.height=""+this.imageContainer.style.height:this.navIndicators.style.width=this.getMainImageWidth()+"px"}setPositionByIndexInMainSlider(t){t&&(this.targetIndex=t),t<this.images.length&&this.loadImage(this.images[t],{type:"main"}),this.currentTranslate=this.targetIndex*-this.imageWidth,this.prevTranslate=this.currentTranslate;const e=this.mainWrapper.querySelector(this.options.gallerySelector+" .current"),i=l.default(e,this.targetIndex,this.mainSlides);if(d.default(this.mainWrapper,e,i,this.targetIndex,this.imageWidth,this.contextMenu,this.openImageText),"thumbnails"===this.options.carouselStyle){const t=this.carouselWrapper.querySelector(this.options.gallerySelector+" .active"),e=l.default(t,this.targetIndex,this.carouselSlides),i=this.carouselSlides.findIndex(t=>t===e),s=i<this.carouselSlides.length-1?i+1:this.carouselSlides.length-1;p.default(t,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),this.keepThumbSelectedOnSight(this.targetIndex),this.loadImage(this.thumbImages[s],{type:"thumbnail"})}if("indicators"===this.options.carouselStyle){this.currentIndicator=this.navIndicators.querySelector(" .active");const t=Array.from(this.navIndicators.children),e=l.default(this.currentIndicator,this.targetIndex,t);p.default(this.currentIndicator,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options)}}setSliderDimensions(){if(this.imageWidth=this.getMainImageWidth(),"string"==typeof this.options.aspectRatio&&this.options.aspectRatio.includes(":")){const t=this.options.aspectRatio.split(":"),e=this.imageWidth/parseInt(t[0],10)*parseInt(t[1],10);this.imageContainer.style.height=e+"px",this.mainWrapper.style.height=e+"px"}else"object"==typeof this.options.aspectRatio&&null!==this.options.aspectRatio?(this.imageContainer.style.height=this.options.aspectRatio.height+"px",this.mainWrapper.style.height=this.options.aspectRatio.height+"px"):(this.imageContainer.style.height=this.imageWidth+"px",this.mainWrapper.style.height=this.imageWidth+"px");this.imageContainer.style.width=this.imageWidth+"px",this.mainWrapper.style.width=this.imageWidth*this.mainSlides.length+"px"}setZoom(){this.zoomDiv&&(this.imageWidth=this.getMainImageWidth(),"none"!==this.options.zoomProps.type?this.imageContainer.style.cursor="zoom-in":this.imageContainer.style.cursor="grab",document.querySelector(this.options.gallerySelector+" [data-zoom=popup]")?(this.mainContainer.addEventListener("click",()=>{const t=this.mainWrapper.querySelector(this.options.gallerySelector+" .current img");this.popup.classList.add("open"),this.popupImage.setAttribute("src",""+t.getAttribute("data-image"))}),this.popupClose.addEventListener("click",()=>{this.popup.querySelector(" .popup-image").setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"),this.popup.classList.remove("open")})):document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&this.deviceWidth>=992?(this.isFlyoutVisible=!1,this.setZoomDivDimension(),"left"===this.options.zoomProps.position?(this.zoomDiv.style.left=`-${this.imageWidth}px`,this.zoomDiv.style.top="0px"):"top"===this.options.zoomProps.position?(this.zoomDiv.style.left="0px",this.zoomDiv.style.top=`-${this.imageHeight}px`):"bottom"===this.options.zoomProps.position?(this.zoomDiv.style.left="0px",this.zoomDiv.style.top=this.imageHeight+"px"):(this.zoomDiv.style.left=this.imageWidth+"px",this.zoomDiv.style.top="0px"),this.mainContainer.addEventListener("pointerover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("touchstart",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("mouseover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("click",this.flyoutHandler,!1),window.addEventListener("click",t=>{const e=t.target,i=this.mainContainer.contains(e),s=this.mainWrapper.querySelector(this.options.gallerySelector+" .current");!i&&document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&this.isFlyoutVisible&&(this.isFlyoutVisible=!1,s.classList.remove("flyout-open"),this.zoomDiv.classList.remove("show"),this.mainContainer.removeEventListener("mousemove",this.flyoutZoom,!0))})):"none"!==this.options.zoomProps.type&&(this.setZoomDivDimension(),this.zoomDiv.style.left="0px",this.zoomDiv.style.top="0px",this.zoomDiv.style.zIndex="1",this.mainContainer.addEventListener("pointerover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("touchstart",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("mouseover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("click",this.inlineEnterHandler,!1),this.zoomDiv.addEventListener("click",this.inlineLeaveHandler,!1),window.addEventListener("click",t=>{const e=t.target,i=this.mainContainer.contains(e),s=this.mainWrapper.querySelector(this.options.gallerySelector+" .current");i||"none"!==this.options.zoomProps.type&&(s.classList.remove("inline-open"),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.classList.remove("show"),this.mainContainer.removeEventListener("mousemove",this.inlineZoom,!1))})))}launchGallery(){this.mainSlides=Array.from(this.mainWrapper.querySelectorAll(" [data-gallery]")),"left"===this.options.carouselPosition||"right"===this.options.carouselPosition?this.isSliderVertical=!0:this.isSliderVertical=!1,this.imageWidth=this.getMainImageWidth(),this.setSliderDimensions();const t=this.options.themeProps.background;if(t.includes("hsl")||t.includes("hsla")){const e=t.split(","),i=parseInt(e[2].split("%")[0],10);i>=50?t.includes("hsla")?(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i-20}%,${e[3]}`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i-30}%,${e[3]}`):(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i-20}%)`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i-30}%)`):t.includes("hsla")?(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i+20}%,${e[3]}`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i+10}%,${e[3]}`):(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i+20}%)`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i+10}%)`)}const e=document.querySelector(this.options.gallerySelector);e.style.setProperty("--main-color",this.options.themeProps.color),e.style.setProperty("--bg-color",this.options.themeProps.background),e.style.setProperty("--bg-hover-color",this.hoverBackgroundColor),e.style.setProperty("--bg-focus-color",this.focusBackgroundColor),this.mainContainer.oncontextmenu=t=>{t.preventDefault();const e=t.clientX,i=t.clientY;this.contextMenu.style.top=i+"px",this.contextMenu.style.left=e+"px",this.contextMenu.classList.add("visible")},window.addEventListener("click",t=>{t.target.offsetParent!==this.contextMenu&&this.contextMenu.classList.remove("visible")});const i=navigator.language.split("-"),s=i.shift(),l=i.pop();if(void 0!==o.default[s]){const t=o.default[s];if(void 0!==l&&t.hasOwnProperty(l))this.openImageText=t[l].OpenImage;else{const e=Object.keys(t)[0];this.openImageText=t[e].OpenImage}}else this.openImageText=o.default.en.US.OpenImage;const c=this.images[0].getAttribute("data-image"),m=document.createElement("a");m.classList.add("item"),m.setAttribute("target","_blank"),m.setAttribute("rel","noopener noreferrer"),m.setAttribute("href",c),m.classList.add("item");const g=document.createTextNode(this.openImageText);if(m.appendChild(g),this.contextMenu.appendChild(m),this.carouselCounter=0,"none"!==this.options.mainNavigation){this.prevMainButton.classList.add("btn-main-"+this.options.mainNavigation),this.nextMainButton.classList.add("btn-main-"+this.options.mainNavigation),this.mainSlides.length<=1&&(this.prevMainButton.style.display="none",this.nextMainButton.style.display="none");const t=()=>{const t=this.mainWrapper.querySelector(".current").previousElementSibling,e=this.mainSlides.findIndex(e=>e===t);e>0&&this.loadImage(this.images[e],{type:"main"})};window.PointerEvent?this.prevMainButton.addEventListener("pointerover",t,!1):(this.prevMainButton.addEventListener("touchstart",t,!1),this.prevMainButton.addEventListener("mouseover",t,!1)),this.prevMainButton.addEventListener("click",t=>{const e=this.mainWrapper.querySelector(this.options.gallerySelector+" .current"),i=e.previousElementSibling,s=this.mainSlides.findIndex(t=>t===i);if(s>0&&this.loadImage(this.images[s],{type:"main"}),d.default(this.mainWrapper,e,i,s,this.imageWidth,this.contextMenu,this.openImageText),r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,s),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&u.default(this.gallery),this.mainWrapper.querySelector(" .inline-open")&&e.classList.toggle("inline-open"),this.mainContainer.style.backgroundImage="unset","thumbnails"===this.options.carouselStyle){const t=this.carouselWrapper.querySelector(" .active"),e=t.previousElementSibling;p.default(t,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),this.keepThumbSelectedOnSight(s)}"indicators"===this.options.carouselStyle&&(this.currentIndicator=this.navIndicators.querySelector(" .active"),this.prevIndicator=this.currentIndicator.previousElementSibling,p.default(this.currentIndicator,this.prevIndicator,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options))});const e=()=>{this.currentSlide=this.mainWrapper.querySelector(" .current"),this.nextSlide=this.currentSlide.nextElementSibling,this.nextIndex=this.mainSlides.findIndex(t=>t===this.nextSlide),this.nextIndex<this.images.length&&this.loadImage(this.images[this.nextIndex],{type:"main"})};window.PointerEvent?this.nextMainButton.addEventListener("pointerover",e,!1):(this.nextMainButton.addEventListener("touchstart",e,!1),this.nextMainButton.addEventListener("mouseover",e,!1)),this.nextMainButton.addEventListener("click",t=>{const e=this.mainWrapper.querySelector(this.options.gallerySelector+" .current"),i=e.nextElementSibling;if(this.nextIndex=this.mainSlides.findIndex(t=>t===i),this.nextIndex>0&&this.loadImage(this.images[this.nextIndex],{type:"main"}),d.default(this.mainWrapper,e,i,this.nextIndex,this.imageWidth,this.contextMenu,this.openImageText),r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.nextIndex),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&u.default(this.gallery),this.mainWrapper.querySelector(" .inline-open")&&this.currentSlide.classList.toggle("inline-open"),this.mainContainer.style.backgroundImage="unset","thumbnails"===this.options.carouselStyle){const t=this.carouselWrapper.querySelector(" .active"),e=t.nextElementSibling,i=Array.from(this.carouselWrapper.querySelectorAll(".slide")),s=i.findIndex(t=>t===e),o=s<i.length-1?s+1:i.length-1;p.default(t,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),this.keepThumbSelectedOnSight(this.nextIndex),this.loadImage(this.thumbImages[o],{type:"thumbnail"})}if("indicators"===this.options.carouselStyle){this.currentIndicator=this.navIndicators.querySelector(" .active");const t=this.currentIndicator.nextElementSibling;p.default(this.currentIndicator,t,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options)}})}function y(t){return t.type.includes("touch")?t.touches[0].clientX:t.pageX}function v(t){return t.type.includes("touch")?t.touches[0].clientY:t.pageY}this.gallery.addEventListener("dragstart",t=>t.preventDefault()),this.startPosition=0,this.currentTranslate=0,this.prevTranslate=0,this.targetIndex=0;const S=t=>e=>{this.targetIndex=t,this.startPosition=y(e),this.isMainSliderSwiping=!0},f=t=>{if(this.isMainSliderSwiping){const e=y(t);this.currentTranslate=this.prevTranslate+e-this.startPosition}},b=t=>{const e=y(t);if(!(document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&this.deviceWidth<992&&document.querySelector(this.options.gallerySelector+" .inline-open")||document.querySelector(this.options.gallerySelector+" [data-zoom=inline]")&&document.querySelector(this.options.gallerySelector+" .inline-open")||document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&document.querySelector(this.options.gallerySelector+" .flyout-open"))){if(Math.abs(e-this.startPosition)>=10){if(this.hasCursorMoved=!0,(document.querySelector(this.options.gallerySelector+" [data-zoom=inline]")||document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")||document.querySelector(this.options.gallerySelector+" [data-zoom=popup]"))&&!window.matchMedia("(pointer: coarse)").matches){const t=e=>{e.stopPropagation(),this.imageContainer.removeEventListener("click",t,!0)};this.imageContainer.addEventListener("click",t,!0)}"slide"===this.options.transition&&u.default(this.gallery);const t=this.currentTranslate-this.prevTranslate;t<-10&&this.targetIndex<this.mainSlides.length-1&&(this.targetIndex+=1),t>10&&this.targetIndex>0&&(this.targetIndex-=1),this.setPositionByIndexInMainSlider(this.targetIndex),"fade"===this.options.transition&&a.default(this.gallery),"none"!==this.options.mainNavigation&&r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.targetIndex)}else this.hasCursorMoved=!1;this.isMainSliderSwiping=!1}};if(this.mainSlides.forEach((t,e)=>{if(t.addEventListener("dragstart",t=>t.preventDefault()),document.querySelector(this.options.gallerySelector+" [data-gallery] a")){const t=document.querySelector(this.options.gallerySelector+` [data-gallery=item-${e}] a`);t&&(t.onclick=()=>{if(this.hasCursorMoved)return!1})}window.PointerEvent?(t.addEventListener("pointerdown",S(e),!1),t.addEventListener("pointermove",f,!1),t.addEventListener("pointerup",b,!1),t.addEventListener("pointercancel",b,!1)):(t.addEventListener("touchdown",S(e),!1),t.addEventListener("touchmove",f,!1),t.addEventListener("touchup",b,!1),t.addEventListener("touchcancel",b,!1),t.addEventListener("mousedown",S(e),!1),t.addEventListener("mousemove",f,!1),t.addEventListener("mouseup",b,!1))}),this.setZoom(),"thumbnails"!==this.options.carouselStyle&&"indicators"!==this.options.carouselStyle||(this.isSliderVertical?(this.galleryContainer.classList.add(this.options.carouselPosition),"thumbnails"===this.options.carouselStyle?this.carouselWrapper.style.flexDirection="column":this.navIndicators.style.flexDirection="column",this.carouselOffset.style.width=this.options.carouselOffset+"px"):(this.galleryContainer.classList.add(this.options.carouselPosition),this.carouselOffset.style.height=this.options.carouselOffset+"px")),"thumbnails"===this.options.carouselStyle){this.carouselSlides=Array.from(this.carouselWrapper.children);const t=this.carouselWrapper.querySelectorAll(".slide .imgThumb-wrapper");this.carouselSlides.forEach((e,i)=>{const s=t[i],o=this.carouselWrapper.querySelectorAll(".slide")[i];s.style.width=this.options.thumbnailProps.width+"px",s.style.height=this.options.thumbnailProps.height+"px",o.style.height=this.isSliderVertical?this.options.thumbnailProps.height+this.options.thumbnailProps.margin+"px":this.options.thumbnailProps.height+"px"}),this.thumbImageSize=this.isSliderVertical?this.options.thumbnailProps.height:this.options.thumbnailProps.width,this.carouselSlideSize=this.thumbImageSize+this.options.thumbnailProps.margin,this.setCarouselDimension(),this.options.piioDomainKey&&window.piio&&this.getPiioImages(),this.loadThumbnailImagesInSight(),this.gallery.style.setProperty("--thumbBorderWidth",this.options.thumbnailProps.selectedBorderWidth+"px");const e=this.carouselWrapper.querySelector(".active").querySelector(".imgThumb-wrapper");"border"===this.options.thumbnailProps.selectedStyle?e.classList.add("border-"+this.options.thumbnailProps.selectedBorderPosition):e.classList.add("overlay"),this.carouselSlider.addEventListener("mouseover",t=>{const e=t.target.closest(".slide");e&&(this.targetIndex=this.carouselSlides.findIndex(t=>t===e),this.loadImage(this.images[this.targetIndex],{type:"main"}))}),this.carouselSliderScreenSize=this.getcarouselSliderScreenSize();this.getCarouselWrapperDimension()<this.carouselSliderScreenSize&&(this.areAllThumbsInSight=!0),this.carouselSlider.addEventListener("click",t=>{this.mainWrapper.querySelector(" .inline-open")?this.mainWrapper.querySelector(" .inline-open").classList.remove("inline-open"):this.mainWrapper.querySelector(" .flyout-open")&&this.mainWrapper.querySelector(" .flyout-open").classList.remove("flyout-open");const e=t.target.closest(".slide");if(!e)return;this.currentSlide=this.mainWrapper.querySelector(" .current");const i=this.carouselWrapper.querySelector(" .active");this.targetIndex=this.carouselSlides.findIndex(t=>t===e);const s=this.mainSlides[this.targetIndex];this.loadImage(this.thumbImages[this.targetIndex+1],{type:"thumbnail"}),d.default(this.mainWrapper,this.currentSlide,s,this.targetIndex,this.imageWidth,this.contextMenu,this.openImageText),"none"!==this.options.mainNavigation&&r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.targetIndex),p.default(i,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&u.default(this.gallery)});const i=()=>{this.loadedThumbs=this.carouselWrapper.querySelectorAll('img:not([src*="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"])'),this.loadedThumbs.length<=this.thumbImages.length&&this.loadImage(this.thumbImages[this.loadedThumbs.length],{type:"thumbnail"})};if("none"!==this.options.thumbnailProps.navigationShape){if(this.prevCarouselButton.classList.add("btn-carousel-"+this.options.thumbnailProps.navigationShape),this.nextCarouselButton.classList.add("btn-carousel-"+this.options.thumbnailProps.navigationShape),this.isSliderVertical)if("circle"===this.options.thumbnailProps.navigationShape||"radius"===this.options.thumbnailProps.navigationShape)this.prevCarouselButton.style.transform="translateX(25%) rotate(90deg)",this.prevCarouselButton.style.transformOrigin="top left",this.prevCarouselButton.style.top="0px",this.prevCarouselButton.style.left="50%",this.nextCarouselButton.style.top="unset",this.nextCarouselButton.style.bottom="0px",this.nextCarouselButton.style.right="50%",this.nextCarouselButton.style.transform="translateX(-25%) rotate(90deg)",this.nextCarouselButton.style.transformOrigin="right bottom";else if("square"===this.options.thumbnailProps.navigationShape)this.prevCarouselButton.style.transform="translateX(50%) rotate(90deg)",this.prevCarouselButton.style.transformOrigin="top left",this.prevCarouselButton.style.top="0px",this.prevCarouselButton.style.left="50%",this.nextCarouselButton.style.top="unset",this.nextCarouselButton.style.bottom="0px",this.nextCarouselButton.style.right="50%",this.nextCarouselButton.style.transform="translateX(-50%) rotate(90deg)",this.nextCarouselButton.style.transformOrigin="right bottom";else{const t=this.prevCarouselButton.querySelector(" svg"),e=this.nextCarouselButton.querySelector(" svg");this.prevCarouselButton.style.height="24px",this.prevCarouselButton.style.top="0px",this.prevCarouselButton.style.transform="unset",this.prevCarouselButton.style.width="100%",t.style.transform="rotate(90deg)",this.nextCarouselButton.style.height="24px",this.nextCarouselButton.style.width="100%",this.nextCarouselButton.style.top="unset",this.nextCarouselButton.style.transform="unset",this.nextCarouselButton.style.bottom="0px",e.style.transform="rotate(90deg)"}const t=this.isSliderVertical?parseInt(this.carouselWrapper.style.height,10):parseInt(this.carouselWrapper.style.width,10);this.areAllThumbsInSight||this.carouselSlides.length<=1?(this.prevCarouselButton.style.display="none",this.nextCarouselButton.style.display="none"):t<this.carouselSliderScreenSize&&(this.nextCarouselButton.style.display="none"),this.prevCarouselButton.addEventListener("click",()=>{this.carouselCounter>0&&this.carouselCounter--,h.default(this.carouselWrapper,this.thumbImageSize,this.carouselCounter,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.areAllThumbsInSight,this.carousel,this.options.thumbnailProps.margin)}),window.PointerEvent?this.nextCarouselButton.addEventListener("pointerover",i,!1):(this.nextCarouselButton.addEventListener("touchstart",i,!1),this.nextCarouselButton.addEventListener("mouseover",i,!1)),this.nextCarouselButton.addEventListener("click",()=>{i(),this.carouselCounter+this.thumbsInSight<=this.carouselSlides.length+1&&this.carouselCounter++,h.default(this.carouselWrapper,this.thumbImageSize,this.carouselCounter,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.areAllThumbsInSight,this.carousel,this.options.thumbnailProps.margin)})}let s=!1,o=0,l=0,c=0;const m=t=>t=>{o=this.isSliderVertical?v(t):y(t),s=!0;const e=window.getComputedStyle(this.carouselWrapper).getPropertyValue("transform");"none"!==e&&(l=this.isSliderVertical?parseInt(e.split(",")[5].trim(),10):parseInt(e.split(",")[4].trim(),10))},g=t=>{if(s){const e=this.isSliderVertical?v(t):y(t);c=e-o}},S=t=>{const e=this.isSliderVertical?v(t):y(t);if(Math.abs(e-o)>=10){const t=l+c;t<l&&this.carouselCounter<this.carouselSlides.length-this.thumbsInSight+1?(this.carouselCounter++,i()):t>l&&this.carouselCounter>0&&this.carouselCounter--,h.default(this.carouselWrapper,this.thumbImageSize,this.carouselCounter,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.areAllThumbsInSight,this.carousel,this.options.thumbnailProps.margin)}s=!1};this.carouselSlides.forEach((t,e)=>{t.addEventListener("dragstart",t=>t.preventDefault()),window.PointerEvent?(t.addEventListener("pointerdown",m(e),!0),t.addEventListener("pointermove",g,!0),t.addEventListener("pointerup",S,!0),t.addEventListener("pointercancel",S,!0)):(t.addEventListener("touchdown",m(e),!0),t.addEventListener("touchmove",g,!0),t.addEventListener("touchup",S,!0),t.addEventListener("touchcancel",S,!0),t.addEventListener("mousedown",m(e),!0),t.addEventListener("mousemove",g,!0),t.addEventListener("mouseup",S,!0))})}if("indicators"===this.options.carouselStyle){const t=Array.from(this.navIndicators.children);t.forEach((t,e)=>{const i=this.navIndicators.querySelectorAll(" .indicator")[e];i.classList.add("indicator-"+this.options.indicatorProps.shape),i.style.margin=this.options.indicatorProps.spacing+"px","line"===this.options.indicatorProps.shape?this.isSliderVertical?(i.style.height=this.options.indicatorProps.size+"px",i.style.width="3px"):(i.style.height="3px",i.style.width=this.options.indicatorProps.size+"px"):(i.style.height=this.options.indicatorProps.size+"px",i.style.width=this.options.indicatorProps.size+"px")}),this.setNavIndicatorsDimension(),this.navIndicators.addEventListener("click",e=>{this.mainWrapper.querySelector(" .inline-open")?this.mainWrapper.querySelector(" .inline-open").classList.remove("inline-open"):this.mainWrapper.querySelector(" .flyout-open")&&this.mainWrapper.querySelector(" .flyout-open").classList.remove("flyout-open");const i=e.target.closest(".indicator");if(!i)return;const s=this.mainWrapper.querySelector(" .current"),o=this.navIndicators.querySelector(" .active");this.targetIndex=t.findIndex(t=>t===i);const n=this.mainSlides[this.targetIndex];this.loadImage(this.images[this.targetIndex],{type:"main"}),d.default(this.mainWrapper,s,n,this.targetIndex,this.imageWidth,this.contextMenu,this.openImageText),this.prevMainButton&&this.nextMainButton&&r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.targetIndex),p.default(o,i,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&u.default(this.gallery)})}this.options.piioDomainKey&&window.piio&&this.getPiioImages(),this.loadImage(this.images[0],{type:"main"});window.addEventListener("resize",()=>{const t=this.mainWrapper.querySelector(" .current");"thumbnails"===this.options.carouselStyle&&this.setCarouselDimension(),"indicators"===this.options.carouselStyle&&this.setNavIndicatorsDimension();const e=this.deviceWidth;if(this.deviceWidth=window.innerWidth,this.setSliderDimensions(),"thumbnails"===this.options.carouselStyle&&this.loadThumbnailImagesInSight(),"flyout"===this.options.zoomProps.type&&this.zoomDiv?this.deviceWidth<992?(this.mainWrapper.querySelector(" .flyout-open")&&this.mainWrapper.querySelector(" .flyout-open").classList.remove("flyout-open"),this.mainContainer.removeEventListener("click",this.flyoutHandler,!1),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.style.backgroundPosition="unset",this.galleryContainer.setAttribute("data-zoom","inline"),this.setZoom()):this.deviceWidth>=992&&(this.mainWrapper.querySelector(" .inline-open")&&this.mainWrapper.querySelector(" .inline-open").classList.remove("inline-open"),this.mainContainer.removeEventListener("click",this.inlineEnterHandler,!1),this.zoomDiv.removeEventListener("click",this.inlineLeaveHandler,!1),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.style.backgroundPosition="unset",this.galleryContainer.setAttribute("data-zoom","flyout"),this.setZoom()):"inline"===this.options.zoomProps.type&&this.zoomDiv&&this.setZoom(),e<this.deviceWidth){const t=this.mainWrapper.querySelectorAll('img:not([src*="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"])');t.forEach(t=>t.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"));for(let e=0;e<t.length;e++)this.loadImage(this.images[e],{type:"main"})}this.imageWidth=this.getMainImageWidth();const i=this.mainSlides.findIndex(e=>e===t);d.default(this.mainWrapper,t,t,i,this.imageWidth,this.contextMenu,this.openImageText)})}}const g={init:t=>new m(t)};e.piioGallery=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0);window.piioGallery=s.piioGallery;var o=i(0);Object.defineProperty(e,"piioGallery",{enumerable:!0,get:function(){return o.piioGallery}})},function(t){t.exports=JSON.parse('{"de":{"DE":{"OpenImage":"Originalbild in neuem Tab öffnen"}},"en":{"GB":{"OpenImage":"Open Original Image in New Tab"},"US":{"OpenImage":"Open Original Image in New Tab"}},"es":{"MX":{"OpenImage":"Abrir la Imagen Original en una Nueva Pestaña"},"ES":{"OpenImage":"Abrir la Imagen Original en una Nueva Pestaña"}},"fr":{"FR":{"OpenImage":"Ouvrir l\'image originale dans un nouvel onglet"}},"it":{"IT":{"OpenImage":"Aprire l\'immagine originale in una nuova scheda"}},"pt":{"PT":{"OpenImage":"Abrir a Imagem Original em uma Nova Guia"},"BR":{"OpenImage":"Abrir a Imagem Original em uma Nova Guia"}},"ru":{"RU":{"OpenImage":"Открыть исходное изображение в новой вкладке"}}}')},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e,i)=>{if(e){const s=e.querySelector(".carousel-slider"),o=s.querySelector(" .carousel-wrapper"),n=s.getBoundingClientRect(),r=o.getBoundingClientRect(),a=e.querySelector("#prevCarousel"),l=e.querySelector("#nextCarousel");t?(a.style.display="none",l.style.display="none"):r.bottom<=n.bottom+i&&r.top<n.top||r.right<=n.right+i&&r.left<n.left?(a.style.display="block",l.style.display="none"):r.top>=n.top&&r.bottom>n.bottom+i||r.left>=n.left&&r.right>n.right+i?(a.style.display="none",l.style.display="block"):(a.style.display="block",l.style.display="block")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s){0===s?(e.style.display="none",i.style.display="block"):s===t.length-1?(e.style.display="block",i.style.display="none"):(e.style.display="block",i.style.display="block")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=t.querySelector(".current");e.classList.add("fade-in"),setTimeout(()=>{e.classList.remove("fade-in")},500)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){const s=i.findIndex(e=>e===t);let o;return o=s>e?t.previousElementSibling:s<e?t.nextElementSibling:t,o}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,o,n){const r=(e+o)*i,a=n?s.getBoundingClientRect().height:s.getBoundingClientRect().width,l=n?t.getBoundingClientRect().height:t.getBoundingClientRect().width;t.style.transform=r+a<l?n?`translateY( -${r}px)`:`translateX( -${r}px)`:n?`translateY( -${l-a-o}px)`:`translateX( -${l-a-o}px)`}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,o,n,r){t.style.transform=`translateX( -${o*s}px)`,e.classList.remove("current"),i.classList.add("current");const a=i.querySelector("[data-image]").getAttribute("data-image"),l=document.createElement("a");l.classList.add("item"),l.setAttribute("target","_blank"),l.setAttribute("rel","noopener noreferrer"),l.setAttribute("href",a),l.classList.add("item");const h=document.createTextNode(r);l.appendChild(h),n.innerHTML=" ",n.appendChild(l)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.querySelector(".main-wrapper").classList.add("slide")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,o){const n=t.querySelector(o.gallerySelector+" .imgThumb-wrapper"),r=e.querySelector(o.gallerySelector+" .imgThumb-wrapper");t.classList.remove("active"),n&&("border"===i?n.classList.remove("border-"+s):n.classList.remove("overlay"),"border"===i?r.classList.add("border-"+s):r.classList.add("overlay")),e.classList.add("active")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zoom=void 0;e.zoom=t=>{let e,i;e=t.clientX?t.clientX:t.touches?t.touches[0].clientX:0,i=t.clientY?t.clientY:t.touches?t.touches[0].clientY:0;const s=t.currentTarget,o=e-s.getBoundingClientRect().left,n=i-s.getBoundingClientRect().top;let r=o/s.offsetWidth*100,a=n/s.offsetHeight*100;return r=0<=r&&r<=100?r:0>r?0:100,a=0<=a&&a<=100?a:0>a?0:100,r+"%"+a+"%"}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdHlwZXMvZ2FsbGVyeU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L3NyYy9waWlvLWdhbGxlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdXRpbHMvZGlzYWJsZUNhcm91c2VsQnV0dG9ucy5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L3NyYy91dGlscy9kaXNhYmxlTWFpbkJ1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdXRpbHMvZmFkZUluLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL2dldFRhcmdldEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdXRpbHMvbW92ZUNhcm91c2VsLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL21vdmVNYWluU2xpZGVyLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL3NsaWRlLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL3VwZGF0ZU5hdkVsZW1TZWxlY3RlZC5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L3NyYy91dGlscy96b29tLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19pbXBvcnREZWZhdWx0IiwidGhpcyIsIm1vZCIsInBpaW9HYWxsZXJ5IiwibGFuZ3VhZ2VzX2pzb25fMSIsImRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMSIsImRpc2FibGVNYWluQnV0dG9uc18xIiwiZmFkZUluXzEiLCJnZXRUYXJnZXRFbGVtZW50XzEiLCJtb3ZlQ2Fyb3VzZWxfMSIsIm1vdmVNYWluU2xpZGVyXzEiLCJzbGlkZV8xIiwidXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEiLCJ6b29tXzEiLCJHYWxsZXJ5Iiwib3B0aW9ucyIsInJlc3BvbnNpdmVPcHRpb24iLCJkZWZhdWx0SW5kaWNhdG9yUHJvcHMiLCJzaGFwZSIsInNpemUiLCJzcGFjaW5nIiwiZGVmYXVsdFRodW1ibmFpbFByb3BzIiwiaGVpZ2h0IiwibWFyZ2luIiwibmF2aWdhdGlvblNoYXBlIiwic2VsZWN0ZWRCb3JkZXJQb3NpdGlvbiIsInNlbGVjdGVkQm9yZGVyV2lkdGgiLCJzZWxlY3RlZFN0eWxlIiwid2lkdGgiLCJkZWZhdWx0Wm9vbVByb3BzIiwicG9zaXRpb24iLCJyYXRpbyIsInR5cGUiLCJhcmVBbGxUaHVtYnNJblNpZ2h0IiwiY3VycmVudFRyYW5zbGF0ZSIsImRldmljZVdpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhhc0N1cnNvck1vdmVkIiwiaXNNYWluU2xpZGVyU3dpcGluZyIsInByZXZUcmFuc2xhdGUiLCJzdGFydFBvc2l0aW9uIiwidGFyZ2V0SW5kZXgiLCJmbHlvdXRIYW5kbGVyIiwiaXNGbHlvdXRWaXNpYmxlIiwibWFpbldyYXBwZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiem9vbURpdiIsImFkZCIsIm1haW5Db250YWluZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZmx5b3V0Wm9vbSIsImhhbmRsZVByZWxvYWRCZ1pvb20iLCJzdHlsZSIsInpJbmRleCIsInJlbW92ZSIsImJhY2tncm91bmRJbWFnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJ6b29tIiwiY3VycmVudEltYWdlIiwicGlpb0RvbWFpbktleSIsImRhdGFJbWFnZVNyYyIsImdldEF0dHJpYnV0ZSIsInNyYyIsImlubGluZUVudGVySGFuZGxlciIsImdhbGxlcnlTZWxlY3RvciIsImlubGluZVpvb20iLCJpbmxpbmVMZWF2ZUhhbmRsZXIiLCJzZXRab29tRGl2RGltZW5zaW9uIiwiaW1hZ2VXaWR0aCIsImFzcGVjdFJhdGlvIiwiaW5jbHVkZXMiLCJmaWVsZHMiLCJzcGxpdCIsImltYWdlSGVpZ2h0IiwicGFyc2VJbnQiLCJnYWxsZXJ5IiwidW5kZWZpbmVkIiwidHJhbnNpdGlvbiIsInRoZW1lUHJvcHMiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ2YXJpYW50U2VsZWN0b3IiLCJyZXNwb25zaXZlIiwibW9iaWxlIiwidGFibGV0IiwiY2Fyb3VzZWxPZmZzZXQiLCJjYXJvdXNlbFBvc2l0aW9uIiwiY2Fyb3VzZWxTdHlsZSIsImluZGljYXRvclByb3BzIiwibWFpbk5hdmlnYXRpb24iLCJ0aHVtYm5haWxQcm9wcyIsInpvb21Qcm9wcyIsImRvY3VtZW50IiwicGlpbyIsInNldFRpbWVvdXQiLCJyZW5kZXIiLCJ2YXJpYW50c0FycmF5IiwiQXJyYXkiLCJmcm9tIiwiY2hpbGRyZW4iLCJ0YXJnZXRMaXN0IiwidGFyZ2V0IiwiY2xvc2VzdCIsInZhcmlhbnRJbmRleCIsImZpbmRJbmRleCIsImxpc3QiLCJzdGFydCIsInByZXZNYWluQnV0dG9uIiwibmV4dE1haW5CdXR0b24iLCJwcmV2Q2Fyb3VzZWxCdXR0b24iLCJuZXh0Q2Fyb3VzZWxCdXR0b24iLCJjbGllbnRJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjcmVhdGVFbGVtZW50IiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsImNoaWxkV3JhcHBlciIsInNldEF0dHJpYnV0ZSIsImNsb25lIiwiY2xvbmVOb2RlIiwiYXBwZW5kQ2hpbGQiLCJnYWxsZXJ5Q29udGFpbmVyIiwiaW1hZ2VDb250YWluZXIiLCJjb250ZXh0TWVudSIsImlubmVySFRNTCIsIm5hdkluZGljYXRvcnMiLCJjYXJvdXNlbCIsImNhcm91c2VsU2xpZGVyIiwiY2Fyb3VzZWxXcmFwcGVyIiwicHJldkNhcm91c2VsU3ZnIiwiY3JlYXRlUHJldlN2ZyIsIm5leHRDYXJvdXNlbFN2ZyIsImNyZWF0ZU5leHRTdmciLCJpbWFnZXMiLCJpbWciLCJpbmRpY2F0b3IiLCJ0aHVtYkltYWdlIiwiaW1nVGh1bWJXcmFwcGVyIiwidGh1bWJTbGlkZSIsInByZXZNYWluU3ZnIiwibmV4dE1haW5TdmciLCJjbG9zZVN2ZyIsImNyZWF0ZUVsZW1lbnROUyIsImxpbmUxUGF0aCIsImxpbmUyUGF0aCIsInBvcHVwQ2xvc2UiLCJwb3B1cEltYWdlIiwicG9wdXAiLCJjcmVhdGVab29tRGl2IiwibGF1bmNoR2FsbGVyeSIsIm5leHRTdmciLCJuZXh0UGF0aCIsInByZXZTdmciLCJwcmV2UGF0aCIsImNhcm91c2VsU2xpZGVzIiwibGVuZ3RoIiwiY2Fyb3VzZWxTbGlkZVNpemUiLCJpbWFnZVNjcmVlbldpZHRoIiwiZ2FsbGVyeVNjcmVlbldpZHRoIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY29uc29sZSIsImxvZyIsInBpaW9FbGVtZW50cyIsImdldFBpaW9FbGVtZW50cyIsImdldFBpaW9JbWFnZXMiLCJNYXRoIiwiZmxvb3IiLCJnZXRjYXJvdXNlbFNsaWRlclNjcmVlblNpemUiLCJ0aHVtYkltYWdlU2l6ZSIsInNlbGVjdGVkVGh1bWJTaXplIiwiY2Fyb3VzZWxTbGlkZXJTaXplIiwicmlnaHQiLCJsZWZ0IiwidG9wIiwiYm90dG9tIiwiZGVmYXVsdCIsImlzU2xpZGVyVmVydGljYWwiLCJjYXJvdXNlbENvdW50ZXIiLCJ0aHVtYnNJblNpZ2h0IiwibG9hZEltYWdlIiwidGh1bWJJbWFnZXMiLCJpbWFnZSIsIm9uTG9hZEltYWdlIiwiZ2V0VGh1bWJzSW5TaWdodCIsInRodW1ic1RvTG9hZCIsImRpbWVuc2lvbiIsImdldENhcm91c2VsV3JhcHBlckRpbWVuc2lvbiIsImdldE1haW5JbWFnZVdpZHRoIiwiY3VycmVudFNsaWRlIiwidGFyZ2V0U2xpZGUiLCJtYWluU2xpZGVzIiwib3BlbkltYWdlVGV4dCIsImN1cnJlbnRUaHVtYiIsInRhcmdldFRodW1iIiwibmV4dFRodW1iSW5kZXgiLCJ0aHVtYkltYWdlVG9Mb2FkIiwia2VlcFRodW1iU2VsZWN0ZWRPblNpZ2h0IiwiY3VycmVudEluZGljYXRvciIsImluZGljYXRvcnMiLCJ0YXJnZXRJbmRpY2F0b3IiLCJjdXJzb3IiLCJpc0NsaWNrSW5zaWRlIiwiY29udGFpbnMiLCJzZXRTbGlkZXJEaW1lbnNpb25zIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3JXaXRob3V0U3BhY2VzIiwiaHNsTHVtaW5vc2l0eSIsImhvdmVyQmFja2dyb3VuZENvbG9yIiwiZm9jdXNCYWNrZ3JvdW5kQ29sb3IiLCJzZWxlY3RvclN0eWxlIiwic2V0UHJvcGVydHkiLCJvbmNvbnRleHRtZW51IiwibW91c2VYIiwiY2xpZW50WCIsIm1vdXNlWSIsImNsaWVudFkiLCJvZmZzZXRQYXJlbnQiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsIm5hdmlnYXRvciIsImxhbmd1YWdlIiwic2hpZnQiLCJjb3VudHJ5IiwicG9wIiwianNvbkxhbmd1YWdlIiwiT3BlbkltYWdlIiwiZmlyc3QiLCJrZXlzIiwiZW4iLCJVUyIsIm9yaWdpbmFsVVJMIiwiYW5jaG9ydGFnIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwiZGlzcGxheSIsImhhbmRsZVByZXZNYWluSW1hZ2VMb2FkIiwicHJldlNsaWRlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInByZXZJbmRleCIsIlBvaW50ZXJFdmVudCIsInByZXZUaHVtYiIsInByZXZJbmRpY2F0b3IiLCJoYW5kbGVOZXh0TWFpbkltYWdlTG9hZCIsIm5leHRTbGlkZSIsIm5leHRFbGVtZW50U2libGluZyIsIm5leHRJbmRleCIsIm5leHRUaHVtYiIsInRodW1ic0FycmF5IiwibmV4dERvdCIsImdldHBvc2l0aW9uWCIsInRvdWNoZXMiLCJwYWdlWCIsImdldHBvc2l0aW9uWSIsInBhZ2VZIiwiZ2VzdHVyZVN0YXJ0IiwiZ2VzdHVyZU1vdmUiLCJjdXJyZW50UG9zaXRpb24iLCJnZXN0dXJlRW5kIiwiZXYiLCJlbmRQb3NpdGlvbiIsImFicyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiY2FwdHVyZUNsaWNrIiwic3RvcFByb3BhZ2F0aW9uIiwibW92ZWRCeSIsInNldFBvc2l0aW9uQnlJbmRleEluTWFpblNsaWRlciIsImFuY2hvclRhZyIsIm9uY2xpY2siLCJzZXRab29tIiwiZmxleERpcmVjdGlvbiIsImNhcm91c2VsSW1hZ2VzV3JhcHBlcnMiLCJpbWFnZVRodW1iV3JhcHBlciIsInNsaWRlVGh1bWIiLCJzZXRDYXJvdXNlbERpbWVuc2lvbiIsImxvYWRUaHVtYm5haWxJbWFnZXNJblNpZ2h0IiwidGFyZ2V0V3JhcHBlciIsImNhcm91c2VsU2xpZGVyU2NyZWVuU2l6ZSIsImhhbmRsZVRodW1iTG9hZEltYWdlIiwibG9hZGVkVGh1bWJzIiwidHJhbnNmb3JtIiwidHJhbnNmb3JtT3JpZ2luIiwicHJldkFycm93IiwibmV4dEFycm93IiwiY2Fyb3VzZWxXcmFwcGVyU2l6ZSIsImlzQ2Fyb3VzZWxTd2lwaW5nIiwiY2Fyb3VzZWxTdGFydFBvc2l0aW9uIiwiY2Fyb3VzZWxQcmV2VHJhbnNsYXRlIiwiY2Fyb3VzZWxDdXJlbnRUcmFuc2xhdGUiLCJnZXN0dXJlU3RhcnRDYXJvdXNlbCIsInBvcyIsInRyYW5zZm9ybU1hdHJpeCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwidHJpbSIsImdlc3R1cmVNb3ZlQ2Fyb3VzZWwiLCJjYXJvdXNlbEN1cnJlbnRQb3NpdGlvbiIsImdlc3R1cmVFbmRDYXJvdXNlbCIsImNhcm91c2VsRW5kUG9zaXRpb24iLCJuZXdUcmFuc2xhdGUiLCJ0aHVtYiIsInNsaWRlSW5kaWNhdG9yIiwic2V0TmF2SW5kaWNhdG9yc0RpbWVuc2lvbiIsInRhcmdldERvdCIsInByZXZpb3VzRGV2aWNlV2l0aCIsImRvd25sb2FkZWRNYWluSW1hZ2VzIiwiR2FsbGVyeU9iamVjdCIsImluaXQiLCJvcHRzIiwiZ2FsbGVyeU9iamVjdF8xIiwiZ2FsbGVyeU9iamVjdF8yIiwiY2Fyb3VzZWxTbGlkZXJQb3NpdGlvbiIsImNhcm91c2VsV3JhcHBlclBvc2l0aW9uIiwicHJldkNhcm91c2VsIiwibmV4dENhcm91c2VsIiwiY3VycmVudCIsImN1cnJlbnRFbGVtZW50IiwiZWxlbWVudHNBcnJheSIsImN1cnJlbnRJbmRleCIsInRhcmdldEVsZW1lbnQiLCJuYXZXcmFwcGVyIiwibmF2VGh1bWJTaXplIiwiY291bnRlciIsIm5hdkNvbnRhaW5lciIsIm1vdmVCeSIsIm5hdkNvbnRhaW5lclNpemUiLCJuYXZXcmFwcGVyU2l6ZSIsIm5vZGUiLCJjdXJyZW50V3JhcHBlciIsImltYWdlWm9vbSIsImN1cnJlbnRUYXJnZXQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInhBbW91bnQiLCJvZmZzZXRXaWR0aCIsInlBbW91bnQiLCJvZmZzZXRIZWlnaHQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1D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QStQLEVBQWMzTyxVQUFVRyxJQUFJLFVBQVV6QixHQUd0Q2lRLEVBQWMzTyxVQUFVRyxJQUFJLFlBR3BDeUQsRUFBTzVELFVBQVVHLElBQUksWSw2QkNwQnpCeEUsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLElBQ3REbkIsRUFBUWlHLFVBQU8sRUFlZmpHLEVBQVFpRyxLQWRNSCxJQUNWLElBQUlnSyxFQUNBRSxFQUNRRixFQUFaaEssRUFBRWdLLFFBQW9CaEssRUFBRWdLLFFBQVVoSyxFQUFFb00sUUFBb0JwTSxFQUFFb00sUUFBUSxHQUFHcEMsUUFBb0IsRUFDN0VFLEVBQVpsSyxFQUFFa0ssUUFBb0JsSyxFQUFFa0ssUUFBVWxLLEVBQUVvTSxRQUFvQnBNLEVBQUVvTSxRQUFRLEdBQUdsQyxRQUFvQixFQUN6RixNQUFNaUgsRUFBWW5SLEVBQUVvUixjQUNkQyxFQUFVckgsRUFBVW1ILEVBQVV6Syx3QkFBd0JhLEtBQ3REK0osRUFBVXBILEVBQVVpSCxFQUFVekssd0JBQXdCYyxJQUM1RCxJQUFJK0osRUFBVUYsRUFBVUYsRUFBVUssWUFBYyxJQUM1Q0MsRUFBVUgsRUFBVUgsRUFBVU8sYUFBZSxJQUdqRCxPQUZtQ0gsRUFBbEMsR0FBS0EsR0FBV0EsR0FBVyxJQUFpQkEsRUFBVSxFQUFJQSxFQUFvQixFQUFjLElBQzFERSxFQUFsQyxHQUFLQSxHQUFXQSxHQUFXLElBQWlCQSxFQUFVLEVBQUlBLEVBQW9CLEVBQWMsSUFDdEZGLEVBQVUsSUFBTUUsRUFBVSIsImZpbGUiOiJwaWlvR2FsbGVyeS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5waWlvR2FsbGVyeSA9IHZvaWQgMDtcbmNvbnN0IGxhbmd1YWdlc19qc29uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3Jlc291cmNlcy9sYW5ndWFnZXMuanNvblwiKSk7XG5jb25zdCBkaXNhYmxlQ2Fyb3VzZWxCdXR0b25zXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3V0aWxzL2Rpc2FibGVDYXJvdXNlbEJ1dHRvbnNcIikpO1xuY29uc3QgZGlzYWJsZU1haW5CdXR0b25zXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3V0aWxzL2Rpc2FibGVNYWluQnV0dG9uc1wiKSk7XG5jb25zdCBmYWRlSW5fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvZmFkZUluXCIpKTtcbmNvbnN0IGdldFRhcmdldEVsZW1lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvZ2V0VGFyZ2V0RWxlbWVudFwiKSk7XG5jb25zdCBtb3ZlQ2Fyb3VzZWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvbW92ZUNhcm91c2VsXCIpKTtcbmNvbnN0IG1vdmVNYWluU2xpZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3V0aWxzL21vdmVNYWluU2xpZGVyXCIpKTtcbmNvbnN0IHNsaWRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3V0aWxzL3NsaWRlXCIpKTtcbmNvbnN0IHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlscy91cGRhdGVOYXZFbGVtU2VsZWN0ZWRcIikpO1xuY29uc3Qgem9vbV8xID0gcmVxdWlyZShcIi4uL3V0aWxzL3pvb21cIik7XG5jbGFzcyBHYWxsZXJ5IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdEluZGljYXRvclByb3BzID0ge1xuICAgICAgICAgICAgc2hhcGU6IFwiY2lyY2xlXCIsXG4gICAgICAgICAgICBzaXplOiAxMyxcbiAgICAgICAgICAgIHNwYWNpbmc6IDYsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVmYXVsdFRodW1ibmFpbFByb3BzID0ge1xuICAgICAgICAgICAgaGVpZ2h0OiA3MCxcbiAgICAgICAgICAgIG1hcmdpbjogMTAsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uU2hhcGU6IFwicmVjdGFuZ2xlXCIsXG4gICAgICAgICAgICBzZWxlY3RlZEJvcmRlclBvc2l0aW9uOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgc2VsZWN0ZWRCb3JkZXJXaWR0aDogMyxcbiAgICAgICAgICAgIHNlbGVjdGVkU3R5bGU6IFwib3ZlcmxheVwiLFxuICAgICAgICAgICAgd2lkdGg6IDcwLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlZmF1bHRab29tUHJvcHMgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogXCJcIixcbiAgICAgICAgICAgIHJhdGlvOiAyLFxuICAgICAgICAgICAgdHlwZTogXCJpbmxpbmVcIixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudFRyYW5zbGF0ZSA9IDA7XG4gICAgICAgIHRoaXMuZGV2aWNlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5oYXNDdXJzb3JNb3ZlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzTWFpblNsaWRlclN3aXBpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcmV2VHJhbnNsYXRlID0gMDtcbiAgICAgICAgdGhpcy5zdGFydFBvc2l0aW9uID0gMDtcbiAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IDA7XG4gICAgICAgIC8vIEZseW91dCBab29tXG4gICAgICAgIHRoaXMuZmx5b3V0SGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNGbHlvdXRWaXNpYmxlID0gIXRoaXMuaXNGbHlvdXRWaXNpYmxlO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgY3VycmVudFNsaWRlLmNsYXNzTGlzdC50b2dnbGUoXCJmbHlvdXQtb3BlblwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRmx5b3V0VmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLmZseW91dFpvb20sIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuZmx5b3V0Wm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS56SW5kZXggPSBgMTAwYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLmZseW91dFpvb20sIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuZmx5b3V0Wm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS56SW5kZXggPSBgLTFgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZseW91dFpvb20gPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IHpvb21fMS56b29tKGUpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBQcmVsb2FkcyB0aGUgYmFja3JvdW5kIGltYWdlcyBmb3Igem9vbWluZ1xuICAgICAgICB0aGlzLmhhbmRsZVByZWxvYWRCZ1pvb20gPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW1hZ2UgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmN1cnJlbnQgaW1nXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5waWlvRG9tYWluS2V5KSB7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGFJbWFnZVNyYyA9IGN1cnJlbnRJbWFnZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWltYWdlLXpvb21cIik7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhSW1hZ2VTcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUltYWdlU3JjID0gY3VycmVudEltYWdlLmdldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7ZGF0YUltYWdlU3JjfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtjdXJyZW50SW1hZ2Uuc3JjfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBJbmxpbmUgWm9vbS5cbiAgICAgICAgdGhpcy5pbmxpbmVFbnRlckhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgIGN1cnJlbnRTbGlkZS5jbGFzc0xpc3QuYWRkKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVByZWxvYWRCZ1pvb20oKTtcbiAgICAgICAgICAgIHRoaXMuaW5saW5lWm9vbShlKTtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaW5saW5lWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5pbmxpbmVab29tLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5saW5lTGVhdmVIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmN1cnJlbnRcIik7XG4gICAgICAgICAgICBjdXJyZW50U2xpZGUuY2xhc3NMaXN0LnJlbW92ZShcImlubGluZS1vcGVuXCIpO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5pbmxpbmVab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLmlubGluZVpvb20sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdW5zZXRgO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IGB1bnNldGA7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5saW5lWm9vbSA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gem9vbV8xLnpvb20oZSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNldCBab29tIGNvbnRhaW5lciBkaW1lbnNpb25cbiAgICAgICAgdGhpcy5zZXRab29tRGl2RGltZW5zaW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnpvb21EaXYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUud2lkdGggPSBgJHt0aGlzLmltYWdlV2lkdGh9cHhgO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8gPT09IFwic3RyaW5nXCIgJiYgdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpby5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUhlaWdodCA9IHRoaXMuaW1hZ2VXaWR0aCAvIHBhcnNlSW50KGZpZWxkc1swXSwgMTApICogcGFyc2VJbnQoZmllbGRzWzFdLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaW1hZ2VIZWlnaHR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpbyA9PT0gXCJvYmplY3RcIiAmJiB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlSGVpZ2h0ID0gdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvLmhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5pbWFnZUhlaWdodH1weGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlSGVpZ2h0ID0gdGhpcy5pbWFnZVdpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmltYWdlSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2FsbGVyeS5zdHlsZS5wb3NpdGlvbiA9IGByZWxhdGl2ZWA7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUucG9zaXRpb24gPSBgYWJzb2x1dGVgO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm9wdGlvbnMucGlpb0RvbWFpbktleSA9IChvcHRpb25zLnBpaW9Eb21haW5LZXkgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBvcHRpb25zLnBpaW9Eb21haW5LZXkpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yID0gb3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3I7XG4gICAgICAgIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID0gKG9wdGlvbnMudHJhbnNpdGlvbiA9PT0gdW5kZWZpbmVkID8gXCJzbGlkZVwiIDogb3B0aW9ucy50cmFuc2l0aW9uKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnRoZW1lUHJvcHMgPSBvcHRpb25zLnRoZW1lUHJvcHMgPT09IHVuZGVmaW5lZCA/IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiaHNsYSgyMzQsIDc2JSwgNTAlLCAxKVwiLFxuICAgICAgICAgICAgY29sb3I6IFwiaHNsYSgwLCAxMDAlLCAxMDAlLCAxKVwiLFxuICAgICAgICB9IDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAob3B0aW9ucy50aGVtZVByb3BzLmJhY2tncm91bmQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IFwiaHNsYSgyMzQsIDc2JSwgNTAlLCAxKVwiXG4gICAgICAgICAgICAgICAgICAgIDogb3B0aW9ucy50aGVtZVByb3BzLmJhY2tncm91bmQpLFxuICAgICAgICAgICAgICAgIGNvbG9yOiAob3B0aW9ucy50aGVtZVByb3BzLmNvbG9yID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBcImhzbGEoMCwgMTAwJSwgMTAwJSwgMSlcIlxuICAgICAgICAgICAgICAgICAgICA6IG9wdGlvbnMudGhlbWVQcm9wcy5jb2xvciksXG4gICAgICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMudmFyaWFudFNlbGVjdG9yID0gb3B0aW9ucy52YXJpYW50U2VsZWN0b3I7XG4gICAgICAgIC8vIFJlc3BvbnNpdmUgc2V0dGluZ3MuXG4gICAgICAgIGxldCByZXNwb25zaXZlT3B0aW9uO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlc3BvbnNpdmUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlc3BvbnNpdmUubW9iaWxlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5kZXZpY2VXaWR0aCA8IDc2NCkge1xuICAgICAgICAgICAgcmVzcG9uc2l2ZU9wdGlvbiA9IG9wdGlvbnMucmVzcG9uc2l2ZS5tb2JpbGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnJlc3BvbnNpdmUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlc3BvbnNpdmUudGFibGV0ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5kZXZpY2VXaWR0aCA8IDEwMjQpIHtcbiAgICAgICAgICAgIHJlc3BvbnNpdmVPcHRpb24gPSBvcHRpb25zLnJlc3BvbnNpdmUudGFibGV0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2l2ZU9wdGlvbiA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvID0gKHJlc3BvbnNpdmVPcHRpb24uYXNwZWN0UmF0aW8gPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICBcInNxdWFyZVwiIDogcmVzcG9uc2l2ZU9wdGlvbi5hc3BlY3RSYXRpbyk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jYXJvdXNlbE9mZnNldCA9IChyZXNwb25zaXZlT3B0aW9uLmNhcm91c2VsT2Zmc2V0ID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgMTUgOiByZXNwb25zaXZlT3B0aW9uLmNhcm91c2VsT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmNhcm91c2VsUG9zaXRpb24gPSAocmVzcG9uc2l2ZU9wdGlvbi5jYXJvdXNlbFBvc2l0aW9uID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgXCJib3R0b21cIiA6IHJlc3BvbnNpdmVPcHRpb24uY2Fyb3VzZWxQb3NpdGlvbik7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID0gKHJlc3BvbnNpdmVPcHRpb24uY2Fyb3VzZWxTdHlsZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIFwidGh1bWJuYWlsc1wiIDogcmVzcG9uc2l2ZU9wdGlvbi5jYXJvdXNlbFN0eWxlKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmluZGljYXRvclByb3BzID0gcmVzcG9uc2l2ZU9wdGlvbi5pbmRpY2F0b3JQcm9wcyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEluZGljYXRvclByb3BzIDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzaGFwZTogKHJlc3BvbnNpdmVPcHRpb24uaW5kaWNhdG9yUHJvcHMuc2hhcGUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIFwiY2lyY2xlXCIgOiByZXNwb25zaXZlT3B0aW9uLmluZGljYXRvclByb3BzLnNoYXBlKSxcbiAgICAgICAgICAgICAgICBzaXplOiAocmVzcG9uc2l2ZU9wdGlvbi5pbmRpY2F0b3JQcm9wcy5zaXplID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAxMyA6IHJlc3BvbnNpdmVPcHRpb24uaW5kaWNhdG9yUHJvcHMuc2l6ZSksXG4gICAgICAgICAgICAgICAgc3BhY2luZzogKHJlc3BvbnNpdmVPcHRpb24uaW5kaWNhdG9yUHJvcHMuc3BhY2luZyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgNiA6IHJlc3BvbnNpdmVPcHRpb24uaW5kaWNhdG9yUHJvcHMuc3BhY2luZyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB0aGlzLm9wdGlvbnMubWFpbk5hdmlnYXRpb24gPSAocmVzcG9uc2l2ZU9wdGlvbi5tYWluTmF2aWdhdGlvbiA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIFwicmVjdGFuZ2xlXCIgOiByZXNwb25zaXZlT3B0aW9uLm1haW5OYXZpZ2F0aW9uKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzID0gcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcyA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMuZGVmYXVsdFRodW1ibmFpbFByb3BzXG4gICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuaGVpZ2h0ID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgNzAgOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLm1hcmdpbiA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgIDEwIDogcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcy5tYXJnaW4sXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25TaGFwZTogcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcInJlY3RhbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEJvcmRlclBvc2l0aW9uOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLm9wdGlvbnMuY2Fyb3VzZWxQb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQm9yZGVyV2lkdGg6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRCb3JkZXJXaWR0aCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IDNcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFN0eWxlOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIm92ZXJsYXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLndpZHRoID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgNzAgOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLndpZHRoLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMub3B0aW9ucy56b29tUHJvcHMgPSByZXNwb25zaXZlT3B0aW9uLnpvb21Qcm9wcyA9PT0gdW5kZWZpbmVkID8gdGhpcy5kZWZhdWx0Wm9vbVByb3BzIDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVzcG9uc2l2ZU9wdGlvbi56b29tUHJvcHMucG9zaXRpb24gPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIFwicmlnaHRcIiA6IHJlc3BvbnNpdmVPcHRpb24uem9vbVByb3BzLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIHJhdGlvOiByZXNwb25zaXZlT3B0aW9uLnpvb21Qcm9wcy5yYXRpbyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgMiA6IHJlc3BvbnNpdmVPcHRpb24uem9vbVByb3BzLnJhdGlvLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJlc3BvbnNpdmVPcHRpb24uem9vbVByb3BzLnR5cGUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIFwiaW5saW5lXCIgOiByZXNwb25zaXZlT3B0aW9uLnpvb21Qcm9wcy50eXBlLFxuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3Rvcn1gKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgodGhpcy5vcHRpb25zLnBpaW9Eb21haW5LZXkpICYmICh3aW5kb3cucGlpbyA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMucmVuZGVyKCk7IH0sIDEwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ha2UgYXJyYXkgb2YgaW1hZ2VzIHVybCdzXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZhcmlhbnRTZWxlY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMub3B0aW9ucy52YXJpYW50U2VsZWN0b3J9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50c0FycmF5ID0gQXJyYXkuZnJvbSh0aGlzLnZhcmlhbnRTZWxlY3Rvci5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50U2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRMaXN0ID0gdGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1saXN0XVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudEluZGV4ID0gdGhpcy52YXJpYW50c0FycmF5LmZpbmRJbmRleCgobGlzdCkgPT4gbGlzdCA9PT0gdGFyZ2V0TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQodmFyaWFudEluZGV4KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2hvdyBhcnJvd3NcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZNYWluQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRNYWluQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZDYXJvdXNlbEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubmV4dENhcm91c2VsQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuICAgIHN0YXJ0KHZhcmlhbnRJbmRleCkge1xuICAgICAgICB0aGlzLmdhbGxlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3J9YCk7XG4gICAgICAgIGxldCBjbGllbnRJdGVtcztcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy52YXJpYW50U2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xpZW50SXRlbXMgPSBBcnJheS5mcm9tKHRoaXMudmFyaWFudHNBcnJheVt2YXJpYW50SW5kZXhdLnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWltYWdlXWApKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsaWVudEl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLmdhbGxlcnkuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCBhIHdyYXBwZXIgZm9yIGVhY2ggZWxlbWVudCBvbiB0aGUgY2xpZW50IGdhbGxlcnkgaHRtbFxuICAgICAgICB0aGlzLm1haW5XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5tYWluV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwibWFpbi13cmFwcGVyXCIpO1xuICAgICAgICBjbGllbnRJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNoaWxkV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWdhbGxlcnlcIiwgYGl0ZW0tJHtpbmRleH1gKTtcbiAgICAgICAgICAgIGNoaWxkV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBpbmRleCA9PT0gMCA/IFwiY3VycmVudFwiIDogXCJcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZhcmlhbnRTZWxlY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmUgPSBpdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBjaGlsZFdyYXBwZXIuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hpbGRXcmFwcGVyLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5hcHBlbmRDaGlsZChjaGlsZFdyYXBwZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgSFRNTCBtYXJrdXBcbiAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJnYWxsZXJ5LWNvbnRhaW5lclwiKTtcbiAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1haW4taW1nXCIpO1xuICAgICAgICB0aGlzLm1haW5Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLm1haW5Db250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1haW4tY29udGFpbmVyXCIpO1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudS5jbGFzc0xpc3QuYWRkKFwiY29udGV4dC1tZW51XCIpO1xuICAgICAgICAvLyBBcHBlbmQgdGhlIGNvbnRhaW5lcnNcbiAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubWFpbldyYXBwZXIpO1xuICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubWFpbkNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmltYWdlQ29udGFpbmVyKTtcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgZXhpc3RpbmcgaHRtbCB3aXRoIHRoZSBuZXcgc3RydWN0dXJlXG4gICAgICAgIHRoaXMuZ2FsbGVyeS5pbm5lckhUTUwgPSBcIiBcIjtcbiAgICAgICAgdGhpcy5nYWxsZXJ5LmFwcGVuZENoaWxkKHRoaXMuZ2FsbGVyeUNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuZ2FsbGVyeS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRleHRNZW51KTtcbiAgICAgICAgLy8gQ2Fyb3VzZWwgc3R5bGVcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcImluZGljYXRvcnNcIikge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgSFRNTCBtYXJrdXBcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxPZmZzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbE9mZnNldC5jbGFzc0xpc3QuYWRkKFwiY2Fyb3VzZWwtb2Zmc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5uYXZJbmRpY2F0b3JzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMubmF2SW5kaWNhdG9ycy5jbGFzc0xpc3QuYWRkKFwibmF2SW5kaWNhdG9yc1wiKTtcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgc3RydWN0dXJlXG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYXJvdXNlbE9mZnNldCk7XG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5uYXZJbmRpY2F0b3JzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IEhUTUwgbWFya3VwXG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsT2Zmc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxPZmZzZXQuY2xhc3NMaXN0LmFkZChcImNhcm91c2VsLW9mZnNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbC5jbGFzc0xpc3QuYWRkKFwiY2Fyb3VzZWxcIik7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXIuY2xhc3NMaXN0LmFkZChcImNhcm91c2VsLXNsaWRlclwiKTtcbiAgICAgICAgICAgIC8vIHRoaXMuY2Fyb3VzZWxTbGlkZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLmhlaWdodH1weGA7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiY2Fyb3VzZWwtd3JhcHBlclwiKTtcbiAgICAgICAgICAgIC8vIHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnN0eWxlLmhlaWdodCA9IGAke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5oZWlnaHR9cHhgO1xuICAgICAgICAgICAgLy8gQXBwZW5kIG5ldyBzdHJ1Y3R1cmVcbiAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhcm91c2VsT2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXIuYXBwZW5kQ2hpbGQodGhpcy5jYXJvdXNlbFdyYXBwZXIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbC5hcHBlbmRDaGlsZCh0aGlzLmNhcm91c2VsU2xpZGVyKTtcbiAgICAgICAgICAgIC8vIElmIENhcm91c2VsIGJ1dHRvbnMgYXJlIGVuYWJsZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBwcmV2aW91cyBidXR0b25cbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2Q2Fyb3VzZWxTdmcgPSB0aGlzLmNyZWF0ZVByZXZTdmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZDYXJvdXNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWxCdXR0b24uY2xhc3NMaXN0LmFkZChcImFycm93XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwcmV2LWFycm93XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgYGJ1dHRvbmApO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBwcmV2Q2Fyb3VzZWxgKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZDYXJvdXNlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBgZGlzcGxheTpub25lYCk7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHByZXZpb3VzIGJ1dHRvblxuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLmFwcGVuZENoaWxkKHByZXZDYXJvdXNlbFN2Zyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJvdXNlbC5hcHBlbmRDaGlsZCh0aGlzLnByZXZDYXJvdXNlbEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5leHQgYnV0dG9uXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENhcm91c2VsU3ZnID0gdGhpcy5jcmVhdGVOZXh0U3ZnKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhcnJvd1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibmV4dC1hcnJvd1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIGBidXR0b25gKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgbmV4dENhcm91c2VsYCk7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIG5leHQgYnV0dG9uXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uYXBwZW5kQ2hpbGQobmV4dENhcm91c2VsU3ZnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsLmFwcGVuZENoaWxkKHRoaXMubmV4dENhcm91c2VsQnV0dG9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCBuZXcgc3RydWN0dXJlXG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYXJvdXNlbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHRoZSBtYWluIGltYWdlc1xuICAgICAgICB0aGlzLmltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3Rvcn0gW2RhdGEtaW1hZ2VdYCk7XG4gICAgICAgIC8vIEltYWdlIGRpc3RyaWJ1dGlvbiBhY2NvcmRpbmcgY2Fyb3VzZWwgc3R5bGVcbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaCgoaW1nLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3JjID0gaW1nLmdldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2VcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwiaW5kaWNhdG9yc1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGVhY2ggaW5kaWNhdG9yXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgaW5kZXggPT09IDAgPyBcImFjdGl2ZVwiIDogXCJcIik7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoXCJpbmRpY2F0b3JcIik7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIGl0IHRvIGl0J3MgcGFyZW50XG4gICAgICAgICAgICAgICAgdGhpcy5uYXZJbmRpY2F0b3JzLmFwcGVuZENoaWxkKGluZGljYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJ0aHVtYm5haWxzXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZWFjaCB0aHVtYm5haWxcbiAgICAgICAgICAgICAgICBjb25zdCB0aHVtYkltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgICAgICAgICB0aHVtYkltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBXCIpO1xuICAgICAgICAgICAgICAgIHRodW1iSW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1pbWFnZVwiLCBzcmMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGltZ1RodW1iV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgaW1nVGh1bWJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJpbWdUaHVtYi13cmFwcGVyXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRodW1iU2xpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHRodW1iU2xpZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgaW5kZXggPT09IDAgPyBcImFjdGl2ZVwiIDogXCJcIik7XG4gICAgICAgICAgICAgICAgdGh1bWJTbGlkZS5jbGFzc0xpc3QuYWRkKFwic2xpZGVcIik7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIGVsZW1lbnRzIHRvIGl0J3MgcGFyZW50cyB0byBjcmVhdGUgdGhlIHN0cnVjdHVyZVxuICAgICAgICAgICAgICAgIGltZ1RodW1iV3JhcHBlci5hcHBlbmRDaGlsZCh0aHVtYkltYWdlKTtcbiAgICAgICAgICAgICAgICB0aHVtYlNsaWRlLmFwcGVuZENoaWxkKGltZ1RodW1iV3JhcHBlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFdyYXBwZXIuYXBwZW5kQ2hpbGQodGh1bWJTbGlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUcmFuc2l0aW9uIG5vbmV8ZmFkZXxzbGlkZVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYW5zaXRpb24gIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS10cmFuc2l0aW9uXCIsIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uIC8qIHx8IFwic2xpZGVcIiAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3Mgbm9uZXxlbHNlXG4gICAgICAgIC8vIElmIE1haW4gYnV0dG9ucyBhcmUgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1haW5OYXZpZ2F0aW9uICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHByZXZpb3VzIGJ1dHRvblxuICAgICAgICAgICAgY29uc3QgcHJldk1haW5TdmcgPSB0aGlzLmNyZWF0ZVByZXZTdmcoKTtcbiAgICAgICAgICAgIHByZXZNYWluU3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjI0cHhcIik7XG4gICAgICAgICAgICBwcmV2TWFpblN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjI0cHhcIik7XG4gICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uY2xhc3NMaXN0LmFkZChcImFycm93XCIpO1xuICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicHJldi1hcnJvd1wiKTtcbiAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBgYnV0dG9uYCk7XG4gICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBwcmV2TWFpbkJ1dHRvbmApO1xuICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBgZGlzcGxheTpub25lYCk7XG4gICAgICAgICAgICAvLyBBcHBlbmQgcHJldmlvdXMgYnV0dG9uXG4gICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLmFwcGVuZENoaWxkKHByZXZNYWluU3ZnKTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5wcmV2TWFpbkJ1dHRvbik7XG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV4dCBidXR0b25cbiAgICAgICAgICAgIGNvbnN0IG5leHRNYWluU3ZnID0gdGhpcy5jcmVhdGVOZXh0U3ZnKCk7XG4gICAgICAgICAgICBuZXh0TWFpblN2Zy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgXCIyNHB4XCIpO1xuICAgICAgICAgICAgbmV4dE1haW5Tdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIyNHB4XCIpO1xuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhcnJvd1wiKTtcbiAgICAgICAgICAgIHRoaXMubmV4dE1haW5CdXR0b24uY2xhc3NMaXN0LmFkZChcIm5leHQtYXJyb3dcIik7XG4gICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgYGJ1dHRvbmApO1xuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgbmV4dE1haW5CdXR0b25gKTtcbiAgICAgICAgICAgIC8vIEFwcGVuZCBuZXh0IGJ1dHRvblxuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5hcHBlbmRDaGlsZChuZXh0TWFpblN2Zyk7XG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubmV4dE1haW5CdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGV2aWNlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgLy8gWm9vbSBub25lfHBvcHVwfGZseW91dHxpbmxpbmVcbiAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS1nYWxsZXJ5XSBhXCIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy50eXBlID09PSBcInBvcHVwXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS16b29tXCIsIFwicG9wdXBcIik7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGNyb3NzIHN2Z1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NlU3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgICAgICAgICAgICAgY2xvc2VTdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBcIjAgMCAyMyAyM1wiKTtcbiAgICAgICAgICAgICAgICBjbG9zZVN2Zy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lMVBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIik7XG4gICAgICAgICAgICAgICAgbGluZTFQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgXCJNMjEuNTE0NyAyMS41MTQ3TDEuNTE0NzEgMS41MTQ3MVwiKTtcbiAgICAgICAgICAgICAgICBsaW5lMVBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIGBjdXJyZW50Q29sb3JgKTtcbiAgICAgICAgICAgICAgICBsaW5lMVBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGAyYCk7XG4gICAgICAgICAgICAgICAgbGluZTFQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsIGByb3VuZGApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUyUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicGF0aFwiKTtcbiAgICAgICAgICAgICAgICBsaW5lMlBhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk0xLjUxNDY5IDIxLjUxNDdMMjEuNTE0NyAxLjUxNDcxXCIpO1xuICAgICAgICAgICAgICAgIGxpbmUyUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgYGN1cnJlbnRDb2xvcmApO1xuICAgICAgICAgICAgICAgIGxpbmUyUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgYDJgKTtcbiAgICAgICAgICAgICAgICBsaW5lMlBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIiwgYHJvdW5kYCk7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHBhdGhzIHRvIHN2Z1xuICAgICAgICAgICAgICAgIGNsb3NlU3ZnLmFwcGVuZENoaWxkKGxpbmUxUGF0aCk7XG4gICAgICAgICAgICAgICAgY2xvc2VTdmcuYXBwZW5kQ2hpbGQobGluZTJQYXRoKTtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWFya3VwIGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cENsb3NlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cENsb3NlLmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1jbG9zZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBJbWFnZS5jbGFzc0xpc3QuYWRkKFwicG9wdXAtaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBcIik7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHN2ZyB0byBzcGFuXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cENsb3NlLmFwcGVuZENoaWxkKGNsb3NlU3ZnKTtcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgaW1nIGFuZCBzcGFuIHRvIHBvcHVwIGRpdlxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuYXBwZW5kQ2hpbGQodGhpcy5wb3B1cENsb3NlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmFwcGVuZENoaWxkKHRoaXMucG9wdXBJbWFnZSk7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHBvcHVwIGRpdiB0byBnYWxsZXJ5XG4gICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LmFwcGVuZENoaWxkKHRoaXMucG9wdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy50eXBlID09PSBcImZseW91dFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVab29tRGl2KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGV2aWNlV2lkdGggPCA5OTIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtem9vbVwiLCBcImlubGluZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLXpvb21cIiwgXCJmbHlvdXRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy50eXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLXpvb21cIiwgXCJpbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVab29tRGl2KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXVuY2hHYWxsZXJ5KCk7XG4gICAgfVxuICAgIC8vIEFycm93cyBzdmcnc1xuICAgIGNyZWF0ZU5leHRTdmcoKSB7XG4gICAgICAgIGNvbnN0IG5leHRTdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgbmV4dFN2Zy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwibm9uZVwiKTtcbiAgICAgICAgbmV4dFN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDI0IDI0XCIpO1xuICAgICAgICBjb25zdCBuZXh0UGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicGF0aFwiKTtcbiAgICAgICAgbmV4dFBhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk05IDE4TDE1IDEyTDkgNlwiKTtcbiAgICAgICAgbmV4dFBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIGBjdXJyZW50Q29sb3JgKTtcbiAgICAgICAgbmV4dFBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGAycHhgKTtcbiAgICAgICAgbmV4dFBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIiwgYHJvdW5kYCk7XG4gICAgICAgIG5leHRQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lam9pblwiLCBgcm91bmRgKTtcbiAgICAgICAgLy8gQXBwZW5kIHBhdGggdG8gc3ZnXG4gICAgICAgIG5leHRTdmcuYXBwZW5kQ2hpbGQobmV4dFBhdGgpO1xuICAgICAgICByZXR1cm4gbmV4dFN2ZztcbiAgICB9XG4gICAgY3JlYXRlUHJldlN2ZygpIHtcbiAgICAgICAgY29uc3QgcHJldlN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICBwcmV2U3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMjQgMjRcIik7XG4gICAgICAgIHByZXZTdmcuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgIGNvbnN0IHByZXZQYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpO1xuICAgICAgICBwcmV2UGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTE1IDE4TDkgMTJMMTUgNlwiKTtcbiAgICAgICAgcHJldlBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIGBjdXJyZW50Q29sb3JgKTtcbiAgICAgICAgcHJldlBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGAycHhgKTtcbiAgICAgICAgcHJldlBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIiwgYHJvdW5kYCk7XG4gICAgICAgIHByZXZQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lam9pblwiLCBgcm91bmRgKTtcbiAgICAgICAgLy8gQXBwZW5kIHBhdGggdG8gc3ZnXG4gICAgICAgIHByZXZTdmcuYXBwZW5kQ2hpbGQocHJldlBhdGgpO1xuICAgICAgICByZXR1cm4gcHJldlN2ZztcbiAgICB9XG4gICAgLy8gQ3JlYXRlIFpvb20gY29udGFpbmVyXG4gICAgY3JlYXRlWm9vbURpdigpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGRpdiB3aGVyZSB6b29tIHdpbGwgYmUgZGlzcGxheWVkXG4gICAgICAgIHRoaXMuem9vbURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuem9vbURpdi5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS16b29tXCIpO1xuICAgICAgICAvLyBBcHBlbmQgaXQgdG8gaXQncyBwYXJlbnRcbiAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnpvb21EaXYpO1xuICAgIH1cbiAgICAvLyBHZXQgY2Fyb3VzZWwgc2xpZGVyIHNjcmVlbiBzaXplXG4gICAgZ2V0Y2Fyb3VzZWxTbGlkZXJTY3JlZW5TaXplKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2Fyb3VzZWxTbGlkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYXJvdXNlbFNsaWRlckRpbWVuc2lvbiA9ICh0aGlzLmlzU2xpZGVyVmVydGljYWwpID9cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0LCAxMCkgOlxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5pbWFnZUNvbnRhaW5lci5zdHlsZS53aWR0aCwgMTApO1xuICAgICAgICByZXR1cm4gY2Fyb3VzZWxTbGlkZXJEaW1lbnNpb247XG4gICAgfVxuICAgIC8vIEdldCBjYXJvdXNlbCB3cmFwcGVyIGRpbWVuc2lvblxuICAgIGdldENhcm91c2VsV3JhcHBlckRpbWVuc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fyb3VzZWxTbGlkZXMubGVuZ3RoICogdGhpcy5jYXJvdXNlbFNsaWRlU2l6ZTtcbiAgICB9XG4gICAgLy8gR2V0IG1haW4gaW1hZ2Ugd2lkdGhcbiAgICBnZXRNYWluSW1hZ2VXaWR0aCgpIHtcbiAgICAgICAgbGV0IGltYWdlU2NyZWVuV2lkdGg7XG4gICAgICAgIGNvbnN0IGdhbGxlcnlTY3JlZW5XaWR0aCA9IHRoaXMuZ2FsbGVyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgaW1hZ2VTY3JlZW5XaWR0aCA9ICh0aGlzLmlzU2xpZGVyVmVydGljYWwpID9cbiAgICAgICAgICAgICAgICBnYWxsZXJ5U2NyZWVuV2lkdGggLSB0aGlzLm9wdGlvbnMuY2Fyb3VzZWxPZmZzZXQgLSB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMud2lkdGggOlxuICAgICAgICAgICAgICAgIGdhbGxlcnlTY3JlZW5XaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgIGltYWdlU2NyZWVuV2lkdGggPSAodGhpcy5pc1NsaWRlclZlcnRpY2FsKSA/XG4gICAgICAgICAgICAgICAgZ2FsbGVyeVNjcmVlbldpZHRoIC0gdGhpcy5vcHRpb25zLmNhcm91c2VsT2Zmc2V0IC1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmluZGljYXRvclByb3BzLnNpemUgLSB0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc3BhY2luZyAqIDIgOlxuICAgICAgICAgICAgICAgIGdhbGxlcnlTY3JlZW5XaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGltYWdlU2NyZWVuV2lkdGggPSBnYWxsZXJ5U2NyZWVuV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJnYWxsZXJ5U2NyZWVuV2lkdGg6IFwiLCBnYWxsZXJ5U2NyZWVuV2lkdGgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcImltYWdlU2NyZWVuV2lkdGg6IFwiLCBpbWFnZVNjcmVlbldpZHRoKTtcbiAgICAgICAgcmV0dXJuIGltYWdlU2NyZWVuV2lkdGg7XG4gICAgfVxuICAgIGdldFBpaW9JbWFnZXMoKSB7XG4gICAgICAgIGNvbnN0IHBpaW9FbGVtZW50cyA9IHdpbmRvdy5waWlvLmdldFBpaW9FbGVtZW50cyh0aGlzLmltYWdlcyk7XG4gICAgICAgIHdpbmRvdy5waWlvLmdldFBpaW9JbWFnZXMocGlpb0VsZW1lbnRzLCB0aGlzLm9wdGlvbnMuem9vbVByb3BzLnJhdGlvKTtcbiAgICB9XG4gICAgLy8gR2V0IHRoZSBudW1iZXIgb2YgVGh1bWJuYWlscyBpbiBzaWdodFxuICAgIGdldFRodW1ic0luU2lnaHQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZ2V0Y2Fyb3VzZWxTbGlkZXJTY3JlZW5TaXplKCkgLyAodGhpcy50aHVtYkltYWdlU2l6ZSArIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5tYXJnaW4pKTtcbiAgICB9XG4gICAgLy8gTW92ZSBjYXJvdXNlbCBpZiBzZWxlY3RlZCBUaHVtYm5haWwgZ2V0cyBvdXQgb2Ygc2lnaHRcbiAgICBrZWVwVGh1bWJTZWxlY3RlZE9uU2lnaHQoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXJlQWxsVGh1bWJzSW5TaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVGh1bWJTaXplID0gdGhpcy5nYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlIC5pbWdUaHVtYi13cmFwcGVyXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBjYXJvdXNlbFNsaWRlclNpemUgPSB0aGlzLmNhcm91c2VsU2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoc2VsZWN0ZWRUaHVtYlNpemUucmlnaHQgPiBjYXJvdXNlbFNsaWRlclNpemUucmlnaHQgfHxcbiAgICAgICAgICAgIHNlbGVjdGVkVGh1bWJTaXplLmxlZnQgPCBjYXJvdXNlbFNsaWRlclNpemUubGVmdCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWRUaHVtYlNpemUudG9wIDwgY2Fyb3VzZWxTbGlkZXJTaXplLnRvcCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWRUaHVtYlNpemUuYm90dG9tID4gY2Fyb3VzZWxTbGlkZXJTaXplLmJvdHRvbSkge1xuICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgc2VsZWN0ZWRUaHVtYlNpemUud2lkdGgsIGluZGV4LCB0aGlzLmNhcm91c2VsU2xpZGVyLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luLCB0aGlzLmlzU2xpZGVyVmVydGljYWwpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZUNhcm91c2VsQnV0dG9uc18xLmRlZmF1bHQodGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0LCB0aGlzLmNhcm91c2VsLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyID0gaW5kZXg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgKGluZGV4ICsgdGhpcy50aHVtYnNJblNpZ2h0ICsgMSk7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMudGh1bWJJbWFnZXNbaV0sIHsgdHlwZTogXCJ0aHVtYm5haWxcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBMYXp5IGxvYWQgaW1hZ2VzXG4gICAgbG9hZEltYWdlKGltYWdlLCB7IHR5cGUgfSkge1xuICAgICAgICBpZiAoaW1hZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGh0bWxJbWFnZVNyYyA9IGltYWdlLmdldEF0dHJpYnV0ZShcInNyY1wiKTtcbiAgICAgICAgaWYgKGh0bWxJbWFnZVNyYyAhPT0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQVwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YUltYWdlU3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbWFnZVwiKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gZGF0YUltYWdlU3JjO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBpaW9Eb21haW5LZXkgJiYgd2luZG93LnBpaW8pIHtcbiAgICAgICAgICAgIHdpbmRvdy5waWlvLm9uTG9hZEltYWdlKGltYWdlLCBkYXRhSW1hZ2VTcmMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIExvYWQgVGh1bWJuYWlsIGltYWdlcyBpbiBzaWdodFxuICAgIGxvYWRUaHVtYm5haWxJbWFnZXNJblNpZ2h0KCkge1xuICAgICAgICB0aGlzLnRodW1iSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yfSAuaW1nVGh1bWItd3JhcHBlciBpbWdgKTtcbiAgICAgICAgdGhpcy50aHVtYnNJblNpZ2h0ID0gdGhpcy5nZXRUaHVtYnNJblNpZ2h0KCk7XG4gICAgICAgIGNvbnN0IHRodW1ic1RvTG9hZCA9ICh0aGlzLnRodW1ic0luU2lnaHQgPCB0aGlzLnRodW1iSW1hZ2VzLmxlbmd0aCkgP1xuICAgICAgICAgICAgdGhpcy50aHVtYnNJblNpZ2h0ICsgMSA6IHRoaXMudGh1bWJzSW5TaWdodDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aHVtYnNUb0xvYWQ7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy50aHVtYkltYWdlc1tpXSwgeyB0eXBlOiBcInRodW1ibmFpbFwiIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNldCBjYXJvdXNlbCBEaW1lbnNpb25zXG4gICAgc2V0Q2Fyb3VzZWxEaW1lbnNpb24oKSB7XG4gICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMuZ2V0Q2Fyb3VzZWxXcmFwcGVyRGltZW5zaW9uKCk7XG4gICAgICAgIGlmICh0aGlzLmlzU2xpZGVyVmVydGljYWwpIHtcbiAgICAgICAgICAgIC8vIFNldCBzbGlkZXIgaGVpZ2h0XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVyLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0fWA7XG4gICAgICAgICAgICAvLyBTZXQgd3JhcHBlciBkaW1lbnNpb25cbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnN0eWxlLmhlaWdodCA9IGAke2RpbWVuc2lvbn1weGA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTZXQgd3JhcHBlciBkaW1lbnNpb25cbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnN0eWxlLndpZHRoID0gYCR7ZGltZW5zaW9ufXB4YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXQgaW5kaWNhdG9ycyBEaW1lbnNpb25zXG4gICAgc2V0TmF2SW5kaWNhdG9yc0RpbWVuc2lvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkge1xuICAgICAgICAgICAgdGhpcy5uYXZJbmRpY2F0b3JzLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0fWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hdkluZGljYXRvcnMuc3R5bGUud2lkdGggPSBgJHt0aGlzLmdldE1haW5JbWFnZVdpZHRoKCl9cHhgO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNldCBzbGlkZXIgaW4gTWFpbiBTbGlkZXJcbiAgICBzZXRQb3NpdGlvbkJ5SW5kZXhJbk1haW5TbGlkZXIoaSkge1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPCB0aGlzLmltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW2ldLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFRyYW5zbGF0ZSA9IHRoaXMudGFyZ2V0SW5kZXggKiAtdGhpcy5pbWFnZVdpZHRoO1xuICAgICAgICB0aGlzLnByZXZUcmFuc2xhdGUgPSB0aGlzLmN1cnJlbnRUcmFuc2xhdGU7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmN1cnJlbnRcIik7XG4gICAgICAgIGNvbnN0IHRhcmdldFNsaWRlID0gZ2V0VGFyZ2V0RWxlbWVudF8xLmRlZmF1bHQoY3VycmVudFNsaWRlLCB0aGlzLnRhcmdldEluZGV4LCB0aGlzLm1haW5TbGlkZXMpO1xuICAgICAgICBtb3ZlTWFpblNsaWRlcl8xLmRlZmF1bHQodGhpcy5tYWluV3JhcHBlciwgY3VycmVudFNsaWRlLCB0YXJnZXRTbGlkZSwgdGhpcy50YXJnZXRJbmRleCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmNvbnRleHRNZW51LCB0aGlzLm9wZW5JbWFnZVRleHQpO1xuICAgICAgICAvLyBpZiBUaHVtYm5haWxzIGFyZSBlbmFibGVkIHVwZGF0ZSB0aHVtYm5haWxcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRodW1iID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFRodW1iID0gZ2V0VGFyZ2V0RWxlbWVudF8xLmRlZmF1bHQoY3VycmVudFRodW1iLCB0aGlzLnRhcmdldEluZGV4LCB0aGlzLmNhcm91c2VsU2xpZGVzKTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRUaHVtYkluZGV4ID0gdGhpcy5jYXJvdXNlbFNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHRhcmdldFRodW1iKTtcbiAgICAgICAgICAgIGNvbnN0IHRodW1iSW1hZ2VUb0xvYWQgPSAobmV4dFRodW1iSW5kZXggPCB0aGlzLmNhcm91c2VsU2xpZGVzLmxlbmd0aCAtIDEpID9cbiAgICAgICAgICAgICAgICBuZXh0VGh1bWJJbmRleCArIDEgOlxuICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQoY3VycmVudFRodW1iLCB0YXJnZXRUaHVtYiwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlclBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5rZWVwVGh1bWJTZWxlY3RlZE9uU2lnaHQodGhpcy50YXJnZXRJbmRleCk7XG4gICAgICAgICAgICB0aGlzLmxvYWRJbWFnZSh0aGlzLnRodW1iSW1hZ2VzW3RodW1iSW1hZ2VUb0xvYWRdLCB7IHR5cGU6IFwidGh1bWJuYWlsXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgSW5kaWNhdG9ycyBhcmUgZW5hYmxlZCB1cGRhdGUgaW5kaWNhdG9yXG4gICAgICAgIC8vIFVwZGF0ZSBpbmRpY2F0b3JzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGljYXRvciA9IHRoaXMubmF2SW5kaWNhdG9ycy5xdWVyeVNlbGVjdG9yKFwiIC5hY3RpdmVcIik7XG4gICAgICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gQXJyYXkuZnJvbSh0aGlzLm5hdkluZGljYXRvcnMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0SW5kaWNhdG9yID0gZ2V0VGFyZ2V0RWxlbWVudF8xLmRlZmF1bHQodGhpcy5jdXJyZW50SW5kaWNhdG9yLCB0aGlzLnRhcmdldEluZGV4LCBpbmRpY2F0b3JzKTtcbiAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQodGhpcy5jdXJyZW50SW5kaWNhdG9yLCB0YXJnZXRJbmRpY2F0b3IsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZFN0eWxlLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRCb3JkZXJQb3NpdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXQgbWFpbiBpbWFnZSBzaXplXG4gICAgc2V0U2xpZGVyRGltZW5zaW9ucygpIHtcbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoID0gdGhpcy5nZXRNYWluSW1hZ2VXaWR0aCgpO1xuICAgICAgICAvLyBzZXQgaW1hZ2UgYW5kIHdyYXBwZXIgaGVpZ2h0XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvID09PSBcInN0cmluZ1wiICYmIHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpby5pbmNsdWRlcyhcIjpcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpby5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmltYWdlV2lkdGggLyBwYXJzZUludChmaWVsZHNbMF0sIDEwKSAqIHBhcnNlSW50KGZpZWxkc1sxXSwgMTApO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8gPT09IFwib2JqZWN0XCIgJiYgdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3RoaXMub3B0aW9ucy5hc3BlY3RSYXRpby5oZWlnaHR9cHhgO1xuICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8uaGVpZ2h0fXB4YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5pbWFnZVdpZHRofXB4YDtcbiAgICAgICAgICAgIHRoaXMubWFpbldyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5pbWFnZVdpZHRofXB4YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgaW1hZ2Ugd2lkdGhcbiAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke3RoaXMuaW1hZ2VXaWR0aH1weGA7XG4gICAgICAgIC8vIHNldCB3cmFwcGVyIHdpZHRoXG4gICAgICAgIHRoaXMubWFpbldyYXBwZXIuc3R5bGUud2lkdGggPSBgJHt0aGlzLmltYWdlV2lkdGggKiB0aGlzLm1haW5TbGlkZXMubGVuZ3RofXB4YDtcbiAgICB9XG4gICAgLy8gU2V0IFpvb20gdHlwZVxuICAgIHNldFpvb20oKSB7XG4gICAgICAgIGlmICghdGhpcy56b29tRGl2KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoID0gdGhpcy5nZXRNYWluSW1hZ2VXaWR0aCgpO1xuICAgICAgICAvLyBBZGQgem9vbSBwb2ludGVyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuem9vbVByb3BzLnR5cGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLnN0eWxlLmN1cnNvciA9IFwiem9vbS1pblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSBcImdyYWJcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBQb3B1cCB6b29tXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPXBvcHVwXVwiKSkge1xuICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEltYWdlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuY3VycmVudCBpbWdcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGAke2N1cnJlbnRJbWFnZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWltYWdlXCIpfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIgLnBvcHVwLWltYWdlXCIpLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEZseW91dCB6b29tXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgW2RhdGEtem9vbT1mbHlvdXRdXCIpXG4gICAgICAgICAgICAmJiB0aGlzLmRldmljZVdpZHRoID49IDk5Mikge1xuICAgICAgICAgICAgdGhpcy5pc0ZseW91dFZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIFNldCBmbHlvdXQgZGltZW5zaW9uXG4gICAgICAgICAgICB0aGlzLnNldFpvb21EaXZEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIC8vIFNldCBmbHlvdXQgcG9zaXRpb25cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuem9vbVByb3BzLnBvc2l0aW9uID09PSBcImxlZnRcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5sZWZ0ID0gYC0ke3RoaXMuaW1hZ2VXaWR0aH1weGA7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy5wb3NpdGlvbiA9PT0gXCJ0b3BcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5sZWZ0ID0gYDBweGA7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnRvcCA9IGAtJHt0aGlzLmltYWdlSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMucG9zaXRpb24gPT09IFwiYm90dG9tXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUubGVmdCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS50b3AgPSBgJHt0aGlzLmltYWdlSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5pbWFnZVdpZHRofXB4YDtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUudG9wID0gYDBweGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdmVyXCIsIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuZmx5b3V0SGFuZGxlciwgZmFsc2UpO1xuICAgICAgICAgICAgLy8gRGlzYWJsZSB6b29tIGlmIGNsaWNrZWQgb3V0c2lkZVxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2xpY2tJbnNpZGUgPSB0aGlzLm1haW5Db250YWluZXIuY29udGFpbnModGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGUgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIGlmICghaXNDbGlja0luc2lkZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPWZseW91dF1cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNGbHlvdXRWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRmx5b3V0VmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoXCJmbHlvdXQtb3BlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuZmx5b3V0Wm9vbSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFpvb20gaW5saW5lXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy50eXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgLy8gU2V0IGlubGluZSBkaW1lbnNpb25cbiAgICAgICAgICAgIHRoaXMuc2V0Wm9vbURpdkRpbWVuc2lvbigpO1xuICAgICAgICAgICAgLy8gU2V0IGlubGluZSBwb3NpdGlvblxuICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmxlZnQgPSBgMHB4YDtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS50b3AgPSBgMHB4YDtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS56SW5kZXggPSBgMWA7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdmVyXCIsIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaW5saW5lRW50ZXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaW5saW5lTGVhdmVIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIHpvb20gaWYgY2xpY2tlZCBvdXRzaWRlXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNDbGlja0luc2lkZSA9IHRoaXMubWFpbkNvbnRhaW5lci5jb250YWlucyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmN1cnJlbnRcIik7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0NsaWNrSW5zaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuem9vbVByb3BzLnR5cGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUuY2xhc3NMaXN0LnJlbW92ZShcImlubGluZS1vcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1bnNldGA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLmlubGluZVpvb20sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIExBVU5DSCBHQUxMRVJZXG4gICAgbGF1bmNoR2FsbGVyeSgpIHtcbiAgICAgICAgdGhpcy5tYWluU2xpZGVzID0gQXJyYXkuZnJvbSh0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIgW2RhdGEtZ2FsbGVyeV1cIikpO1xuICAgICAgICAvLyBTZXQgdmVydGljYWwgdmFyaWFibGUgYWNvcnJkaW5nIHRvIGNhcm91c2VsUG9zaXRpb25cbiAgICAgICAgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFBvc2l0aW9uID09PSBcImxlZnRcIiB8fCB0aGlzLm9wdGlvbnMuY2Fyb3VzZWxQb3NpdGlvbiA9PT0gXCJyaWdodFwiKVxuICAgICAgICAgICAgPyB0aGlzLmlzU2xpZGVyVmVydGljYWwgPSB0cnVlIDogdGhpcy5pc1NsaWRlclZlcnRpY2FsID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW1hZ2VXaWR0aCA9IHRoaXMuZ2V0TWFpbkltYWdlV2lkdGgoKTtcbiAgICAgICAgdGhpcy5zZXRTbGlkZXJEaW1lbnNpb25zKCk7XG4gICAgICAgIC8vIFNldCBIb3ZlciBhbmQgRm9jdXMgY29sb3JzIGFjY29yZGluZyB0byB0aGUgdGhlbWVQcm9wcy5iYWNrZ3JvdW5kIHBpY2tlZC5cbiAgICAgICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gdGhpcy5vcHRpb25zLnRoZW1lUHJvcHMuYmFja2dyb3VuZDtcbiAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvci5pbmNsdWRlcyhcImhzbFwiKSB8fCBiYWNrZ3JvdW5kQ29sb3IuaW5jbHVkZXMoXCJoc2xhXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvcldpdGhvdXRTcGFjZXMgPSBiYWNrZ3JvdW5kQ29sb3Iuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgY29uc3QgaHNsTHVtaW5vc2l0eSA9IHBhcnNlSW50KGNvbG9yV2l0aG91dFNwYWNlc1syXS5zcGxpdChcIiVcIilbMF0sIDEwKTtcbiAgICAgICAgICAgIGlmIChoc2xMdW1pbm9zaXR5ID49IDUwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvci5pbmNsdWRlcyhcImhzbGFcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlckJhY2tncm91bmRDb2xvciA9IGAke2NvbG9yV2l0aG91dFNwYWNlc1swXX0sJHtjb2xvcldpdGhvdXRTcGFjZXNbMV19LCAke2hzbEx1bWlub3NpdHkgLSAyMH0lLCR7Y29sb3JXaXRob3V0U3BhY2VzWzNdfWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNCYWNrZ3JvdW5kQ29sb3IgPSBgJHtjb2xvcldpdGhvdXRTcGFjZXNbMF19LCR7Y29sb3JXaXRob3V0U3BhY2VzWzFdfSwgJHtoc2xMdW1pbm9zaXR5IC0gMzB9JSwke2NvbG9yV2l0aG91dFNwYWNlc1szXX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlckJhY2tncm91bmRDb2xvciA9IGAke2NvbG9yV2l0aG91dFNwYWNlc1swXX0sJHtjb2xvcldpdGhvdXRTcGFjZXNbMV19LCAke2hzbEx1bWlub3NpdHkgLSAyMH0lKWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNCYWNrZ3JvdW5kQ29sb3IgPSBgJHtjb2xvcldpdGhvdXRTcGFjZXNbMF19LCR7Y29sb3JXaXRob3V0U3BhY2VzWzFdfSwgJHtoc2xMdW1pbm9zaXR5IC0gMzB9JSlgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IuaW5jbHVkZXMoXCJoc2xhXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJCYWNrZ3JvdW5kQ29sb3IgPSBgJHtjb2xvcldpdGhvdXRTcGFjZXNbMF19LCR7Y29sb3JXaXRob3V0U3BhY2VzWzFdfSwgJHtoc2xMdW1pbm9zaXR5ICsgMjB9JSwke2NvbG9yV2l0aG91dFNwYWNlc1szXX1gO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzQmFja2dyb3VuZENvbG9yID0gYCR7Y29sb3JXaXRob3V0U3BhY2VzWzBdfSwke2NvbG9yV2l0aG91dFNwYWNlc1sxXX0sICR7aHNsTHVtaW5vc2l0eSArIDEwfSUsJHtjb2xvcldpdGhvdXRTcGFjZXNbM119YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJCYWNrZ3JvdW5kQ29sb3IgPSBgJHtjb2xvcldpdGhvdXRTcGFjZXNbMF19LCR7Y29sb3JXaXRob3V0U3BhY2VzWzFdfSwgJHtoc2xMdW1pbm9zaXR5ICsgMjB9JSlgO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzQmFja2dyb3VuZENvbG9yID0gYCR7Y29sb3JXaXRob3V0U3BhY2VzWzBdfSwke2NvbG9yV2l0aG91dFNwYWNlc1sxXX0sICR7aHNsTHVtaW5vc2l0eSArIDEwfSUpYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IFRoZW1lIENvbG9yc1xuICAgICAgICBjb25zdCBzZWxlY3RvclN0eWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yKTtcbiAgICAgICAgc2VsZWN0b3JTdHlsZS5zdHlsZS5zZXRQcm9wZXJ0eShgLS1tYWluLWNvbG9yYCwgdGhpcy5vcHRpb25zLnRoZW1lUHJvcHMuY29sb3IpO1xuICAgICAgICBzZWxlY3RvclN0eWxlLnN0eWxlLnNldFByb3BlcnR5KGAtLWJnLWNvbG9yYCwgdGhpcy5vcHRpb25zLnRoZW1lUHJvcHMuYmFja2dyb3VuZCk7XG4gICAgICAgIHNlbGVjdG9yU3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoYC0tYmctaG92ZXItY29sb3JgLCB0aGlzLmhvdmVyQmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgc2VsZWN0b3JTdHlsZS5zdHlsZS5zZXRQcm9wZXJ0eShgLS1iZy1mb2N1cy1jb2xvcmAsIHRoaXMuZm9jdXNCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAvLyBSaWdodCBjbGljayBtZW51XG4gICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5vbmNvbnRleHRtZW51ID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlWCA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlWSA9IGUuY2xpZW50WTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuc3R5bGUudG9wID0gYCR7bW91c2VZfXB4YDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuc3R5bGUubGVmdCA9IGAke21vdXNlWH1weGA7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xuICAgICAgICB9O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQub2Zmc2V0UGFyZW50ICE9PSB0aGlzLmNvbnRleHRNZW51KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudS5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFNldCByaWdodCBjbGljayBtZW51IHRleHQgY29udGVudFxuICAgICAgICBjb25zdCBuYXZpZ2F0b3JMYW5ndWFnZSA9IG5hdmlnYXRvci5sYW5ndWFnZS5zcGxpdChcIi1cIik7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gbmF2aWdhdG9yTGFuZ3VhZ2Uuc2hpZnQoKTtcbiAgICAgICAgY29uc3QgY291bnRyeSA9IG5hdmlnYXRvckxhbmd1YWdlLnBvcCgpO1xuICAgICAgICBpZiAobGFuZ3VhZ2VzX2pzb25fMS5kZWZhdWx0W2xhbmd1YWdlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBqc29uTGFuZ3VhZ2UgPSBsYW5ndWFnZXNfanNvbl8xLmRlZmF1bHRbbGFuZ3VhZ2VdO1xuICAgICAgICAgICAgaWYgKGNvdW50cnkgIT09IHVuZGVmaW5lZCAmJiBqc29uTGFuZ3VhZ2UuaGFzT3duUHJvcGVydHkoY291bnRyeSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5JbWFnZVRleHQgPSBqc29uTGFuZ3VhZ2VbY291bnRyeV0uT3BlbkltYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBPYmplY3Qua2V5cyhqc29uTGFuZ3VhZ2UpWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkltYWdlVGV4dCA9IGpzb25MYW5ndWFnZVtmaXJzdF0uT3BlbkltYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcGVuSW1hZ2VUZXh0ID0gbGFuZ3VhZ2VzX2pzb25fMS5kZWZhdWx0LmVuLlVTLk9wZW5JbWFnZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgcmlnaHQgY2xpY2sgbWVudSBmaXJzdCBpbWFnZSB1cmxcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxVUkwgPSB0aGlzLmltYWdlc1swXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWltYWdlXCIpO1xuICAgICAgICAvLyBDcmVhdGUgYW5jaG9yIHRhZ1xuICAgICAgICBjb25zdCBhbmNob3J0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgYW5jaG9ydGFnLmNsYXNzTGlzdC5hZGQoXCJpdGVtXCIpO1xuICAgICAgICBhbmNob3J0YWcuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuICAgICAgICBhbmNob3J0YWcuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwibm9vcGVuZXIgbm9yZWZlcnJlclwiKTtcbiAgICAgICAgYW5jaG9ydGFnLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgb3JpZ2luYWxVUkwpO1xuICAgICAgICBhbmNob3J0YWcuY2xhc3NMaXN0LmFkZChcIml0ZW1cIik7XG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLm9wZW5JbWFnZVRleHQpO1xuICAgICAgICAvLyBBcHBlbmQgaXQgdG8gaXQncyBwYXJlbnRcbiAgICAgICAgYW5jaG9ydGFnLmFwcGVuZENoaWxkKHRleHQpO1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51LmFwcGVuZENoaWxkKGFuY2hvcnRhZyk7XG4gICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyID0gMDtcbiAgICAgICAgLy8gTUFJTiBOQVZJR0FUSU9OIEJVVFRPTlNcbiAgICAgICAgLy8gSWYgTmF2aWdhdGlvbiBCdXR0b25zIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYWluTmF2aWdhdGlvbiAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIC8vIFNldCBtYWluIGJ1dHRvbiBzdHlsZXNcbiAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uY2xhc3NMaXN0LmFkZChgYnRuLW1haW4tJHt0aGlzLm9wdGlvbnMubWFpbk5hdmlnYXRpb259YCk7XG4gICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLmNsYXNzTGlzdC5hZGQoYGJ0bi1tYWluLSR7dGhpcy5vcHRpb25zLm1haW5OYXZpZ2F0aW9ufWApO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgTWFpbiBCdXR0b25zIG11c3QgYmUgZGlzYWJsZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm1haW5TbGlkZXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByZWxvYWQgSW1hZ2VcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVByZXZNYWluSW1hZ2VMb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZTbGlkZSA9IGN1cnJlbnRTbGlkZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZJbmRleCA9IHRoaXMubWFpblNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHByZXZTbGlkZSk7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbcHJldkluZGV4XSwgeyB0eXBlOiBcIm1haW5cIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gUHJldmlvdXMgTWFpbiBCdXR0b25cbiAgICAgICAgICAgIC8vIFByZWxvYWQgaW1hZ2VcbiAgICAgICAgICAgIGlmICh3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm92ZXJcIiwgaGFuZGxlUHJldk1haW5JbWFnZUxvYWQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlUHJldk1haW5JbWFnZUxvYWQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaGFuZGxlUHJldk1haW5JbWFnZUxvYWQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9uIGNsaWNrIGJlaGF2aW91clxuICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGUgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZTbGlkZSA9IGN1cnJlbnRTbGlkZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZJbmRleCA9IHRoaXMubWFpblNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHByZXZTbGlkZSk7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbcHJldkluZGV4XSwgeyB0eXBlOiBcIm1haW5cIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbW92ZU1haW5TbGlkZXJfMS5kZWZhdWx0KHRoaXMubWFpbldyYXBwZXIsIGN1cnJlbnRTbGlkZSwgcHJldlNsaWRlLCBwcmV2SW5kZXgsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5jb250ZXh0TWVudSwgdGhpcy5vcGVuSW1hZ2VUZXh0KTtcbiAgICAgICAgICAgICAgICBkaXNhYmxlTWFpbkJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMubWFpblNsaWRlcywgdGhpcy5wcmV2TWFpbkJ1dHRvbiwgdGhpcy5uZXh0TWFpbkJ1dHRvbiwgcHJldkluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJmYWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFkZUluXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwic2xpZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZV8xLmRlZmF1bHQodGhpcy5nYWxsZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gWm9vbSBpbmxpbmVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5pbmxpbmUtb3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImlubGluZS1vcGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgVGh1bWJuYWlsc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJ0aHVtYm5haWxzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRodW1iID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2VGh1bWIgPSBjdXJyZW50VGh1bWIucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEuZGVmYXVsdChjdXJyZW50VGh1bWIsIHByZXZUaHVtYiwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlclBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtlZXBUaHVtYlNlbGVjdGVkT25TaWdodChwcmV2SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kaWNhdG9yID0gdGhpcy5uYXZJbmRpY2F0b3JzLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2SW5kaWNhdG9yID0gdGhpcy5jdXJyZW50SW5kaWNhdG9yLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQodGhpcy5jdXJyZW50SW5kaWNhdG9yLCB0aGlzLnByZXZJbmRpY2F0b3IsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZFN0eWxlLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRCb3JkZXJQb3NpdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZU5leHRNYWluSW1hZ2VMb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFNsaWRlID0gdGhpcy5jdXJyZW50U2xpZGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dEluZGV4ID0gdGhpcy5tYWluU2xpZGVzLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gdGhpcy5uZXh0U2xpZGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5leHRJbmRleCA8IHRoaXMuaW1hZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRJbWFnZSh0aGlzLmltYWdlc1t0aGlzLm5leHRJbmRleF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIE5leHQgQnV0dG9uXG4gICAgICAgICAgICBpZiAod2luZG93LlBvaW50ZXJFdmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dE1haW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdmVyXCIsIGhhbmRsZU5leHRNYWluSW1hZ2VMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZU5leHRNYWluSW1hZ2VMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhhbmRsZU5leHRNYWluSW1hZ2VMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmN1cnJlbnRcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFNsaWRlID0gY3VycmVudFNsaWRlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRJbmRleCA9IHRoaXMubWFpblNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IG5leHRTbGlkZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmV4dEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRJbWFnZSh0aGlzLmltYWdlc1t0aGlzLm5leHRJbmRleF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIG5leHRTbGlkZSwgdGhpcy5uZXh0SW5kZXgsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5jb250ZXh0TWVudSwgdGhpcy5vcGVuSW1hZ2VUZXh0KTtcbiAgICAgICAgICAgICAgICBkaXNhYmxlTWFpbkJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMubWFpblNsaWRlcywgdGhpcy5wcmV2TWFpbkJ1dHRvbiwgdGhpcy5uZXh0TWFpbkJ1dHRvbiwgdGhpcy5uZXh0SW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb25zXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcImZhZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBmYWRlSW5fMS5kZWZhdWx0KHRoaXMuZ2FsbGVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBab29tIGlubGluZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmlubGluZS1vcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlLmNsYXNzTGlzdC50b2dnbGUoXCJpbmxpbmUtb3BlblwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1bnNldGA7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFRodW1ibmFpbHNcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaHVtYiA9IHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFRodW1iID0gY3VycmVudFRodW1iLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJzQXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVcIikpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGh1bWJJbmRleCA9IHRodW1ic0FycmF5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gbmV4dFRodW1iKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJJbWFnZVRvTG9hZCA9IChuZXh0VGh1bWJJbmRleCA8IHRodW1ic0FycmF5Lmxlbmd0aCAtIDEpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRUaHVtYkluZGV4ICsgMSA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHVtYnNBcnJheS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVOYXZFbGVtU2VsZWN0ZWRfMS5kZWZhdWx0KGN1cnJlbnRUaHVtYiwgbmV4dFRodW1iLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2VlcFRodW1iU2VsZWN0ZWRPblNpZ2h0KHRoaXMubmV4dEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy50aHVtYkltYWdlc1t0aHVtYkltYWdlVG9Mb2FkXSwgeyB0eXBlOiBcInRodW1ibmFpbFwiIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kaWNhdG9yID0gdGhpcy5uYXZJbmRpY2F0b3JzLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dERvdCA9IHRoaXMuY3VycmVudEluZGljYXRvci5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQodGhpcy5jdXJyZW50SW5kaWNhdG9yLCBuZXh0RG90LCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9VQ0ggJiBNT1VTRSBFVkVOVFMgTUFJTiBHQUxMRVJZXG4gICAgICAgIC8vICBSZW1vdmUgZHJhZyBiZWhhdmlvdXJcbiAgICAgICAgdGhpcy5nYWxsZXJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudFRyYW5zbGF0ZSA9IDA7XG4gICAgICAgIHRoaXMucHJldlRyYW5zbGF0ZSA9IDA7XG4gICAgICAgIHRoaXMudGFyZ2V0SW5kZXggPSAwO1xuICAgICAgICBmdW5jdGlvbiBnZXRwb3NpdGlvblgoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUudHlwZS5pbmNsdWRlcyhcInRvdWNoXCIpID8gZS50b3VjaGVzWzBdLmNsaWVudFggOiBlLnBhZ2VYO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldHBvc2l0aW9uWShlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS50eXBlLmluY2x1ZGVzKFwidG91Y2hcIikgPyBlLnRvdWNoZXNbMF0uY2xpZW50WSA6IGUucGFnZVk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2VzdHVyZVN0YXJ0ID0gKGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFBvc2l0aW9uID0gZ2V0cG9zaXRpb25YKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNYWluU2xpZGVyU3dpcGluZyA9IHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBnZXN0dXJlTW92ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01haW5TbGlkZXJTd2lwaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gZ2V0cG9zaXRpb25YKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRyYW5zbGF0ZSA9IHRoaXMucHJldlRyYW5zbGF0ZSArIGN1cnJlbnRQb3NpdGlvbiAtIHRoaXMuc3RhcnRQb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZ2VzdHVyZUVuZCA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW5kUG9zaXRpb24gPSBnZXRwb3NpdGlvblgoZXYpO1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIFtkYXRhLXpvb209Zmx5b3V0XVwiKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlV2lkdGggPCA5OTIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmlubGluZS1vcGVuXCIpIHx8XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgW2RhdGEtem9vbT1pbmxpbmVdXCIpICYmXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5pbmxpbmUtb3BlblwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPWZseW91dF1cIilcbiAgICAgICAgICAgICAgICAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuZmx5b3V0LW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZW5kUG9zaXRpb24gLSB0aGlzLnN0YXJ0UG9zaXRpb24pID49IDEwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYXNDdXJzb3JNb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGljayBvbiBtb3VzZXVwIGZvciBpbmxpbmUgYW5kIGZseW91dCB6b29tXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIFtkYXRhLXpvb209aW5saW5lXVwiKSB8fFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPWZseW91dF1cIikgfHxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgW2RhdGEtem9vbT1wb3B1cF1cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cubWF0Y2hNZWRpYShcIihwb2ludGVyOiBjb2Fyc2UpXCIpLm1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYXB0dXJlQ2xpY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhcHR1cmVDbGljaywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQWRkIHNsaWRlIGVmZmVjdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgU2xpZGVyIFBvc2l0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgbW92ZWRCeSA9IHRoaXMuY3VycmVudFRyYW5zbGF0ZSAtIHRoaXMucHJldlRyYW5zbGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAobW92ZWRCeSA8IC0xMCAmJiB0aGlzLnRhcmdldEluZGV4IDwgdGhpcy5tYWluU2xpZGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobW92ZWRCeSA+IDEwICYmIHRoaXMudGFyZ2V0SW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0SW5kZXggLT0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbkJ5SW5kZXhJbk1haW5TbGlkZXIodGhpcy50YXJnZXRJbmRleCk7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGZhZGUgZWZmZWN0XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcImZhZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBmYWRlSW5fMS5kZWZhdWx0KHRoaXMuZ2FsbGVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmIE5hdmlnYXRpb24gYnV0dG9ucyBhcmUgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWFpbk5hdmlnYXRpb24gIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVNYWluQnV0dG9uc18xLmRlZmF1bHQodGhpcy5tYWluU2xpZGVzLCB0aGlzLnByZXZNYWluQnV0dG9uLCB0aGlzLm5leHRNYWluQnV0dG9uLCB0aGlzLnRhcmdldEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0N1cnNvck1vdmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTWFpblNsaWRlclN3aXBpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYWluU2xpZGVzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZHJhZyBiZWhhdmlvdXIgZm9yIG1haW5TbGlkZXNcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBsaW5rIGRlZmF1bHQgYmVoYXZpb3VyIHdoZW4gc3dpcGluZ1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIGAgW2RhdGEtZ2FsbGVyeV0gYWApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yVGFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICsgYCBbZGF0YS1nYWxsZXJ5PWl0ZW0tJHtpbmRleH1dIGFgKTtcbiAgICAgICAgICAgICAgICBpZiAoYW5jaG9yVGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclRhZy5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzQ3Vyc29yTW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIHRvdWNoIGV2ZW50c1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBnZXN0dXJlU3RhcnQoaW5kZXgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgZ2VzdHVyZU1vdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgZ2VzdHVyZUVuZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIiwgZ2VzdHVyZUVuZCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hkb3duXCIsIGdlc3R1cmVTdGFydChpbmRleCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgZ2VzdHVyZU1vdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHVwXCIsIGdlc3R1cmVFbmQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLCBnZXN0dXJlRW5kLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGdlc3R1cmVTdGFydChpbmRleCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZ2VzdHVyZU1vdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGdlc3R1cmVFbmQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFpPT01cbiAgICAgICAgdGhpcy5zZXRab29tKCk7XG4gICAgICAgIC8vIENBUk9VU0VMIE5BVklHQVRJT05cbiAgICAgICAgLy8gU2V0IHRodW1uYWlscyBhbmQgaW5kaWNhdG9ycyBwb3NpdGlvblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiIHx8IHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcImluZGljYXRvcnNcIikge1xuICAgICAgICAgICAgLy8gU2V0IGNhcm91c2VsIG9yIGluZGljYXRvcnMgUG9zaXRpb25cbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2xpZGVyVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlci5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIiA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2SW5kaWNhdG9ycy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsT2Zmc2V0LnN0eWxlLndpZHRoID0gYCR7dGhpcy5vcHRpb25zLmNhcm91c2VsT2Zmc2V0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHRoaXMub3B0aW9ucy5jYXJvdXNlbFBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsT2Zmc2V0LnN0eWxlLmhlaWdodCA9IGAke3RoaXMub3B0aW9ucy5jYXJvdXNlbE9mZnNldH1weGA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSUYgQ0FST1VTRUwgSVMgVEhVTUJOQUlMU1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiKSB7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVzID0gQXJyYXkuZnJvbSh0aGlzLmNhcm91c2VsV3JhcHBlci5jaGlsZHJlbik7XG4gICAgICAgICAgICBjb25zdCBjYXJvdXNlbEltYWdlc1dyYXBwZXJzID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZSAuaW1nVGh1bWItd3JhcHBlclwiKTtcbiAgICAgICAgICAgIC8vIFNldCB0aHVtYm5haWxzIHNsaWRlIGFuZCBpbWcgZGltZW5zaW9uc1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlVGh1bWJXcmFwcGVyID0gY2Fyb3VzZWxJbWFnZXNXcmFwcGVyc1tpbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVzVGh1bWJzID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZVRodW1iID0gc2xpZGVzVGh1bWJzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpbWFnZVRodW1iV3JhcHBlci5zdHlsZS53aWR0aCA9IGAke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy53aWR0aH1weGA7XG4gICAgICAgICAgICAgICAgaW1hZ2VUaHVtYldyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLmhlaWdodH1weGA7XG4gICAgICAgICAgICAgICAgc2xpZGVUaHVtYi5zdHlsZS5oZWlnaHQgPSB0aGlzLmlzU2xpZGVyVmVydGljYWwgPyBgJHt0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuaGVpZ2h0ICsgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm1hcmdpbn1weGAgOiBgJHt0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuaGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2V0IHRodW1ibmFpbCBzaXplIGFjb3JkaW5nIHRvIHRoZSBjYXJvdXNlbCBwb3NpdGlvblxuICAgICAgICAgICAgdGhpcy50aHVtYkltYWdlU2l6ZSA9ICh0aGlzLmlzU2xpZGVyVmVydGljYWwpID9cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuaGVpZ2h0IDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMud2lkdGg7XG4gICAgICAgICAgICAvLyBTZXQgc2xpZGUgc2l6ZSBhY29yZGluZyB0byB0aGUgY2Fyb3VzZWwgcG9zaXRpb25cbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZVNpemUgPSB0aGlzLnRodW1iSW1hZ2VTaXplICsgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm1hcmdpbjtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2Fyb3VzZWxEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIC8vIFVzZSBwaWlvIGlmIGVuYWJsZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGlpb0RvbWFpbktleSAmJiB3aW5kb3cucGlpbykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGlpb0ltYWdlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTG9hZCBjYXJvdXNlbCB0aHVtYm5haWwgaW1hZ2VzIGluIHNpZ2h0LlxuICAgICAgICAgICAgdGhpcy5sb2FkVGh1bWJuYWlsSW1hZ2VzSW5TaWdodCgpO1xuICAgICAgICAgICAgLy8gU2V0IFRodW1iIEJvcmRlciBXaWR0aFxuICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LnN0eWxlLnNldFByb3BlcnR5KFwiLS10aHVtYkJvcmRlcldpZHRoXCIsIGAke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlcldpZHRofXB4YCk7XG4gICAgICAgICAgICAvLyBTZXQgZmlyc3QgdGh1bWJuYWlsIHNlbGVjdGVkIHN0eWxlXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUaHVtYiA9IHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0V3JhcHBlciA9IGFjdGl2ZVRodW1iLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nVGh1bWItd3JhcHBlclwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSA9PT0gXCJib3JkZXJcIikge1xuICAgICAgICAgICAgICAgIHRhcmdldFdyYXBwZXIuY2xhc3NMaXN0LmFkZChgYm9yZGVyLSR7dGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG93bmxvYWQgbWFpbiBpbWFnZSB3aGVuIHRodW1ibmFpbCBob3ZlclxuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGh1bWIgPSB0YXJnZXQuY2xvc2VzdChcIi5zbGlkZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFRodW1iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IHRoaXMuY2Fyb3VzZWxTbGlkZXMuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09PSB0YXJnZXRUaHVtYik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbdGhpcy50YXJnZXRJbmRleF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEdldCBjYXJvdXNlbCBzbGlkZXIgc2NyZWVuIHNpemVcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXJTY3JlZW5TaXplID0gdGhpcy5nZXRjYXJvdXNlbFNsaWRlclNjcmVlblNpemUoKTtcbiAgICAgICAgICAgIC8vIERldGVjdCBpZiBhbGwgdGh1bWIgaW1hZ2VzIGFyZSBpbiBzaWdodFxuICAgICAgICAgICAgY29uc3QgYWxsVGh1bWJzV2lkdGggPSB0aGlzLmdldENhcm91c2VsV3JhcHBlckRpbWVuc2lvbigpO1xuICAgICAgICAgICAgaWYgKGFsbFRodW1ic1dpZHRoIDwgdGhpcy5jYXJvdXNlbFNsaWRlclNjcmVlblNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFyZUFsbFRodW1ic0luU2lnaHQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2V0IGltYWdlIHdoZW4gdGh1bWJuYWlsIGNsaWNrZWRcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuaW5saW5lLW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5pbmxpbmUtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuZmx5b3V0LW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZmx5b3V0LW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFRodW1iID0gdGFyZ2V0LmNsb3Nlc3QoXCIuc2xpZGVcIik7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRUaHVtYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaHVtYiA9IHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gdGhpcy5jYXJvdXNlbFNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHRhcmdldFRodW1iKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTbGlkZSA9IHRoaXMubWFpblNsaWRlc1t0aGlzLnRhcmdldEluZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRJbWFnZSh0aGlzLnRodW1iSW1hZ2VzW3RoaXMudGFyZ2V0SW5kZXggKyAxXSwgeyB0eXBlOiBcInRodW1ibmFpbFwiIH0pO1xuICAgICAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCB0aGlzLmN1cnJlbnRTbGlkZSwgdGFyZ2V0U2xpZGUsIHRoaXMudGFyZ2V0SW5kZXgsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5jb250ZXh0TWVudSwgdGhpcy5vcGVuSW1hZ2VUZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1haW5OYXZpZ2F0aW9uICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTWFpbkJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMubWFpblNsaWRlcywgdGhpcy5wcmV2TWFpbkJ1dHRvbiwgdGhpcy5uZXh0TWFpbkJ1dHRvbiwgdGhpcy50YXJnZXRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQoY3VycmVudFRodW1iLCB0YXJnZXRUaHVtYiwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlclBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJmYWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFkZUluXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwic2xpZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZV8xLmRlZmF1bHQodGhpcy5nYWxsZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVRodW1iTG9hZEltYWdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkVGh1bWJzID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChgaW1nOm5vdChbc3JjKj1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBXCJdKWApO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRlZFRodW1icy5sZW5ndGggPD0gdGhpcy50aHVtYkltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy50aHVtYkltYWdlc1t0aGlzLmxvYWRlZFRodW1icy5sZW5ndGhdLCB7IHR5cGU6IFwidGh1bWJuYWlsXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFNldCB0aHVtYm5haWxzIGJ1dHRvbiBzdHlsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgIC8vIENhcm91c2VsIEJ1dHRvbnNcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZDYXJvdXNlbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGBidG4tY2Fyb3VzZWwtJHt0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlfWApO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoYGJ0bi1jYXJvdXNlbC0ke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGV9YCk7XG4gICAgICAgICAgICAgICAgLy8gVHJhbnNmb3JtIENhcm91c2VsIEJ1dHRvbnMgU3R5bGUgaWYgaXNTbGlkZXJWZXJ0aWNhbFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzU2xpZGVyVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IFwiY2lyY2xlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IFwicmFkaXVzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgyNSUpIHJvdGF0ZSg5MGRlZylcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwidG9wIGxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWxCdXR0b24uc3R5bGUubGVmdCA9IGA1MCVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUudG9wID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLnN0eWxlLmJvdHRvbSA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUucmlnaHQgPSBgNTAlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtMjUlKSByb3RhdGUoOTBkZWcpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcInJpZ2h0IGJvdHRvbVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IFwic3F1YXJlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCg1MCUpIHJvdGF0ZSg5MGRlZylcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwidG9wIGxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWxCdXR0b24uc3R5bGUubGVmdCA9IGA1MCVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUudG9wID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLnN0eWxlLmJvdHRvbSA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUucmlnaHQgPSBgNTAlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtNTAlKSByb3RhdGUoOTBkZWcpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcInJpZ2h0IGJvdHRvbVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldkFycm93ID0gdGhpcy5wcmV2Q2Fyb3VzZWxCdXR0b24ucXVlcnlTZWxlY3RvcihcIiBzdmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0QXJyb3cgPSB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5xdWVyeVNlbGVjdG9yKFwiIHN2Z1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLmhlaWdodCA9IGAyNHB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWxCdXR0b24uc3R5bGUudHJhbnNmb3JtID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLndpZHRoID0gYDEwMCVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkFycm93LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKDkwZGVnKVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUuaGVpZ2h0ID0gYDI0cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUud2lkdGggPSBgMTAwJWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5zdHlsZS50b3AgPSBgdW5zZXRgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUudHJhbnNmb3JtID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLnN0eWxlLmJvdHRvbSA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEFycm93LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKDkwZGVnKVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIEJ1dHRvbnMgbXVzdCBiZSBkaXNhYmxlZCB3aGVuIGxvYWRpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJvdXNlbFdyYXBwZXJTaXplID0gKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkgP1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aGlzLmNhcm91c2VsV3JhcHBlci5zdHlsZS5oZWlnaHQsIDEwKSA6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnN0eWxlLndpZHRoLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXJlQWxsVGh1bWJzSW5TaWdodCB8fCB0aGlzLmNhcm91c2VsU2xpZGVzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjYXJvdXNlbFdyYXBwZXJTaXplIDwgdGhpcy5jYXJvdXNlbFNsaWRlclNjcmVlblNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgY2Fyb3VzZWwgQnV0dG9uc1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhcm91c2VsQ291bnRlciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgdGhpcy50aHVtYkltYWdlU2l6ZSwgdGhpcy5jYXJvdXNlbENvdW50ZXIsIHRoaXMuY2Fyb3VzZWxTbGlkZXIsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5tYXJnaW4sIHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUNhcm91c2VsQnV0dG9uc18xLmRlZmF1bHQodGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0LCB0aGlzLmNhcm91c2VsLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3ZlclwiLCBoYW5kbGVUaHVtYkxvYWRJbWFnZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlVGh1bWJMb2FkSW1hZ2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBoYW5kbGVUaHVtYkxvYWRJbWFnZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVUaHVtYkxvYWRJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuY2Fyb3VzZWxDb3VudGVyICsgdGhpcy50aHVtYnNJblNpZ2h0KSA8PSB0aGlzLmNhcm91c2VsU2xpZGVzLmxlbmd0aCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgdGhpcy50aHVtYkltYWdlU2l6ZSwgdGhpcy5jYXJvdXNlbENvdW50ZXIsIHRoaXMuY2Fyb3VzZWxTbGlkZXIsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5tYXJnaW4sIHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUNhcm91c2VsQnV0dG9uc18xLmRlZmF1bHQodGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0LCB0aGlzLmNhcm91c2VsLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9VQ0ggRVZFTlRTIGZvciBDYXJvdXNlbCBUaHVtYm5haWxzXG4gICAgICAgICAgICBsZXQgaXNDYXJvdXNlbFN3aXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBjYXJvdXNlbFN0YXJ0UG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgbGV0IGNhcm91c2VsUHJldlRyYW5zbGF0ZSA9IDA7XG4gICAgICAgICAgICBsZXQgY2Fyb3VzZWxDdXJlbnRUcmFuc2xhdGUgPSAwO1xuICAgICAgICAgICAgY29uc3QgZ2VzdHVyZVN0YXJ0Q2Fyb3VzZWwgPSAocG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbFN0YXJ0UG9zaXRpb24gPSB0aGlzLmlzU2xpZGVyVmVydGljYWwgPyBnZXRwb3NpdGlvblkoZXYpIDogZ2V0cG9zaXRpb25YKGV2KTtcbiAgICAgICAgICAgICAgICAgICAgaXNDYXJvdXNlbFN3aXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1NYXRyaXggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhcm91c2VsV3JhcHBlcikuZ2V0UHJvcGVydHlWYWx1ZShcInRyYW5zZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybU1hdHJpeCAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcm91c2VsUHJldlRyYW5zbGF0ZSA9IHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodHJhbnNmb3JtTWF0cml4LnNwbGl0KFwiLFwiKVs1XS50cmltKCksIDEwKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodHJhbnNmb3JtTWF0cml4LnNwbGl0KFwiLFwiKVs0XS50cmltKCksIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZ2VzdHVyZU1vdmVDYXJvdXNlbCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ2Fyb3VzZWxTd2lwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcm91c2VsQ3VycmVudFBvc2l0aW9uID0gdGhpcy5pc1NsaWRlclZlcnRpY2FsID8gZ2V0cG9zaXRpb25ZKGUpIDogZ2V0cG9zaXRpb25YKGUpO1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbEN1cmVudFRyYW5zbGF0ZSA9IGNhcm91c2VsQ3VycmVudFBvc2l0aW9uIC0gY2Fyb3VzZWxTdGFydFBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBnZXN0dXJlRW5kQ2Fyb3VzZWwgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcm91c2VsRW5kUG9zaXRpb24gPSB0aGlzLmlzU2xpZGVyVmVydGljYWwgPyBnZXRwb3NpdGlvblkoZSkgOiBnZXRwb3NpdGlvblgoZSk7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGNhcm91c2VsRW5kUG9zaXRpb24gLSBjYXJvdXNlbFN0YXJ0UG9zaXRpb24pID49IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RyYW5zbGF0ZSA9IGNhcm91c2VsUHJldlRyYW5zbGF0ZSArIGNhcm91c2VsQ3VyZW50VHJhbnNsYXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJhbnNsYXRlIDwgY2Fyb3VzZWxQcmV2VHJhbnNsYXRlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsQ291bnRlciA8ICh0aGlzLmNhcm91c2VsU2xpZGVzLmxlbmd0aCAtIHRoaXMudGh1bWJzSW5TaWdodCArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsQ291bnRlcisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVGh1bWJMb2FkSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXdUcmFuc2xhdGUgPiBjYXJvdXNlbFByZXZUcmFuc2xhdGUgJiYgdGhpcy5jYXJvdXNlbENvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsQ291bnRlci0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1vdmVDYXJvdXNlbF8xLmRlZmF1bHQodGhpcy5jYXJvdXNlbFdyYXBwZXIsIHRoaXMudGh1bWJJbWFnZVNpemUsIHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLmNhcm91c2VsU2xpZGVyLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luLCB0aGlzLmlzU2xpZGVyVmVydGljYWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm5hdmlnYXRpb25TaGFwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMuYXJlQWxsVGh1bWJzSW5TaWdodCwgdGhpcy5jYXJvdXNlbCwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm1hcmdpbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaXNDYXJvdXNlbFN3aXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVzLmZvckVhY2goKHRodW1iLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBkcmFnIGJlaGF2aW91ciBmb3IgbWFpblNsaWRlc1xuICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGdlc3R1cmVTdGFydENhcm91c2VsKGluZGV4KSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBnZXN0dXJlTW92ZUNhcm91c2VsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBnZXN0dXJlRW5kQ2Fyb3VzZWwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBnZXN0dXJlRW5kQ2Fyb3VzZWwsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRvdWNoIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hkb3duXCIsIGdlc3R1cmVTdGFydENhcm91c2VsKGluZGV4KSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgZ2VzdHVyZU1vdmVDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHVwXCIsIGdlc3R1cmVFbmRDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLCBnZXN0dXJlRW5kQ2Fyb3VzZWwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGdlc3R1cmVTdGFydENhcm91c2VsKGluZGV4KSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZ2VzdHVyZU1vdmVDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGdlc3R1cmVFbmRDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSUYgQ0FST1VTRUwgSVMgSU5ESUNBVE9SU1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwiaW5kaWNhdG9yc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gQXJyYXkuZnJvbSh0aGlzLm5hdkluZGljYXRvcnMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgLy8gU2V0IGluZGljYXRvcidzIHN0eWxlc1xuICAgICAgICAgICAgaW5kaWNhdG9ycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlc0luaWNhdG9ycyA9IHRoaXMubmF2SW5kaWNhdG9ycy5xdWVyeVNlbGVjdG9yQWxsKFwiIC5pbmRpY2F0b3JcIik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVJbmRpY2F0b3IgPSBzbGlkZXNJbmljYXRvcnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHNsaWRlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoYGluZGljYXRvci0ke3RoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zaGFwZX1gKTtcbiAgICAgICAgICAgICAgICBzbGlkZUluZGljYXRvci5zdHlsZS5tYXJnaW4gPSBgJHt0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc3BhY2luZ31weGA7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zaGFwZSA9PT0gXCJsaW5lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5vcHRpb25zLmluZGljYXRvclByb3BzLnNpemV9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgM3B4YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAzcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc2l6ZX1weGA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAke3RoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zaXplfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc2l6ZX1weGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldE5hdkluZGljYXRvcnNEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIC8vIFNldCBpbWFnZSB3aGVuIGluZGljYXRvciBjbGlja2VkXG4gICAgICAgICAgICB0aGlzLm5hdkluZGljYXRvcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuaW5saW5lLW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5pbmxpbmUtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuZmx5b3V0LW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZmx5b3V0LW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERvdCA9IHRhcmdldC5jbG9zZXN0KFwiLmluZGljYXRvclwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldERvdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kaWNhdG9yID0gdGhpcy5uYXZJbmRpY2F0b3JzLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gaW5kaWNhdG9ycy5maW5kSW5kZXgoKGluZGljYXRvcikgPT4gaW5kaWNhdG9yID09PSB0YXJnZXREb3QpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNsaWRlID0gdGhpcy5tYWluU2xpZGVzW3RoaXMudGFyZ2V0SW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW3RoaXMudGFyZ2V0SW5kZXhdLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIHRhcmdldFNsaWRlLCB0aGlzLnRhcmdldEluZGV4LCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuY29udGV4dE1lbnUsIHRoaXMub3BlbkltYWdlVGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldk1haW5CdXR0b24gJiYgdGhpcy5uZXh0TWFpbkJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTWFpbkJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMubWFpblNsaWRlcywgdGhpcy5wcmV2TWFpbkJ1dHRvbiwgdGhpcy5uZXh0TWFpbkJ1dHRvbiwgdGhpcy50YXJnZXRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQoY3VycmVudEluZGljYXRvciwgdGFyZ2V0RG90LCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcImZhZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBmYWRlSW5fMS5kZWZhdWx0KHRoaXMuZ2FsbGVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVzZSBwaWlvIGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5waWlvRG9tYWluS2V5ICYmIHdpbmRvdy5waWlvKSB7XG4gICAgICAgICAgICB0aGlzLmdldFBpaW9JbWFnZXMoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgZmlyc3QgaW1hZ2VcbiAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbMF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgIC8vIE9uIHdpbmRvdyBSRVNJWkVcbiAgICAgICAgY29uc3QgcmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgLy8gUmVzaXplIHRodW1ibmFpbHMgb3IgaW5kaWNhdG9yc1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2Fyb3VzZWxEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE5hdkluZGljYXRvcnNEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc2l6ZSBtYWluIHNsaWRlclxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEZXZpY2VXaXRoID0gdGhpcy5kZXZpY2VXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuc2V0U2xpZGVyRGltZW5zaW9ucygpO1xuICAgICAgICAgICAgLy8gTG9hZCBuZXcgVGh1bWJuYWlsIEltYWdlc1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFRodW1ibmFpbEltYWdlc0luU2lnaHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENoYW5nZSBmbHlvdXQgZGlzcGxheSBhY29yZGluZyB0byBzY3JlZW4gc2l6ZVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSA9PT0gXCJmbHlvdXRcIiAmJiB0aGlzLnpvb21EaXYpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXZpY2VXaWR0aCA8IDk5Mikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZmx5b3V0LW9wZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmZseW91dEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtem9vbVwiLCBcImlubGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGV2aWNlV2lkdGggPj0gOTkyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmlubGluZS1vcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmlubGluZS1vcGVuXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJpbmxpbmUtb3BlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaW5saW5lRW50ZXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5pbmxpbmVMZWF2ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtem9vbVwiLCBcImZseW91dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy50eXBlID09PSBcImlubGluZVwiICYmIHRoaXMuem9vbURpdikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Wm9vbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVsb2FkIG1haW4gaW1hZ2VzIGFjY29yZGluZyB0byBzY3JlZW4gc2l6ZVxuICAgICAgICAgICAgaWYgKHByZXZpb3VzRGV2aWNlV2l0aCA8IHRoaXMuZGV2aWNlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZGVkTWFpbkltYWdlcyA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvckFsbChgaW1nOm5vdChbc3JjKj1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBXCJdKWApO1xuICAgICAgICAgICAgICAgIGRvd25sb2FkZWRNYWluSW1hZ2VzLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUFcIikpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG93bmxvYWRlZE1haW5JbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbaV0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRqdXN0IHRyYW5zbGF0ZSBpbnNpZGUgd3JhcHBlciBpbiBvcmRlciB0byBkaXNwbGF5IGN1cnJlbnQgc2xpZGVcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VXaWR0aCA9IHRoaXMuZ2V0TWFpbkltYWdlV2lkdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5tYWluU2xpZGVzLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gY3VycmVudFNsaWRlKTtcbiAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIGN1cnJlbnRTbGlkZSwgaW5kZXgsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5jb250ZXh0TWVudSwgdGhpcy5vcGVuSW1hZ2VUZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplKTtcbiAgICB9XG59XG5jb25zdCBHYWxsZXJ5T2JqZWN0ID0ge1xuICAgIGluaXQob3B0cykge1xuICAgICAgICByZXR1cm4gbmV3IEdhbGxlcnkob3B0cyk7XG4gICAgfSxcbn07XG5leHBvcnRzLnBpaW9HYWxsZXJ5ID0gR2FsbGVyeU9iamVjdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdhbGxlcnlPYmplY3QuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBnYWxsZXJ5T2JqZWN0XzEgPSByZXF1aXJlKFwiLi90eXBlcy9nYWxsZXJ5T2JqZWN0XCIpO1xud2luZG93LnBpaW9HYWxsZXJ5ID0gZ2FsbGVyeU9iamVjdF8xLnBpaW9HYWxsZXJ5O1xudmFyIGdhbGxlcnlPYmplY3RfMiA9IHJlcXVpcmUoXCIuL3R5cGVzL2dhbGxlcnlPYmplY3RcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwaWlvR2FsbGVyeVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2FsbGVyeU9iamVjdF8yLnBpaW9HYWxsZXJ5OyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlpby1nYWxsZXJ5LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gRW5hYmxlIGFuZCBEaXNhYmxlIENhcm91c2VsIGJ1dHRvbnNcbmNvbnN0IGRpc2FibGVDYXJvdXNlbEJ1dHRvbnMgPSAoYXJlQWxsVGh1bWJzSW5TaWdodCwgY2Fyb3VzZWwsIG1hcmdpbikgPT4ge1xuICAgIGlmIChjYXJvdXNlbCkge1xuICAgICAgICBjb25zdCBjYXJvdXNlbFNsaWRlciA9IGNhcm91c2VsLnF1ZXJ5U2VsZWN0b3IoXCIuY2Fyb3VzZWwtc2xpZGVyXCIpO1xuICAgICAgICBjb25zdCBjYXJvdXNlbFdyYXBwZXIgPSBjYXJvdXNlbFNsaWRlci5xdWVyeVNlbGVjdG9yKFwiIC5jYXJvdXNlbC13cmFwcGVyXCIpO1xuICAgICAgICBjb25zdCBjYXJvdXNlbFNsaWRlclBvc2l0aW9uID0gY2Fyb3VzZWxTbGlkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGNhcm91c2VsV3JhcHBlclBvc2l0aW9uID0gY2Fyb3VzZWxXcmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBwcmV2Q2Fyb3VzZWwgPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZDYXJvdXNlbFwiKTtcbiAgICAgICAgY29uc3QgbmV4dENhcm91c2VsID0gY2Fyb3VzZWwucXVlcnlTZWxlY3RvcihcIiNuZXh0Q2Fyb3VzZWxcIik7XG4gICAgICAgIGlmIChhcmVBbGxUaHVtYnNJblNpZ2h0KSB7XG4gICAgICAgICAgICBwcmV2Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgbmV4dENhcm91c2VsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYXJvdXNlbFdyYXBwZXJQb3NpdGlvbi5ib3R0b20gPD0gKGNhcm91c2VsU2xpZGVyUG9zaXRpb24uYm90dG9tICsgbWFyZ2luKSAmJlxuICAgICAgICAgICAgY2Fyb3VzZWxXcmFwcGVyUG9zaXRpb24udG9wIDwgY2Fyb3VzZWxTbGlkZXJQb3NpdGlvbi50b3AgfHxcbiAgICAgICAgICAgIGNhcm91c2VsV3JhcHBlclBvc2l0aW9uLnJpZ2h0IDw9IChjYXJvdXNlbFNsaWRlclBvc2l0aW9uLnJpZ2h0ICsgbWFyZ2luKSAmJlxuICAgICAgICAgICAgICAgIGNhcm91c2VsV3JhcHBlclBvc2l0aW9uLmxlZnQgPCBjYXJvdXNlbFNsaWRlclBvc2l0aW9uLmxlZnQpIHtcbiAgICAgICAgICAgIHByZXZDYXJvdXNlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgbmV4dENhcm91c2VsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYXJvdXNlbFdyYXBwZXJQb3NpdGlvbi50b3AgPj0gY2Fyb3VzZWxTbGlkZXJQb3NpdGlvbi50b3AgJiZcbiAgICAgICAgICAgIGNhcm91c2VsV3JhcHBlclBvc2l0aW9uLmJvdHRvbSA+IChjYXJvdXNlbFNsaWRlclBvc2l0aW9uLmJvdHRvbSArIG1hcmdpbikgfHxcbiAgICAgICAgICAgIGNhcm91c2VsV3JhcHBlclBvc2l0aW9uLmxlZnQgPj0gY2Fyb3VzZWxTbGlkZXJQb3NpdGlvbi5sZWZ0ICYmXG4gICAgICAgICAgICAgICAgY2Fyb3VzZWxXcmFwcGVyUG9zaXRpb24ucmlnaHQgPiAoY2Fyb3VzZWxTbGlkZXJQb3NpdGlvbi5yaWdodCArIG1hcmdpbikpIHtcbiAgICAgICAgICAgIHByZXZDYXJvdXNlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICBuZXh0Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXZDYXJvdXNlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgbmV4dENhcm91c2VsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gZGlzYWJsZUNhcm91c2VsQnV0dG9ucztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc2FibGVDYXJvdXNlbEJ1dHRvbnMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBFbmFibGUgYW5kIERpc2FibGUgTWFpbiBJbWFnZSBidXR0b25zXG5mdW5jdGlvbiBkaXNhYmxlTWFpbkJ1dHRvbnMobWFpblNsaWRlcywgcHJldk1haW5CdXR0b24sIG5leHRNYWluQnV0dG9uLCB0YXJnZXRJbmRleCkge1xuICAgIGlmICh0YXJnZXRJbmRleCA9PT0gMCkge1xuICAgICAgICBwcmV2TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIG5leHRNYWluQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldEluZGV4ID09PSBtYWluU2xpZGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcHJldk1haW5CdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgbmV4dE1haW5CdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJldk1haW5CdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgbmV4dE1haW5CdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBkaXNhYmxlTWFpbkJ1dHRvbnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaXNhYmxlTWFpbkJ1dHRvbnMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBGYWRlIHRyYW5zaXRpb25cbmZ1bmN0aW9uIGZhZGVJbihnYWxsZXJ5KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcihgLmN1cnJlbnRgKTtcbiAgICAvLyBBZGQgZmFkZSBpbiBjbGFzc1xuICAgIGN1cnJlbnQuY2xhc3NMaXN0LmFkZChcImZhZGUtaW5cIik7XG4gICAgLy8gUmVtb3ZlIGZhZGUgaW4gY2xhc3MgYWZ0ZXIgMC41IHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZmFkZS1pblwiKTtcbiAgICB9LCA1MDApO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gZmFkZUluO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmFkZUluLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gZ2V0VGFyZ2V0RWxlbWVudChjdXJyZW50RWxlbWVudCwgdGFyZ2V0SW5kZXgsIGVsZW1lbnRzQXJyYXkpIHtcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBlbGVtZW50c0FycmF5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gY3VycmVudEVsZW1lbnQpO1xuICAgIGxldCB0YXJnZXRFbGVtZW50O1xuICAgIGlmIChjdXJyZW50SW5kZXggPiB0YXJnZXRJbmRleCkge1xuICAgICAgICB0YXJnZXRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICB9XG4gICAgZWxzZSBpZiAoY3VycmVudEluZGV4IDwgdGFyZ2V0SW5kZXgpIHtcbiAgICAgICAgdGFyZ2V0RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldEVsZW1lbnQ7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBnZXRUYXJnZXRFbGVtZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0VGFyZ2V0RWxlbWVudC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIFNldCBDYXJvdXNlbCBuYXYgUG9zaXRpb25cbmZ1bmN0aW9uIG1vdmVDYXJvdXNlbChuYXZXcmFwcGVyLCBuYXZUaHVtYlNpemUsIGNvdW50ZXIsIG5hdkNvbnRhaW5lciwgbWFyZ2luLCBpc1NsaWRlclZlcnRpY2FsKSB7XG4gICAgY29uc3QgbW92ZUJ5ID0gKG5hdlRodW1iU2l6ZSArIG1hcmdpbikgKiBjb3VudGVyO1xuICAgIGNvbnN0IG5hdkNvbnRhaW5lclNpemUgPSAoaXNTbGlkZXJWZXJ0aWNhbCkgP1xuICAgICAgICBuYXZDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IDpcbiAgICAgICAgbmF2Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGNvbnN0IG5hdldyYXBwZXJTaXplID0gKGlzU2xpZGVyVmVydGljYWwpID9cbiAgICAgICAgbmF2V3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgOlxuICAgICAgICBuYXZXcmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGlmICgobW92ZUJ5ICsgbmF2Q29udGFpbmVyU2l6ZSkgPCBuYXZXcmFwcGVyU2l6ZSkge1xuICAgICAgICBuYXZXcmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9IChpc1NsaWRlclZlcnRpY2FsKSA/IGB0cmFuc2xhdGVZKCAtJHttb3ZlQnl9cHgpYCA6IGB0cmFuc2xhdGVYKCAtJHttb3ZlQnl9cHgpYDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5hdldyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gKGlzU2xpZGVyVmVydGljYWwpID8gYHRyYW5zbGF0ZVkoIC0ke25hdldyYXBwZXJTaXplIC0gbmF2Q29udGFpbmVyU2l6ZSAtIG1hcmdpbn1weClgIDogYHRyYW5zbGF0ZVgoIC0ke25hdldyYXBwZXJTaXplIC0gbmF2Q29udGFpbmVyU2l6ZSAtIG1hcmdpbn1weClgO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IG1vdmVDYXJvdXNlbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vdmVDYXJvdXNlbC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIFNldCBzbGlkZXIgUG9zaXRpb25cbmZ1bmN0aW9uIG1vdmVNYWluU2xpZGVyKG1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIHRhcmdldFNsaWRlLCB0YXJnZXRJbmRleCwgaW1hZ2VXaWR0aCwgY29udGV4dE1lbnUsIG9wZW5JbWFnZVRleHQpIHtcbiAgICBtYWluV3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCggLSR7aW1hZ2VXaWR0aCAqIHRhcmdldEluZGV4fXB4KWA7XG4gICAgY3VycmVudFNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoXCJjdXJyZW50XCIpO1xuICAgIHRhcmdldFNsaWRlLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50XCIpO1xuICAgIGNvbnN0IHRhcmdldEltYWdlID0gdGFyZ2V0U2xpZGUucXVlcnlTZWxlY3RvcihcIltkYXRhLWltYWdlXVwiKTtcbiAgICBjb25zdCBvcmlnaW5hbFVSTCA9IHRhcmdldEltYWdlLmdldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2VcIik7XG4gICAgLy8gQ3JlYXRlIGFuY2hvciB0YWdcbiAgICBjb25zdCBhbmNob3J0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBhbmNob3J0YWcuY2xhc3NMaXN0LmFkZChcIml0ZW1cIik7XG4gICAgYW5jaG9ydGFnLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcbiAgICBhbmNob3J0YWcuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwibm9vcGVuZXIgbm9yZWZlcnJlclwiKTtcbiAgICBhbmNob3J0YWcuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBvcmlnaW5hbFVSTCk7XG4gICAgYW5jaG9ydGFnLmNsYXNzTGlzdC5hZGQoXCJpdGVtXCIpO1xuICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcGVuSW1hZ2VUZXh0KTtcbiAgICAvLyBBcHBlbmQgaXQgdG8gaXQncyBwYXJlbnRcbiAgICBhbmNob3J0YWcuYXBwZW5kQ2hpbGQodGV4dCk7XG4gICAgY29udGV4dE1lbnUuaW5uZXJIVE1MID0gXCIgXCI7XG4gICAgY29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoYW5jaG9ydGFnKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IG1vdmVNYWluU2xpZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW92ZU1haW5TbGlkZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBTbGlkZSB0cmFuc2l0aW9uXG5mdW5jdGlvbiBzbGlkZShub2RlKSB7XG4gICAgY29uc3QgbWFpbldyYXBwZXIgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi13cmFwcGVyXCIpO1xuICAgIG1haW5XcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVwiKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHNsaWRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2xpZGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBVcGRhdGUgdGhlIHNlbGVjdGVkIGVsZW1lbnRcbmZ1bmN0aW9uIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZChjdXJyZW50LCB0YXJnZXQsIHNlbGVjdGVkU3R5bGUsIHNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjdXJyZW50V3JhcHBlciA9IGN1cnJlbnQucXVlcnlTZWxlY3RvcihgJHtvcHRpb25zLmdhbGxlcnlTZWxlY3Rvcn0gLmltZ1RodW1iLXdyYXBwZXJgKTtcbiAgICBjb25zdCB0YXJnZXRXcmFwcGVyID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYCR7b3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3J9IC5pbWdUaHVtYi13cmFwcGVyYCk7XG4gICAgY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIGlmIChjdXJyZW50V3JhcHBlcikge1xuICAgICAgICBpZiAoc2VsZWN0ZWRTdHlsZSA9PT0gXCJib3JkZXJcIikge1xuICAgICAgICAgICAgY3VycmVudFdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShgYm9yZGVyLSR7c2VsZWN0ZWRCb3JkZXJQb3NpdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJvdmVybGF5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3RlZFN0eWxlID09PSBcImJvcmRlclwiKSB7XG4gICAgICAgICAgICB0YXJnZXRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoYGJvcmRlci0ke3NlbGVjdGVkQm9yZGVyUG9zaXRpb259YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gdXBkYXRlTmF2RWxlbVNlbGVjdGVkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlTmF2RWxlbVNlbGVjdGVkLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy56b29tID0gdm9pZCAwO1xuY29uc3Qgem9vbSA9IChlKSA9PiB7XG4gICAgbGV0IGNsaWVudFg7XG4gICAgbGV0IGNsaWVudFk7XG4gICAgZS5jbGllbnRYID8gY2xpZW50WCA9IGUuY2xpZW50WCA6IGUudG91Y2hlcyA/IGNsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WCA6IGNsaWVudFggPSAwO1xuICAgIGUuY2xpZW50WSA/IGNsaWVudFkgPSBlLmNsaWVudFkgOiBlLnRvdWNoZXMgPyBjbGllbnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFkgOiBjbGllbnRZID0gMDtcbiAgICBjb25zdCBpbWFnZVpvb20gPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3Qgb2Zmc2V0WCA9IGNsaWVudFggLSBpbWFnZVpvb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICBjb25zdCBvZmZzZXRZID0gY2xpZW50WSAtIGltYWdlWm9vbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgbGV0IHhBbW91bnQgPSBvZmZzZXRYIC8gaW1hZ2Vab29tLm9mZnNldFdpZHRoICogMTAwO1xuICAgIGxldCB5QW1vdW50ID0gb2Zmc2V0WSAvIGltYWdlWm9vbS5vZmZzZXRIZWlnaHQgKiAxMDA7XG4gICAgKDAgPD0geEFtb3VudCAmJiB4QW1vdW50IDw9IDEwMCkgPyB4QW1vdW50ID0geEFtb3VudCA6IDAgPiB4QW1vdW50ID8geEFtb3VudCA9IDAgOiB4QW1vdW50ID0gMTAwO1xuICAgICgwIDw9IHlBbW91bnQgJiYgeUFtb3VudCA8PSAxMDApID8geUFtb3VudCA9IHlBbW91bnQgOiAwID4geUFtb3VudCA/IHlBbW91bnQgPSAwIDogeUFtb3VudCA9IDEwMDtcbiAgICByZXR1cm4geEFtb3VudCArIFwiJVwiICsgeUFtb3VudCArIFwiJVwiO1xufTtcbmV4cG9ydHMuem9vbSA9IHpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b29tLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=