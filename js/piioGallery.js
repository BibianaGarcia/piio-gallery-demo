!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.piioGallery=void 0;const o=s(i(2)),n=s(i(3)),r=s(i(4)),a=s(i(5)),l=s(i(6)),h=s(i(7)),d=s(i(8)),p=s(i(9)),u=s(i(10)),c=i(11);class m{constructor(t){let e;this.areAllThumbsInSight=!1,this.currentTranslate=0,this.defaultIndicatorProps={shape:"circle",size:13,spacing:6},this.defaultThumbnailProps={height:70,margin:10,navigationShape:"rectangle",selectedBorderPosition:"bottom",selectedBorderWidth:3,selectedStyle:"overlay",width:70},this.defaultZoomProps={position:"",ratio:2,type:"inline"},this.deviceWidth=window.innerWidth,this.hasCursorMoved=!1,this.isMainSliderSwiping=!1,this.prevTranslate=0,this.startPosition=0,this.targetIndex=0,this.flyoutHandler=()=>{this.isFlyoutVisible=!this.isFlyoutVisible;this.mainWrapper.querySelector(" .current").classList.toggle("flyout-open"),this.isFlyoutVisible?(this.zoomDiv.classList.add("show"),this.mainContainer.addEventListener("mousemove",this.flyoutZoom,!0),this.mainContainer.addEventListener("touchmove",this.flyoutZoom,!1),this.handlePreloadBgZoom(),this.zoomDiv.style.zIndex="100"):(this.zoomDiv.classList.remove("show"),this.zoomDiv.style.backgroundImage="unset",this.mainContainer.removeEventListener("mousemove",this.flyoutZoom,!0),this.mainContainer.removeEventListener("touchmove",this.flyoutZoom,!1),this.zoomDiv.style.zIndex="-1")},this.flyoutZoom=t=>{t.preventDefault(),this.zoomDiv.style.backgroundPosition=c.zoom(t)},this.handlePreloadBgZoom=()=>{const t=this.mainWrapper.querySelector(" .current img");if(this.options.piioDomainKey){let e=t.getAttribute("data-image-zoom");e||(e=t.getAttribute("data-image")),this.zoomDiv.style.backgroundImage=`url(${e})`}else this.zoomDiv.style.backgroundImage=`url(${t.src})`},this.inlineEnterHandler=t=>{this.mainWrapper.querySelector(this.options.gallerySelector+" .current").classList.add("inline-open"),this.zoomDiv.classList.add("show"),this.handlePreloadBgZoom(),this.inlineZoom(t),this.zoomDiv.addEventListener("mousemove",this.inlineZoom,!1),this.zoomDiv.addEventListener("touchmove",this.inlineZoom,!1)},this.inlineLeaveHandler=t=>{this.mainWrapper.querySelector(this.options.gallerySelector+" .current").classList.remove("inline-open"),this.zoomDiv.classList.remove("show"),this.zoomDiv.removeEventListener("mousemove",this.inlineZoom,!1),this.zoomDiv.removeEventListener("touchmove",this.inlineZoom,!1),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.style.backgroundPosition="unset"},this.inlineZoom=t=>{t.preventDefault(),this.zoomDiv.style.backgroundPosition=c.zoom(t)},this.setZoomDivDimension=()=>{if(this.zoomDiv){if(this.zoomDiv.style.width=this.imageWidth+"px","string"==typeof this.options.aspectRatio&&this.options.aspectRatio.includes(":")){const t=this.options.aspectRatio.split(":");this.imageHeight=this.imageWidth/parseInt(t[0],10)*parseInt(t[1],10),this.zoomDiv.style.height=this.imageHeight+"px"}else"object"==typeof this.options.aspectRatio&&null!==this.options.aspectRatio?(this.imageHeight=this.options.aspectRatio.height,this.zoomDiv.style.height=this.imageHeight+"px"):(this.imageHeight=this.imageWidth,this.zoomDiv.style.height=this.imageHeight+"px");this.gallery.style.position="relative",this.zoomDiv.style.position="absolute"}},this.options=t,this.options.piioDomainKey=void 0===t.piioDomainKey?"":t.piioDomainKey,this.options.gallerySelector=t.gallerySelector,this.options.transition=void 0===t.transition?"slide":t.transition,this.options.themeProps=void 0===t.themeProps?{background:"hsla(234, 76%, 50%, 1)",color:"hsla(0, 100%, 100%, 1)"}:{background:void 0===t.themeProps.background?"hsla(234, 76%, 50%, 1)":t.themeProps.background,color:void 0===t.themeProps.color?"hsla(0, 100%, 100%, 1)":t.themeProps.color},this.options.variantSelector=t.variantSelector,e=void 0!==this.options.responsive&&void 0!==this.options.responsive.mobile&&this.deviceWidth<764?t.responsive.mobile:void 0!==this.options.responsive&&void 0!==this.options.responsive.tablet&&this.deviceWidth<1024?t.responsive.tablet:t,this.options.aspectRatio=void 0===e.aspectRatio?"square":e.aspectRatio,this.options.carouselOffset=void 0===e.carouselOffset?15:e.carouselOffset,this.options.carouselPosition=void 0===e.carouselPosition?"bottom":e.carouselPosition,this.options.carouselStyle=void 0===e.carouselStyle?"thumbnails":e.carouselStyle,this.options.indicatorProps=void 0===e.indicatorProps?this.defaultIndicatorProps:{shape:void 0===e.indicatorProps.shape?"circle":e.indicatorProps.shape,size:void 0===e.indicatorProps.size?13:e.indicatorProps.size,spacing:void 0===e.indicatorProps.spacing?6:e.indicatorProps.spacing},this.options.mainNavigation=void 0===e.mainNavigation?"rectangle":e.mainNavigation,this.options.thumbnailProps=void 0===e.thumbnailProps?this.defaultThumbnailProps:{height:void 0===e.thumbnailProps.height?70:e.thumbnailProps.height,margin:void 0===e.thumbnailProps.margin?10:e.thumbnailProps.margin,navigationShape:void 0===e.thumbnailProps.navigationShape?"rectangle":e.thumbnailProps.navigationShape,selectedBorderPosition:void 0===e.thumbnailProps.selectedBorderPosition?this.options.carouselPosition:e.thumbnailProps.selectedBorderPosition,selectedBorderWidth:void 0===e.thumbnailProps.selectedBorderWidth?3:e.thumbnailProps.selectedBorderWidth,selectedStyle:void 0===e.thumbnailProps.selectedStyle?"overlay":e.thumbnailProps.selectedStyle,width:void 0===e.thumbnailProps.width?70:e.thumbnailProps.width},this.options.zoomProps=void 0===e.zoomProps?this.defaultZoomProps:{position:void 0===e.zoomProps.position?"right":e.zoomProps.position,ratio:void 0===e.zoomProps.ratio?2:e.zoomProps.ratio,type:void 0===e.zoomProps.type?"inline":e.zoomProps.type}}render(){document.querySelector(""+this.options.gallerySelector)&&(this.options.piioDomainKey&&void 0===window.piio?setTimeout(()=>{this.render()},10):void 0!==this.options.variantSelector?(this.variantSelector=document.querySelector(""+this.options.variantSelector),this.variants=this.variantSelector.querySelectorAll("[data-list]"),this.images=this.variants[0].querySelectorAll("[data-image]"),this.variantsArray=Array.from(this.variantSelector.children),this.variantSelector.addEventListener("click",t=>{const e=t.target.closest("[data-list]");if(!e)return;const i=this.variantsArray.findIndex(t=>t===e);this.images=this.variants[i].querySelectorAll("[data-image]"),this.start(i)}),this.start(0)):(this.images=document.querySelectorAll(this.options.gallerySelector+" [data-image]"),this.start()))}start(t){let e;if(this.gallery=document.querySelector(""+this.options.gallerySelector),e=void 0!==this.options.variantSelector?Array.from(this.variantsArray[t].querySelectorAll("[data-image]")):Array.from(this.gallery.children),this.mainWrapper=document.createElement("div"),this.mainWrapper.classList.add("main-wrapper"),e.forEach((t,e)=>{const i=document.createElement("div");if(i.setAttribute("data-gallery","item-"+e),i.setAttribute("class",0===e?"current":""),void 0!==this.options.variantSelector){const e=t.cloneNode(!0);i.appendChild(e)}else i.appendChild(t);this.mainWrapper.appendChild(i)}),this.galleryContainer=document.createElement("div"),this.galleryContainer.classList.add("gallery-container"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("main-img"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("main-container"),this.contextMenu=document.createElement("div"),this.contextMenu.classList.add("context-menu"),this.mainContainer.appendChild(this.mainWrapper),this.imageContainer.appendChild(this.mainContainer),this.galleryContainer.appendChild(this.imageContainer),this.gallery.innerHTML=" ",this.gallery.appendChild(this.galleryContainer),this.gallery.appendChild(this.contextMenu),"indicators"===this.options.carouselStyle)this.carouselOffset=document.createElement("div"),this.carouselOffset.classList.add("carousel-offset"),this.navIndicators=document.createElement("div"),this.navIndicators.classList.add("navIndicators"),this.galleryContainer.appendChild(this.carouselOffset),this.galleryContainer.appendChild(this.navIndicators);else if("none"!==this.options.carouselStyle){if(this.carouselOffset=document.createElement("div"),this.carouselOffset.classList.add("carousel-offset"),this.carousel=document.createElement("div"),this.carousel.classList.add("carousel"),this.carouselSlider=document.createElement("div"),this.carouselSlider.classList.add("carousel-slider"),this.carouselSlider.style.height=this.options.thumbnailProps.height+"px",this.carouselWrapper=document.createElement("div"),this.carouselWrapper.classList.add("carousel-wrapper"),this.carouselWrapper.style.height=this.options.thumbnailProps.height+"px",this.galleryContainer.appendChild(this.carouselOffset),this.carouselSlider.appendChild(this.carouselWrapper),this.carousel.appendChild(this.carouselSlider),"none"!==this.options.thumbnailProps.navigationShape){const t=this.createPrevSvg();this.prevCarousel=document.createElement("button"),this.prevCarousel.classList.add("arrow"),this.prevCarousel.classList.add("prev-arrow"),this.prevCarousel.setAttribute("type","button"),this.prevCarousel.setAttribute("id","prevCarousel"),this.prevCarousel.setAttribute("style","display:none"),this.prevCarousel.appendChild(t),this.carousel.appendChild(this.prevCarousel);const e=this.createNextSvg();this.nextCarousel=document.createElement("button"),this.nextCarousel.classList.add("arrow"),this.nextCarousel.classList.add("next-arrow"),this.nextCarousel.setAttribute("type","button"),this.nextCarousel.setAttribute("id","nextCarousel"),this.nextCarousel.appendChild(e),this.carousel.appendChild(this.nextCarousel)}this.galleryContainer.appendChild(this.carousel)}if(this.images.forEach((t,e)=>{const i=t.getAttribute("data-image");if("indicators"===this.options.carouselStyle){const t=document.createElement("div");t.setAttribute("class",0===e?"active":""),t.classList.add("indicator"),this.navIndicators.appendChild(t)}else if("thumbnails"===this.options.carouselStyle){const t=document.createElement("img");t.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"),t.setAttribute("data-image",i);const s=document.createElement("div");s.classList.add("imgThumb-wrapper");const o=document.createElement("div");o.setAttribute("class",0===e?"active":""),o.classList.add("slide"),s.appendChild(t),o.appendChild(s),this.carouselWrapper.appendChild(o)}}),"none"!==this.options.transition&&this.galleryContainer.setAttribute("data-transition",this.options.transition),"none"!==this.options.mainNavigation){const t=this.createPrevSvg();t.setAttribute("height","24px"),t.setAttribute("width","24px"),this.prevMainButton=document.createElement("button"),this.prevMainButton.classList.add("arrow"),this.prevMainButton.classList.add("prev-arrow"),this.prevMainButton.setAttribute("type","button"),this.prevMainButton.setAttribute("id","prevMainButton"),this.prevMainButton.setAttribute("style","display:none"),this.prevMainButton.appendChild(t),this.imageContainer.appendChild(this.prevMainButton);const e=this.createNextSvg();e.setAttribute("height","24px"),e.setAttribute("width","24px"),this.nextMainButton=document.createElement("button"),this.nextMainButton.classList.add("arrow"),this.nextMainButton.classList.add("next-arrow"),this.nextMainButton.setAttribute("type","button"),this.nextMainButton.setAttribute("id","nextMainButton"),this.nextMainButton.appendChild(e),this.imageContainer.appendChild(this.nextMainButton)}if(this.deviceWidth=window.innerWidth,!document.querySelector(this.options.gallerySelector+" [data-gallery] a"))if("popup"===this.options.zoomProps.type){this.galleryContainer.setAttribute("data-zoom","popup");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 23 23"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M21.5147 21.5147L1.51471 1.51471"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2"),e.setAttribute("stroke-linecap","round");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M1.51469 21.5147L21.5147 1.51471"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","2"),i.setAttribute("stroke-linecap","round"),t.appendChild(e),t.appendChild(i),this.popupClose=document.createElement("span"),this.popupClose.classList.add("popup-close"),this.popupImage=document.createElement("img"),this.popupImage.classList.add("popup-image"),this.popup=document.createElement("div"),this.popup.classList.add("popup"),this.popupClose.appendChild(t),this.popup.appendChild(this.popupClose),this.popup.appendChild(this.popupImage),this.gallery.appendChild(this.popup)}else"flyout"===this.options.zoomProps.type?(this.createZoomDiv(),this.deviceWidth<992?this.galleryContainer.setAttribute("data-zoom","inline"):this.galleryContainer.setAttribute("data-zoom","flyout")):"none"!==this.options.zoomProps.type&&(this.galleryContainer.setAttribute("data-zoom","inline"),this.createZoomDiv());this.launchGallery()}createNextSvg(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("fill","none"),t.setAttribute("viewBox","0 0 24 24");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M9 18L15 12L9 6"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2px"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),t.appendChild(e),t}createPrevSvg(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M15 18L9 12L15 6"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2px"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),t.appendChild(e),t}createZoomDiv(){this.zoomDiv=document.createElement("div"),this.zoomDiv.classList.add("display-zoom"),this.imageContainer.appendChild(this.zoomDiv)}getcarouselSliderScreenSize(){if(!this.carouselSlider)return;return this.isSliderVertical?this.carouselSlider.getBoundingClientRect().height:this.carouselSlider.getBoundingClientRect().width}getCarouselWrapperDimension(){return Array.from(this.carouselWrapper.children).length*this.carouselSlideSize}getMainImageWidth(){let t;return t="thumbnails"===this.options.carouselStyle?this.isSliderVertical?this.gallery.getBoundingClientRect().width-this.options.carouselOffset-this.options.thumbnailProps.width:this.gallery.getBoundingClientRect().width:"indicators"===this.options.carouselStyle&&this.isSliderVertical?this.gallery.getBoundingClientRect().width-this.options.carouselOffset-this.options.indicatorProps.size-2*this.options.indicatorProps.spacing:this.gallery.getBoundingClientRect().width,t}getPiioImages(){const t=window.piio.getPiioElements(this.images);window.piio.getPiioImages(t,this.options.zoomProps.ratio)}getThumbsInSight(){return Math.floor(this.carouselSliderScreenSize/(this.clientThumbSize+this.options.thumbnailProps.margin))}keepThumbSelectedOnSight(t){if(this.areAllThumbsInSight)return;const e=document.querySelector(".active .imgThumb-wrapper").getBoundingClientRect(),i=this.carouselSlider.getBoundingClientRect();if(e.right>i.right||e.left<i.left||e.top<i.top||e.bottom>i.bottom){h.default(this.carouselWrapper,e.width,t,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(t,this.thumbsInSight,this.carousel),this.carouselCounter=t;for(let e=t+1;e<t+this.thumbsInSight+1;e++)this.loadImage(this.thumbImages[e],{type:"thumbnail"})}}loadImage(t,{type:e}){if(void 0===t)return;if("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"!==t.getAttribute("src"))return;const i=t.getAttribute("data-image");t.src=i,this.options.piioDomainKey&&window.piio&&window.piio.onLoadImage(t,i)}loadThumbnailImagesInSight(){this.thumbImages=document.querySelectorAll(this.options.gallerySelector+" .imgThumb-wrapper img"),this.thumbsInSight=this.getThumbsInSight();const t=this.thumbsInSight<this.thumbImages.length?this.thumbsInSight+1:this.thumbsInSight;for(let e=0;e<t;e++)this.loadImage(this.thumbImages[e],{type:"thumbnail"})}setCarouselDimension(){const t=this.carouselWrapper.querySelectorAll(".slide .imgThumb-wrapper");if(this.isSliderVertical){this.carouselSlider.style.height=this.imageContainer.getBoundingClientRect().height+"px",this.carouselSlideSize=t[0].getBoundingClientRect().height+this.options.thumbnailProps.margin;const e=this.getCarouselWrapperDimension();this.carouselWrapper.style.height=e+"px"}else{this.carouselSlideSize=t[0].getBoundingClientRect().width+this.options.thumbnailProps.margin;const e=this.getCarouselWrapperDimension();this.carouselWrapper.style.width=e+"px"}}setNavIndicatorsDimension(){this.isSliderVertical?this.navIndicators.style.height=this.mainContainer.getBoundingClientRect().height+"px":this.navIndicators.style.width=this.getMainImageWidth+"px"}setPositionByIndexInMainSlider(t){t&&(this.targetIndex=t),t<this.images.length&&this.loadImage(this.images[t],{type:"main"}),this.currentTranslate=this.targetIndex*-this.imageWidth,this.prevTranslate=this.currentTranslate;const e=this.mainWrapper.querySelector(this.options.gallerySelector+" .current"),i=l.default(e,this.targetIndex,this.mainSlides);if(d.default(this.mainWrapper,e,i,this.targetIndex,this.imageWidth,this.contextMenu,this.openImageText),"thumbnails"===this.options.carouselStyle){const t=this.carouselWrapper.querySelector(this.options.gallerySelector+" .active"),e=Array.from(this.carouselWrapper.children),i=l.default(t,this.targetIndex,e),s=e.findIndex(t=>t===i),o=s<e.length-1?s+1:e.length-1;u.default(t,i,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),this.keepThumbSelectedOnSight(this.targetIndex),this.loadImage(this.thumbImages[o],{type:"thumbnail"})}if("indicators"===this.options.carouselStyle){this.currentIndicator=this.navIndicators.querySelector(" .active");const t=Array.from(this.navIndicators.children),e=l.default(this.currentIndicator,this.targetIndex,t);u.default(this.currentIndicator,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options)}}setSliderDimensions(){if(this.imageWidth=this.getMainImageWidth(),"string"==typeof this.options.aspectRatio&&this.options.aspectRatio.includes(":")){const t=this.options.aspectRatio.split(":"),e=this.imageWidth/parseInt(t[0],10)*parseInt(t[1],10);this.imageContainer.style.height=e+"px",this.mainWrapper.style.height=e+"px"}else"object"==typeof this.options.aspectRatio&&null!==this.options.aspectRatio?(this.imageContainer.style.height=this.options.aspectRatio.height+"px",this.mainWrapper.style.height=this.options.aspectRatio.height+"px"):(this.imageContainer.style.height=this.imageWidth+"px",this.mainWrapper.style.height=this.imageWidth+"px");this.imageContainer.style.width=this.imageWidth+"px",this.mainWrapper.style.width=this.imageWidth*this.mainSlides.length+"px"}setZoom(){this.zoomDiv&&(this.imageWidth=this.getMainImageWidth(),"none"!==this.options.zoomProps.type?this.imageContainer.style.cursor="zoom-in":this.imageContainer.style.cursor="grab",document.querySelector(this.options.gallerySelector+" [data-zoom=popup]")?(this.mainContainer.addEventListener("click",()=>{const t=this.mainWrapper.querySelector(this.options.gallerySelector+" .current img");this.popup.classList.add("open"),this.popupImage.setAttribute("src",""+t.getAttribute("data-image"))}),this.popupClose.addEventListener("click",()=>{this.popup.querySelector(" .popup-image").setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"),this.popup.classList.remove("open")})):document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&this.deviceWidth>=992?(this.isFlyoutVisible=!1,this.setZoomDivDimension(),"left"===this.options.zoomProps.position?(this.zoomDiv.style.left=`-${this.imageWidth}px`,this.zoomDiv.style.top="0px"):"top"===this.options.zoomProps.position?(this.zoomDiv.style.left="0px",this.zoomDiv.style.top=`-${this.imageHeight}px`):"bottom"===this.options.zoomProps.position?(this.zoomDiv.style.left="0px",this.zoomDiv.style.top=this.imageHeight+"px"):(this.zoomDiv.style.left=this.imageWidth+"px",this.zoomDiv.style.top="0px"),this.mainContainer.addEventListener("pointerover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("touchstart",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("mouseover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("click",this.flyoutHandler,!1),window.addEventListener("click",t=>{const e=t.target,i=this.mainContainer.contains(e),s=this.mainWrapper.querySelector(this.options.gallerySelector+" .current");!i&&document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&this.isFlyoutVisible&&(this.isFlyoutVisible=!1,s.classList.remove("flyout-open"),this.zoomDiv.classList.remove("show"),this.mainContainer.removeEventListener("mousemove",this.flyoutZoom,!0))})):"none"!==this.options.zoomProps.type&&(this.setZoomDivDimension(),this.zoomDiv.style.left="0px",this.zoomDiv.style.top="0px",this.zoomDiv.style.zIndex="1",this.mainContainer.addEventListener("pointerover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("touchstart",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("mouseover",this.handlePreloadBgZoom,!1),this.mainContainer.addEventListener("click",this.inlineEnterHandler,!1),this.zoomDiv.addEventListener("click",this.inlineLeaveHandler,!1),window.addEventListener("click",t=>{const e=t.target,i=this.mainContainer.contains(e),s=this.mainWrapper.querySelector(this.options.gallerySelector+" .current");i||"none"!==this.options.zoomProps.type&&(s.classList.remove("inline-open"),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.classList.remove("show"),this.mainContainer.removeEventListener("mousemove",this.inlineZoom,!1))})))}launchGallery(){this.mainSlides=Array.from(this.mainWrapper.querySelectorAll(" [data-gallery]")),"left"===this.options.carouselPosition||"right"===this.options.carouselPosition?this.isSliderVertical=!0:this.isSliderVertical=!1,this.imageWidth=this.getMainImageWidth(),this.setSliderDimensions();const t=this.options.themeProps.background;if(t.includes("hsl")||t.includes("hsla")){const e=t.split(","),i=parseInt(e[2].split("%")[0],10);i>=50?t.includes("hsla")?(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i-20}%,${e[3]}`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i-30}%,${e[3]}`):(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i-20}%)`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i-30}%)`):t.includes("hsla")?(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i+20}%,${e[3]}`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i+10}%,${e[3]}`):(this.hoverBackgroundColor=`${e[0]},${e[1]}, ${i+20}%)`,this.focusBackgroundColor=`${e[0]},${e[1]}, ${i+10}%)`)}const e=document.querySelector(this.options.gallerySelector);e.style.setProperty("--main-color",this.options.themeProps.color),e.style.setProperty("--bg-color",this.options.themeProps.background),e.style.setProperty("--bg-hover-color",this.hoverBackgroundColor),e.style.setProperty("--bg-focus-color",this.focusBackgroundColor),this.images=document.querySelectorAll(this.options.gallerySelector+"  [data-image]"),this.clientThumbSize=this.isSliderVertical?this.options.thumbnailProps.height:this.options.thumbnailProps.width,this.mainContainer.oncontextmenu=t=>{t.preventDefault();const e=t.clientX,i=t.clientY;this.contextMenu.style.top=i+"px",this.contextMenu.style.left=e+"px",this.contextMenu.classList.add("visible")},window.addEventListener("click",t=>{t.target.offsetParent!==this.contextMenu&&this.contextMenu.classList.remove("visible")});const i=navigator.language.split("-"),s=i.shift(),l=i.pop();if(void 0!==o.default[s]){const t=o.default[s];if(void 0!==l&&t.hasOwnProperty(l))this.openImageText=t[l].OpenImage;else{const e=Object.keys(t)[0];this.openImageText=t[e].OpenImage}}else this.openImageText=o.default.en.US.OpenImage;const c=this.images[0].getAttribute("data-image"),m=document.createElement("a");m.classList.add("item"),m.setAttribute("target","_blank"),m.setAttribute("rel","noopener noreferrer"),m.setAttribute("href",c),m.classList.add("item");const g=document.createTextNode(this.openImageText);if(m.appendChild(g),this.contextMenu.appendChild(m),this.carouselCounter=0,"none"!==this.options.mainNavigation){this.prevMainButton.classList.add("btn-main-"+this.options.mainNavigation),this.nextMainButton.classList.add("btn-main-"+this.options.mainNavigation),this.mainSlides.length<=1&&(this.prevMainButton.style.display="none",this.nextMainButton.style.display="none");const t=()=>{const t=this.mainWrapper.querySelector(".current").previousElementSibling,e=this.mainSlides.findIndex(e=>e===t);e>0&&this.loadImage(this.images[e],{type:"main"})};window.PointerEvent?this.prevMainButton.addEventListener("pointerover",t,!1):(this.prevMainButton.addEventListener("touchstart",t,!1),this.prevMainButton.addEventListener("mouseover",t,!1)),this.prevMainButton.addEventListener("click",t=>{const e=this.mainWrapper.querySelector(this.options.gallerySelector+" .current"),i=e.previousElementSibling,s=this.mainSlides.findIndex(t=>t===i);if(s>0&&this.loadImage(this.images[s],{type:"main"}),d.default(this.mainWrapper,e,i,s,this.imageWidth,this.contextMenu,this.openImageText),r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,s),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&p.default(this.gallery),this.mainWrapper.querySelector(" .inline-open")&&e.classList.toggle("inline-open"),this.mainContainer.style.backgroundImage="unset","thumbnails"===this.options.carouselStyle){const t=this.carouselWrapper.querySelector(" .active"),e=t.previousElementSibling;u.default(t,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),this.keepThumbSelectedOnSight(s)}"indicators"===this.options.carouselStyle&&(this.currentIndicator=this.navIndicators.querySelector(" .active"),this.prevIndicator=this.currentIndicator.previousElementSibling,u.default(this.currentIndicator,this.prevIndicator,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options))});const e=()=>{this.currentSlide=this.mainWrapper.querySelector(" .current"),this.nextSlide=this.currentSlide.nextElementSibling,this.nextIndex=this.mainSlides.findIndex(t=>t===this.nextSlide),this.nextIndex<this.images.length&&this.loadImage(this.images[this.nextIndex],{type:"main"})};window.PointerEvent?this.nextMainButton.addEventListener("pointerover",e,!1):(this.nextMainButton.addEventListener("touchstart",e,!1),this.nextMainButton.addEventListener("mouseover",e,!1)),this.nextMainButton.addEventListener("click",t=>{const e=this.mainWrapper.querySelector(this.options.gallerySelector+" .current"),i=e.nextElementSibling;if(this.nextIndex=this.mainSlides.findIndex(t=>t===i),this.nextIndex>0&&this.loadImage(this.images[this.nextIndex],{type:"main"}),d.default(this.mainWrapper,e,i,this.nextIndex,this.imageWidth,this.contextMenu,this.openImageText),r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.nextIndex),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&p.default(this.gallery),this.mainWrapper.querySelector(" .inline-open")&&this.currentSlide.classList.toggle("inline-open"),this.mainContainer.style.backgroundImage="unset","thumbnails"===this.options.carouselStyle){const t=this.carouselWrapper.querySelector(" .active"),e=t.nextElementSibling,i=Array.from(this.carouselWrapper.querySelectorAll(".slide")),s=i.findIndex(t=>t===e),o=s<i.length-1?s+1:i.length-1;u.default(t,e,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),this.keepThumbSelectedOnSight(this.nextIndex),this.loadImage(this.thumbImages[o],{type:"thumbnail"})}if("indicators"===this.options.carouselStyle){this.currentIndicator=this.navIndicators.querySelector(" .active");const t=this.currentIndicator.nextElementSibling;u.default(this.currentIndicator,t,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options)}})}function y(t){return t.type.includes("touch")?t.touches[0].clientX:t.pageX}function v(t){return t.type.includes("touch")?t.touches[0].clientY:t.pageY}this.gallery.addEventListener("dragstart",t=>t.preventDefault()),this.startPosition=0,this.currentTranslate=0,this.prevTranslate=0,this.targetIndex=0;const S=t=>e=>{this.targetIndex=t,this.startPosition=y(e),this.isMainSliderSwiping=!0},f=t=>{if(this.isMainSliderSwiping){const e=y(t);this.currentTranslate=this.prevTranslate+e-this.startPosition}},b=t=>{const e=y(t);if(!(document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&this.deviceWidth<992&&document.querySelector(this.options.gallerySelector+" .inline-open")||document.querySelector(this.options.gallerySelector+" [data-zoom=inline]")&&document.querySelector(this.options.gallerySelector+" .inline-open")||document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")&&document.querySelector(this.options.gallerySelector+" .flyout-open"))){if(Math.abs(e-this.startPosition)>=10){if(this.hasCursorMoved=!0,(document.querySelector(this.options.gallerySelector+" [data-zoom=inline]")||document.querySelector(this.options.gallerySelector+" [data-zoom=flyout]")||document.querySelector(this.options.gallerySelector+" [data-zoom=popup]"))&&!window.matchMedia("(pointer: coarse)").matches){const t=e=>{e.stopPropagation(),this.imageContainer.removeEventListener("click",t,!0)};this.imageContainer.addEventListener("click",t,!0)}"slide"===this.options.transition&&p.default(this.gallery);const t=this.currentTranslate-this.prevTranslate;t<-10&&this.targetIndex<this.mainSlides.length-1&&(this.targetIndex+=1),t>10&&this.targetIndex>0&&(this.targetIndex-=1),this.setPositionByIndexInMainSlider(this.targetIndex),"fade"===this.options.transition&&a.default(this.gallery),"none"!==this.options.mainNavigation&&r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.targetIndex)}else this.hasCursorMoved=!1;this.isMainSliderSwiping=!1}};if(this.mainSlides.forEach((t,e)=>{if(t.addEventListener("dragstart",t=>t.preventDefault()),document.querySelector(this.options.gallerySelector+" [data-gallery] a")){const t=document.querySelector(this.options.gallerySelector+` [data-gallery=item-${e}] a`);t&&(t.onclick=()=>{if(this.hasCursorMoved)return!1})}window.PointerEvent?(t.addEventListener("pointerdown",S(e),!1),t.addEventListener("pointermove",f,!1),t.addEventListener("pointerup",b,!1),t.addEventListener("pointercancel",b,!1)):(t.addEventListener("touchdown",S(e),!1),t.addEventListener("touchmove",f,!1),t.addEventListener("touchup",b,!1),t.addEventListener("touchcancel",b,!1),t.addEventListener("mousedown",S(e),!1),t.addEventListener("mousemove",f,!1),t.addEventListener("mouseup",b,!1))}),this.setZoom(),"thumbnails"!==this.options.carouselStyle&&"indicators"!==this.options.carouselStyle||(this.isSliderVertical?(this.galleryContainer.classList.add(this.options.carouselPosition),"thumbnails"===this.options.carouselStyle?this.carouselWrapper.style.flexDirection="column":this.navIndicators.style.flexDirection="column",this.carouselOffset.style.width=this.options.carouselOffset+"px"):(this.galleryContainer.classList.add(this.options.carouselPosition),this.carouselOffset.style.height=this.options.carouselOffset+"px")),this.carouselSliderScreenSize=this.getcarouselSliderScreenSize(),"thumbnails"===this.options.carouselStyle){const t=Array.from(this.carouselWrapper.children),e=this.carouselWrapper.querySelectorAll(".slide .imgThumb-wrapper");t.forEach((t,i)=>{const s=e[i],o=this.carouselWrapper.querySelectorAll(".slide")[i];s.style.width=this.options.thumbnailProps.width+"px",s.style.height=this.options.thumbnailProps.height+"px",o.style.height=this.isSliderVertical?this.options.thumbnailProps.height+this.options.thumbnailProps.margin+"px":this.options.thumbnailProps.height+"px"}),this.setCarouselDimension(),console.log(this.options.piioDomainKey),this.options.piioDomainKey&&window.piio&&this.getPiioImages(),this.loadThumbnailImagesInSight();document.querySelector(this.options.gallerySelector).style.setProperty("--thumbBorderWidth",this.options.thumbnailProps.selectedBorderWidth+"px");const i=this.carouselWrapper.querySelector(".active").querySelector(".imgThumb-wrapper");"border"===this.options.thumbnailProps.selectedStyle?i.classList.add("border-"+this.options.thumbnailProps.selectedBorderPosition):i.classList.add("overlay"),this.carouselSlider.addEventListener("mouseover",e=>{const i=e.target.closest(".slide");i&&(this.targetIndex=t.findIndex(t=>t===i),this.loadImage(this.images[this.targetIndex],{type:"main"}))});this.getCarouselWrapperDimension()<this.carouselSliderScreenSize&&(this.areAllThumbsInSight=!0),this.carouselSlider.addEventListener("click",e=>{this.mainWrapper.querySelector(" .inline-open")?this.mainWrapper.querySelector(" .inline-open").classList.remove("inline-open"):this.mainWrapper.querySelector(" .flyout-open")&&this.mainWrapper.querySelector(" .flyout-open").classList.remove("flyout-open");const i=e.target.closest(".slide");if(!i)return;this.currentSlide=this.mainWrapper.querySelector(" .current");const s=this.carouselWrapper.querySelector(" .active");this.targetIndex=t.findIndex(t=>t===i);const o=this.mainSlides[this.targetIndex];this.loadImage(this.thumbImages[this.targetIndex+1],{type:"thumbnail"}),d.default(this.mainWrapper,this.currentSlide,o,this.targetIndex,this.imageWidth,this.contextMenu,this.openImageText),"none"!==this.options.mainNavigation&&r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.targetIndex),u.default(s,i,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&p.default(this.gallery)});const s=()=>{this.loadedThumbs=this.carouselWrapper.querySelectorAll('img:not([src*="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"])'),this.loadedThumbs.length<=this.thumbImages.length&&this.loadImage(this.thumbImages[this.loadedThumbs.length],{type:"thumbnail"})},o=this.isSliderVertical?t[0].getBoundingClientRect().height:t[0].getBoundingClientRect().width;if("none"!==this.options.thumbnailProps.navigationShape){if(this.prevCarousel.classList.add("btn-carousel-"+this.options.thumbnailProps.navigationShape),this.nextCarousel.classList.add("btn-carousel-"+this.options.thumbnailProps.navigationShape),this.isSliderVertical)if("circle"===this.options.thumbnailProps.navigationShape||"radius"===this.options.thumbnailProps.navigationShape)this.prevCarousel.style.transform="translateX(25%) rotate(90deg)",this.prevCarousel.style.transformOrigin="top left",this.prevCarousel.style.top="0px",this.prevCarousel.style.left="50%",this.nextCarousel.style.top="unset",this.nextCarousel.style.bottom="0px",this.nextCarousel.style.right="50%",this.nextCarousel.style.transform="translateX(-25%) rotate(90deg)",this.nextCarousel.style.transformOrigin="right bottom";else if("square"===this.options.thumbnailProps.navigationShape)this.prevCarousel.style.transform="translateX(50%) rotate(90deg)",this.prevCarousel.style.transformOrigin="top left",this.prevCarousel.style.top="0px",this.prevCarousel.style.left="50%",this.nextCarousel.style.top="unset",this.nextCarousel.style.bottom="0px",this.nextCarousel.style.right="50%",this.nextCarousel.style.transform="translateX(-50%) rotate(90deg)",this.nextCarousel.style.transformOrigin="right bottom";else{const t=this.prevCarousel.querySelector(" svg"),e=this.nextCarousel.querySelector(" svg");this.prevCarousel.style.height="24px",this.prevCarousel.style.top="0px",this.prevCarousel.style.transform="unset",this.prevCarousel.style.width="100%",t.style.transform="rotate(90deg)",this.nextCarousel.style.height="24px",this.nextCarousel.style.width="100%",this.nextCarousel.style.top="unset",this.nextCarousel.style.transform="unset",this.nextCarousel.style.bottom="0px",e.style.transform="rotate(90deg)"}const e=this.isSliderVertical?this.carouselWrapper.getBoundingClientRect().height:this.carouselWrapper.getBoundingClientRect().width;this.areAllThumbsInSight||t.length<=1?(this.prevCarousel.style.display="none",this.nextCarousel.style.display="none"):e<this.carouselSliderScreenSize&&(this.nextCarousel.style.display="none"),this.prevCarousel.addEventListener("click",()=>{this.carouselCounter>0&&this.carouselCounter--,h.default(this.carouselWrapper,o,this.carouselCounter,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.carouselCounter,this.thumbsInSight,this.carousel)}),window.PointerEvent?this.nextCarousel.addEventListener("pointerover",s,!1):(this.nextCarousel.addEventListener("touchstart",s,!1),this.nextCarousel.addEventListener("mouseover",s,!1)),this.nextCarousel.addEventListener("click",()=>{s(),this.carouselCounter+this.thumbsInSight<=t.length-1&&this.carouselCounter++,h.default(this.carouselWrapper,o,this.carouselCounter,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.carouselCounter,this.thumbsInSight,this.carousel)})}let l=!1,c=0,m=0,g=0;const S=t=>t=>{c=this.isSliderVertical?v(t):y(t),l=!0;const e=window.getComputedStyle(this.carouselWrapper).getPropertyValue("transform");"none"!==e&&(m=this.isSliderVertical?parseInt(e.split(",")[5].trim(),10):parseInt(e.split(",")[4].trim(),10))},f=t=>{if(l){const e=this.isSliderVertical?v(t):y(t);g=e-c}},b=e=>{const i=this.isSliderVertical?v(e):y(e);if(Math.abs(i-c)>=10){const e=m+g;e<m&&this.carouselCounter<t.length-this.thumbsInSight?(this.carouselCounter++,s()):e>m&&this.carouselCounter>0&&this.carouselCounter--,h.default(this.carouselWrapper,o,this.carouselCounter,this.carouselSlider,this.options.thumbnailProps.margin,this.isSliderVertical),"none"!==this.options.thumbnailProps.navigationShape&&n.default(this.carouselCounter,this.thumbsInSight,this.carousel)}l=!1};t.forEach((t,e)=>{t.addEventListener("dragstart",t=>t.preventDefault()),window.PointerEvent?(t.addEventListener("pointerdown",S(e),!0),t.addEventListener("pointermove",f,!0),t.addEventListener("pointerup",b,!0),t.addEventListener("pointercancel",b,!0)):(t.addEventListener("touchdown",S(e),!0),t.addEventListener("touchmove",f,!0),t.addEventListener("touchup",b,!0),t.addEventListener("touchcancel",b,!0),t.addEventListener("mousedown",S(e),!0),t.addEventListener("mousemove",f,!0),t.addEventListener("mouseup",b,!0))})}if("indicators"===this.options.carouselStyle){const t=Array.from(this.navIndicators.children);t.forEach((t,e)=>{const i=this.navIndicators.querySelectorAll(" .indicator")[e];i.classList.add("indicator-"+this.options.indicatorProps.shape),i.style.margin=this.options.indicatorProps.spacing+"px","line"===this.options.indicatorProps.shape?this.isSliderVertical?(i.style.height=this.options.indicatorProps.size+"px",i.style.width="3px"):(i.style.height="3px",i.style.width=this.options.indicatorProps.size+"px"):(i.style.height=this.options.indicatorProps.size+"px",i.style.width=this.options.indicatorProps.size+"px")}),this.setNavIndicatorsDimension(),this.navIndicators.addEventListener("click",e=>{this.mainWrapper.querySelector(" .inline-open")?this.mainWrapper.querySelector(" .inline-open").classList.remove("inline-open"):this.mainWrapper.querySelector(" .flyout-open")&&this.mainWrapper.querySelector(" .flyout-open").classList.remove("flyout-open");const i=e.target.closest(".indicator");if(!i)return;const s=this.mainWrapper.querySelector(" .current"),o=this.navIndicators.querySelector(" .active");this.targetIndex=t.findIndex(t=>t===i);const n=this.mainSlides[this.targetIndex];this.loadImage(this.images[this.targetIndex],{type:"main"}),d.default(this.mainWrapper,s,n,this.targetIndex,this.imageWidth,this.contextMenu,this.openImageText),this.prevMainButton&&this.nextMainButton&&r.default(this.mainSlides,this.prevMainButton,this.nextMainButton,this.targetIndex),u.default(o,i,this.options.thumbnailProps.selectedStyle,this.options.thumbnailProps.selectedBorderPosition,this.options),"fade"===this.options.transition&&a.default(this.gallery),"slide"===this.options.transition&&p.default(this.gallery)})}this.options.piioDomainKey&&window.piio&&this.getPiioImages(),this.loadImage(this.images[0],{type:"main"});window.addEventListener("resize",()=>{const t=this.mainWrapper.querySelector(" .current");"thumbnails"===this.options.carouselStyle&&this.setCarouselDimension(),"indicators"===this.options.carouselStyle&&this.setNavIndicatorsDimension();const e=this.deviceWidth;if(this.deviceWidth=window.innerWidth,this.setSliderDimensions(),"thumbnails"===this.options.carouselStyle&&this.loadThumbnailImagesInSight(),"flyout"===this.options.zoomProps.type&&this.zoomDiv?this.deviceWidth<992?(this.mainWrapper.querySelector(" .flyout-open")&&this.mainWrapper.querySelector(" .flyout-open").classList.remove("flyout-open"),this.mainContainer.removeEventListener("click",this.flyoutHandler,!1),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.style.backgroundPosition="unset",this.galleryContainer.setAttribute("data-zoom","inline"),this.setZoom()):this.deviceWidth>=992&&(this.mainWrapper.querySelector(" .inline-open")&&this.mainWrapper.querySelector(" .inline-open").classList.remove("inline-open"),this.mainContainer.removeEventListener("click",this.inlineEnterHandler,!1),this.zoomDiv.removeEventListener("click",this.inlineLeaveHandler,!1),this.zoomDiv.style.backgroundImage="unset",this.zoomDiv.style.backgroundPosition="unset",this.galleryContainer.setAttribute("data-zoom","flyout"),this.setZoom()):"inline"===this.options.zoomProps.type&&this.zoomDiv&&this.setZoom(),e<this.deviceWidth){const t=this.mainWrapper.querySelectorAll('img:not([src*="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"])');t.forEach(t=>t.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"));for(let e=0;e<t.length;e++)this.loadImage(this.images[e],{type:"main"})}this.imageWidth=this.getMainImageWidth();const i=this.mainSlides.findIndex(e=>e===t);d.default(this.mainWrapper,t,t,i,this.imageWidth,this.contextMenu,this.openImageText)})}}const g={init:t=>new m(t)};e.piioGallery=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0);window.piioGallery=s.piioGallery;var o=i(0);Object.defineProperty(e,"piioGallery",{enumerable:!0,get:function(){return o.piioGallery}})},function(t){t.exports=JSON.parse('{"de":{"DE":{"OpenImage":"Originalbild in neuem Tab öffnen"}},"en":{"GB":{"OpenImage":"Open Original Image in New Tab"},"US":{"OpenImage":"Open Original Image in New Tab"}},"es":{"MX":{"OpenImage":"Abrir la Imagen Original en una Nueva Pestaña"},"ES":{"OpenImage":"Abrir la Imagen Original en una Nueva Pestaña"}},"fr":{"FR":{"OpenImage":"Ouvrir l\'image originale dans un nouvel onglet"}},"it":{"IT":{"OpenImage":"Aprire l\'immagine originale in una nuova scheda"}},"pt":{"PT":{"OpenImage":"Abrir a Imagem Original em uma Nova Guia"},"BR":{"OpenImage":"Abrir a Imagem Original em uma Nova Guia"}},"ru":{"RU":{"OpenImage":"Открыть исходное изображение в новой вкладке"}}}')},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e,i)=>{const s=i.querySelector(".carousel-slider .carousel-wrapper"),o=Array.from(s.children);if(document.querySelector(".carousel")){const s=i.querySelector("#prevCarousel"),n=i.querySelector("#nextCarousel");0===t&&o.length>1?(s.style.display="none",n.style.display="block"):t+e>o.length-1?(s.style.display="block",n.style.display="none"):(s.style.display="block",n.style.display="block")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s){0===s?(e.style.display="none",i.style.display="block"):s===t.length-1?(e.style.display="block",i.style.display="none"):(e.style.display="block",i.style.display="block")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=t.querySelector(".current");e.classList.add("fade-in"),setTimeout(()=>{e.classList.remove("fade-in")},500)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){const s=i.findIndex(e=>e===t);let o;return o=s>e?t.previousElementSibling:s<e?t.nextElementSibling:t,o}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,o,n){const r=e*i,a=n?s.getBoundingClientRect().height:s.getBoundingClientRect().width,l=n?t.getBoundingClientRect().height:t.getBoundingClientRect().width;t.style.transform=r+a<l?n?`translateY( -${r}px)`:`translateX( -${r}px)`:n?`translateY( -${l-a-o}px)`:`translateX( -${l-a-o}px)`}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,o,n,r){t.style.transform=`translateX( -${o*s}px)`,e.classList.remove("current"),i.classList.add("current");const a=i.querySelector("[data-image]").getAttribute("data-image"),l=document.createElement("a");l.classList.add("item"),l.setAttribute("target","_blank"),l.setAttribute("rel","noopener noreferrer"),l.setAttribute("href",a),l.classList.add("item");const h=document.createTextNode(r);l.appendChild(h),n.innerHTML=" ",n.appendChild(l)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.querySelector(".main-wrapper").classList.add("slide")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,o){const n=t.querySelector(o.gallerySelector+" .imgThumb-wrapper"),r=e.querySelector(o.gallerySelector+" .imgThumb-wrapper");t.classList.remove("active"),n&&("border"===i?n.classList.remove("border-"+s):n.classList.remove("overlay"),"border"===i?r.classList.add("border-"+s):r.classList.add("overlay")),e.classList.add("active")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zoom=void 0;e.zoom=t=>{let e,i;e=t.clientX?t.clientX:t.touches?t.touches[0].clientX:0,i=t.clientY?t.clientY:t.touches?t.touches[0].clientY:0;const s=t.currentTarget,o=e-s.getBoundingClientRect().left,n=i-s.getBoundingClientRect().top;let r=o/s.offsetWidth*100,a=n/s.offsetHeight*100;return r=0<=r&&r<=100?r:0>r?0:100,a=0<=a&&a<=100?a:0>a?0:100,r+"%"+a+"%"}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdHlwZXMvZ2FsbGVyeU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L3NyYy9waWlvLWdhbGxlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdXRpbHMvZGlzYWJsZUNhcm91c2VsQnV0dG9ucy5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L3NyYy91dGlscy9kaXNhYmxlTWFpbkJ1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdXRpbHMvZmFkZUluLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL2dldFRhcmdldEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9zcmMvdXRpbHMvbW92ZUNhcm91c2VsLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL21vdmVNYWluU2xpZGVyLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL3NsaWRlLmpzIiwid2VicGFjazovLy8uL2Rpc3Qvc3JjL3V0aWxzL3VwZGF0ZU5hdkVsZW1TZWxlY3RlZC5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L3NyYy91dGlscy96b29tLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19pbXBvcnREZWZhdWx0IiwidGhpcyIsIm1vZCIsInBpaW9HYWxsZXJ5IiwibGFuZ3VhZ2VzX2pzb25fMSIsImRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMSIsImRpc2FibGVNYWluQnV0dG9uc18xIiwiZmFkZUluXzEiLCJnZXRUYXJnZXRFbGVtZW50XzEiLCJtb3ZlQ2Fyb3VzZWxfMSIsIm1vdmVNYWluU2xpZGVyXzEiLCJzbGlkZV8xIiwidXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEiLCJ6b29tXzEiLCJHYWxsZXJ5Iiwib3B0aW9ucyIsInJlc3BvbnNpdmVPcHRpb24iLCJhcmVBbGxUaHVtYnNJblNpZ2h0IiwiY3VycmVudFRyYW5zbGF0ZSIsImRlZmF1bHRJbmRpY2F0b3JQcm9wcyIsInNoYXBlIiwic2l6ZSIsInNwYWNpbmciLCJkZWZhdWx0VGh1bWJuYWlsUHJvcHMiLCJoZWlnaHQiLCJtYXJnaW4iLCJuYXZpZ2F0aW9uU2hhcGUiLCJzZWxlY3RlZEJvcmRlclBvc2l0aW9uIiwic2VsZWN0ZWRCb3JkZXJXaWR0aCIsInNlbGVjdGVkU3R5bGUiLCJ3aWR0aCIsImRlZmF1bHRab29tUHJvcHMiLCJwb3NpdGlvbiIsInJhdGlvIiwidHlwZSIsImRldmljZVdpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhhc0N1cnNvck1vdmVkIiwiaXNNYWluU2xpZGVyU3dpcGluZyIsInByZXZUcmFuc2xhdGUiLCJzdGFydFBvc2l0aW9uIiwidGFyZ2V0SW5kZXgiLCJmbHlvdXRIYW5kbGVyIiwiaXNGbHlvdXRWaXNpYmxlIiwibWFpbldyYXBwZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiem9vbURpdiIsImFkZCIsIm1haW5Db250YWluZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZmx5b3V0Wm9vbSIsImhhbmRsZVByZWxvYWRCZ1pvb20iLCJzdHlsZSIsInpJbmRleCIsInJlbW92ZSIsImJhY2tncm91bmRJbWFnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJ6b29tIiwiY3VycmVudEltYWdlIiwicGlpb0RvbWFpbktleSIsImRhdGFJbWFnZVNyYyIsImdldEF0dHJpYnV0ZSIsInNyYyIsImlubGluZUVudGVySGFuZGxlciIsImdhbGxlcnlTZWxlY3RvciIsImlubGluZVpvb20iLCJpbmxpbmVMZWF2ZUhhbmRsZXIiLCJzZXRab29tRGl2RGltZW5zaW9uIiwiaW1hZ2VXaWR0aCIsImFzcGVjdFJhdGlvIiwiaW5jbHVkZXMiLCJmaWVsZHMiLCJzcGxpdCIsImltYWdlSGVpZ2h0IiwicGFyc2VJbnQiLCJnYWxsZXJ5IiwidW5kZWZpbmVkIiwidHJhbnNpdGlvbiIsInRoZW1lUHJvcHMiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ2YXJpYW50U2VsZWN0b3IiLCJyZXNwb25zaXZlIiwibW9iaWxlIiwidGFibGV0IiwiY2Fyb3VzZWxPZmZzZXQiLCJjYXJvdXNlbFBvc2l0aW9uIiwiY2Fyb3VzZWxTdHlsZSIsImluZGljYXRvclByb3BzIiwibWFpbk5hdmlnYXRpb24iLCJ0aHVtYm5haWxQcm9wcyIsInpvb21Qcm9wcyIsImRvY3VtZW50IiwicGlpbyIsInNldFRpbWVvdXQiLCJyZW5kZXIiLCJ2YXJpYW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbWFnZXMiLCJ2YXJpYW50c0FycmF5IiwiQXJyYXkiLCJmcm9tIiwiY2hpbGRyZW4iLCJ0YXJnZXRMaXN0IiwidGFyZ2V0IiwiY2xvc2VzdCIsInZhcmlhbnRJbmRleCIsImZpbmRJbmRleCIsImxpc3QiLCJzdGFydCIsImNsaWVudEl0ZW1zIiwiY3JlYXRlRWxlbWVudCIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJjaGlsZFdyYXBwZXIiLCJzZXRBdHRyaWJ1dGUiLCJjbG9uZSIsImNsb25lTm9kZSIsImFwcGVuZENoaWxkIiwiZ2FsbGVyeUNvbnRhaW5lciIsImltYWdlQ29udGFpbmVyIiwiY29udGV4dE1lbnUiLCJpbm5lckhUTUwiLCJuYXZJbmRpY2F0b3JzIiwiY2Fyb3VzZWwiLCJjYXJvdXNlbFNsaWRlciIsImNhcm91c2VsV3JhcHBlciIsInByZXZDYXJvdXNlbFN2ZyIsImNyZWF0ZVByZXZTdmciLCJwcmV2Q2Fyb3VzZWwiLCJuZXh0Q2Fyb3VzZWxTdmciLCJjcmVhdGVOZXh0U3ZnIiwibmV4dENhcm91c2VsIiwiaW1nIiwiaW5kaWNhdG9yIiwidGh1bWJJbWFnZSIsImltZ1RodW1iV3JhcHBlciIsInRodW1iU2xpZGUiLCJwcmV2TWFpblN2ZyIsInByZXZNYWluQnV0dG9uIiwibmV4dE1haW5TdmciLCJuZXh0TWFpbkJ1dHRvbiIsImNsb3NlU3ZnIiwiY3JlYXRlRWxlbWVudE5TIiwibGluZTFQYXRoIiwibGluZTJQYXRoIiwicG9wdXBDbG9zZSIsInBvcHVwSW1hZ2UiLCJwb3B1cCIsImNyZWF0ZVpvb21EaXYiLCJsYXVuY2hHYWxsZXJ5IiwibmV4dFN2ZyIsIm5leHRQYXRoIiwicHJldlN2ZyIsInByZXZQYXRoIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVuZ3RoIiwiY2Fyb3VzZWxTbGlkZVNpemUiLCJpbWFnZVNjcmVlbldpZHRoIiwicGlpb0VsZW1lbnRzIiwiZ2V0UGlpb0VsZW1lbnRzIiwiZ2V0UGlpb0ltYWdlcyIsIk1hdGgiLCJmbG9vciIsImNhcm91c2VsU2xpZGVyU2NyZWVuU2l6ZSIsImNsaWVudFRodW1iU2l6ZSIsInNlbGVjdGVkVGh1bWJTaXplIiwiY2Fyb3VzZWxTbGlkZXJTaXplIiwicmlnaHQiLCJsZWZ0IiwidG9wIiwiYm90dG9tIiwiZGVmYXVsdCIsImlzU2xpZGVyVmVydGljYWwiLCJ0aHVtYnNJblNpZ2h0IiwiY2Fyb3VzZWxDb3VudGVyIiwibG9hZEltYWdlIiwidGh1bWJJbWFnZXMiLCJpbWFnZSIsIm9uTG9hZEltYWdlIiwiZ2V0VGh1bWJzSW5TaWdodCIsInRodW1ic1RvTG9hZCIsImNhcm91c2VsSW1hZ2VzV3JhcHBlcnMiLCJkaW1lbnNpb24iLCJnZXRDYXJvdXNlbFdyYXBwZXJEaW1lbnNpb24iLCJnZXRNYWluSW1hZ2VXaWR0aCIsImN1cnJlbnRTbGlkZSIsInRhcmdldFNsaWRlIiwibWFpblNsaWRlcyIsIm9wZW5JbWFnZVRleHQiLCJjdXJyZW50VGh1bWIiLCJjYXJvdXNlbFNsaWRlcyIsInRhcmdldFRodW1iIiwibmV4dFRodW1iSW5kZXgiLCJ0aHVtYkltYWdlVG9Mb2FkIiwia2VlcFRodW1iU2VsZWN0ZWRPblNpZ2h0IiwiY3VycmVudEluZGljYXRvciIsImluZGljYXRvcnMiLCJ0YXJnZXRJbmRpY2F0b3IiLCJjdXJzb3IiLCJpc0NsaWNrSW5zaWRlIiwiY29udGFpbnMiLCJzZXRTbGlkZXJEaW1lbnNpb25zIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3JXaXRob3V0U3BhY2VzIiwiaHNsTHVtaW5vc2l0eSIsImhvdmVyQmFja2dyb3VuZENvbG9yIiwiZm9jdXNCYWNrZ3JvdW5kQ29sb3IiLCJzZWxlY3RvclN0eWxlIiwic2V0UHJvcGVydHkiLCJvbmNvbnRleHRtZW51IiwibW91c2VYIiwiY2xpZW50WCIsIm1vdXNlWSIsImNsaWVudFkiLCJvZmZzZXRQYXJlbnQiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsIm5hdmlnYXRvciIsImxhbmd1YWdlIiwic2hpZnQiLCJjb3VudHJ5IiwicG9wIiwianNvbkxhbmd1YWdlIiwiT3BlbkltYWdlIiwiZmlyc3QiLCJrZXlzIiwiZW4iLCJVUyIsIm9yaWdpbmFsVVJMIiwiYW5jaG9ydGFnIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwiZGlzcGxheSIsImhhbmRsZVByZXZNYWluSW1hZ2VMb2FkIiwicHJldlNsaWRlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInByZXZJbmRleCIsIlBvaW50ZXJFdmVudCIsInByZXZUaHVtYiIsInByZXZJbmRpY2F0b3IiLCJoYW5kbGVOZXh0TWFpbkltYWdlTG9hZCIsIm5leHRTbGlkZSIsIm5leHRFbGVtZW50U2libGluZyIsIm5leHRJbmRleCIsIm5leHRUaHVtYiIsInRodW1ic0FycmF5IiwibmV4dERvdCIsImdldHBvc2l0aW9uWCIsInRvdWNoZXMiLCJwYWdlWCIsImdldHBvc2l0aW9uWSIsInBhZ2VZIiwiZ2VzdHVyZVN0YXJ0IiwiZ2VzdHVyZU1vdmUiLCJjdXJyZW50UG9zaXRpb24iLCJnZXN0dXJlRW5kIiwiZXYiLCJlbmRQb3NpdGlvbiIsImFicyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiY2FwdHVyZUNsaWNrIiwic3RvcFByb3BhZ2F0aW9uIiwibW92ZWRCeSIsInNldFBvc2l0aW9uQnlJbmRleEluTWFpblNsaWRlciIsImFuY2hvclRhZyIsIm9uY2xpY2siLCJzZXRab29tIiwiZmxleERpcmVjdGlvbiIsImdldGNhcm91c2VsU2xpZGVyU2NyZWVuU2l6ZSIsImltYWdlVGh1bWJXcmFwcGVyIiwic2xpZGVUaHVtYiIsInNldENhcm91c2VsRGltZW5zaW9uIiwiY29uc29sZSIsImxvZyIsImxvYWRUaHVtYm5haWxJbWFnZXNJblNpZ2h0IiwidGFyZ2V0V3JhcHBlciIsImhhbmRsZVRodW1iTG9hZEltYWdlIiwibG9hZGVkVGh1bWJzIiwidGh1bWJJbWFnZVNpemUiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm1PcmlnaW4iLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJjYXJvdXNlbFdyYXBwZXJTaXplIiwiaXNDYXJvdXNlbFN3aXBpbmciLCJjYXJvdXNlbFN0YXJ0UG9zaXRpb24iLCJjYXJvdXNlbFByZXZUcmFuc2xhdGUiLCJjYXJvdXNlbEN1cmVudFRyYW5zbGF0ZSIsImdlc3R1cmVTdGFydENhcm91c2VsIiwicG9zIiwidHJhbnNmb3JtTWF0cml4IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJ0cmltIiwiZ2VzdHVyZU1vdmVDYXJvdXNlbCIsImNhcm91c2VsQ3VycmVudFBvc2l0aW9uIiwiZ2VzdHVyZUVuZENhcm91c2VsIiwiY2Fyb3VzZWxFbmRQb3NpdGlvbiIsIm5ld1RyYW5zbGF0ZSIsInRodW1iIiwic2xpZGVJbmRpY2F0b3IiLCJzZXROYXZJbmRpY2F0b3JzRGltZW5zaW9uIiwidGFyZ2V0RG90IiwicHJldmlvdXNEZXZpY2VXaXRoIiwiZG93bmxvYWRlZE1haW5JbWFnZXMiLCJHYWxsZXJ5T2JqZWN0IiwiaW5pdCIsIm9wdHMiLCJnYWxsZXJ5T2JqZWN0XzEiLCJnYWxsZXJ5T2JqZWN0XzIiLCJjb3VudGVyIiwiaW1hZ2VzSW5TaWdodCIsImN1cnJlbnQiLCJjdXJyZW50RWxlbWVudCIsImVsZW1lbnRzQXJyYXkiLCJjdXJyZW50SW5kZXgiLCJ0YXJnZXRFbGVtZW50IiwibmF2V3JhcHBlciIsIm5hdkVsZW1lbnRTaXplIiwibmF2Q29udGFpbmVyIiwibW92ZUJ5IiwibmF2Q29udGFpbmVyU2l6ZSIsIm5hdldyYXBwZXJTaXplIiwibm9kZSIsImN1cnJlbnRXcmFwcGVyIiwiaW1hZ2Vab29tIiwiY3VycmVudFRhcmdldCIsIm9mZnNldFgiLCJvZmZzZXRZIiwieEFtb3VudCIsIm9mZnNldFdpZHRoIiwieUFtb3VudCIsIm9mZnNldEhlaWdodCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04s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LEVBQ1FGLEVBQVovSixFQUFFK0osUUFBb0IvSixFQUFFK0osUUFBVS9KLEVBQUVtTSxRQUFvQm5NLEVBQUVtTSxRQUFRLEdBQUdwQyxRQUFvQixFQUM3RUUsRUFBWmpLLEVBQUVpSyxRQUFvQmpLLEVBQUVpSyxRQUFVakssRUFBRW1NLFFBQW9Cbk0sRUFBRW1NLFFBQVEsR0FBR2xDLFFBQW9CLEVBQ3pGLE1BQU1nSCxFQUFZalIsRUFBRWtSLGNBQ2RDLEVBQVVwSCxFQUFVa0gsRUFBVTNLLHdCQUF3QmMsS0FDdERnSyxFQUFVbkgsRUFBVWdILEVBQVUzSyx3QkFBd0JlLElBQzVELElBQUlnSyxFQUFVRixFQUFVRixFQUFVSyxZQUFjLElBQzVDQyxFQUFVSCxFQUFVSCxFQUFVTyxhQUFlLElBR2pELE9BRm1DSCxFQUFsQyxHQUFLQSxHQUFXQSxHQUFXLElBQWlCQSxFQUFVLEVBQUlBLEVBQW9CLEVBQWMsSUFDMURFLEVBQWxDLEdBQUtBLEdBQVdBLEdBQVcsSUFBaUJBLEVBQVUsRUFBSUEsRUFBb0IsRUFBYyxJQUN0RkYsRUFBVSxJQUFNRSxFQUFVIiwiZmlsZSI6InBpaW9HYWxsZXJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBpaW9HYWxsZXJ5ID0gdm9pZCAwO1xuY29uc3QgbGFuZ3VhZ2VzX2pzb25fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vcmVzb3VyY2VzL2xhbmd1YWdlcy5qc29uXCIpKTtcbmNvbnN0IGRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvZGlzYWJsZUNhcm91c2VsQnV0dG9uc1wiKSk7XG5jb25zdCBkaXNhYmxlTWFpbkJ1dHRvbnNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvZGlzYWJsZU1haW5CdXR0b25zXCIpKTtcbmNvbnN0IGZhZGVJbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlscy9mYWRlSW5cIikpO1xuY29uc3QgZ2V0VGFyZ2V0RWxlbWVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlscy9nZXRUYXJnZXRFbGVtZW50XCIpKTtcbmNvbnN0IG1vdmVDYXJvdXNlbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi91dGlscy9tb3ZlQ2Fyb3VzZWxcIikpO1xuY29uc3QgbW92ZU1haW5TbGlkZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvbW92ZU1haW5TbGlkZXJcIikpO1xuY29uc3Qgc2xpZGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvc2xpZGVcIikpO1xuY29uc3QgdXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3V0aWxzL3VwZGF0ZU5hdkVsZW1TZWxlY3RlZFwiKSk7XG5jb25zdCB6b29tXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvem9vbVwiKTtcbmNsYXNzIEdhbGxlcnkge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudFRyYW5zbGF0ZSA9IDA7XG4gICAgICAgIHRoaXMuZGVmYXVsdEluZGljYXRvclByb3BzID0ge1xuICAgICAgICAgICAgc2hhcGU6IFwiY2lyY2xlXCIsXG4gICAgICAgICAgICBzaXplOiAxMyxcbiAgICAgICAgICAgIHNwYWNpbmc6IDYsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVmYXVsdFRodW1ibmFpbFByb3BzID0ge1xuICAgICAgICAgICAgaGVpZ2h0OiA3MCxcbiAgICAgICAgICAgIG1hcmdpbjogMTAsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uU2hhcGU6IFwicmVjdGFuZ2xlXCIsXG4gICAgICAgICAgICBzZWxlY3RlZEJvcmRlclBvc2l0aW9uOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgc2VsZWN0ZWRCb3JkZXJXaWR0aDogMyxcbiAgICAgICAgICAgIHNlbGVjdGVkU3R5bGU6IFwib3ZlcmxheVwiLFxuICAgICAgICAgICAgd2lkdGg6IDcwLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlZmF1bHRab29tUHJvcHMgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogXCJcIixcbiAgICAgICAgICAgIHJhdGlvOiAyLFxuICAgICAgICAgICAgdHlwZTogXCJpbmxpbmVcIixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZXZpY2VXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLmhhc0N1cnNvck1vdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNNYWluU2xpZGVyU3dpcGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByZXZUcmFuc2xhdGUgPSAwO1xuICAgICAgICB0aGlzLnN0YXJ0UG9zaXRpb24gPSAwO1xuICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gMDtcbiAgICAgICAgLy8gRmx5b3V0IFpvb21cbiAgICAgICAgdGhpcy5mbHlvdXRIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0ZseW91dFZpc2libGUgPSAhdGhpcy5pc0ZseW91dFZpc2libGU7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGUgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmN1cnJlbnRcIik7XG4gICAgICAgICAgICBjdXJyZW50U2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImZseW91dC1vcGVuXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGbHlvdXRWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuZmx5b3V0Wm9vbSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5mbHlvdXRab29tLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tKCk7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnpJbmRleCA9IGAxMDBgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdW5zZXRgO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuZmx5b3V0Wm9vbSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5mbHlvdXRab29tLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnpJbmRleCA9IGAtMWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmx5b3V0Wm9vbSA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gem9vbV8xLnpvb20oZSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFByZWxvYWRzIHRoZSBiYWNrcm91bmQgaW1hZ2VzIGZvciB6b29taW5nXG4gICAgICAgIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbWFnZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuY3VycmVudCBpbWdcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBpaW9Eb21haW5LZXkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YUltYWdlU3JjID0gY3VycmVudEltYWdlLmdldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2Utem9vbVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGFJbWFnZVNyYykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhSW1hZ2VTcmMgPSBjdXJyZW50SW1hZ2UuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbWFnZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtkYXRhSW1hZ2VTcmN9KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2N1cnJlbnRJbWFnZS5zcmN9KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIElubGluZSBab29tLlxuICAgICAgICB0aGlzLmlubGluZUVudGVySGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGUgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgY3VycmVudFNsaWRlLmNsYXNzTGlzdC5hZGQoXCJpbmxpbmUtb3BlblwiKTtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUHJlbG9hZEJnWm9vbSgpO1xuICAgICAgICAgICAgdGhpcy5pbmxpbmVab29tKGUpO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5pbmxpbmVab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLmlubGluZVpvb20sIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbmxpbmVMZWF2ZUhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgIGN1cnJlbnRTbGlkZS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLmlubGluZVpvb20sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuaW5saW5lWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1bnNldGA7XG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gYHVuc2V0YDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbmxpbmVab29tID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSB6b29tXzEuem9vbShlKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gU2V0IFpvb20gY29udGFpbmVyIGRpbWVuc2lvblxuICAgICAgICB0aGlzLnNldFpvb21EaXZEaW1lbnNpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuem9vbURpdikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS53aWR0aCA9IGAke3RoaXMuaW1hZ2VXaWR0aH1weGA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpbyA9PT0gXCJzdHJpbmdcIiAmJiB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8uaW5jbHVkZXMoXCI6XCIpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRzID0gdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlSGVpZ2h0ID0gdGhpcy5pbWFnZVdpZHRoIC8gcGFyc2VJbnQoZmllbGRzWzBdLCAxMCkgKiBwYXJzZUludChmaWVsZHNbMV0sIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5pbWFnZUhlaWdodH1weGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvID09PSBcIm9iamVjdFwiICYmIHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpbyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VIZWlnaHQgPSB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8uaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmltYWdlSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VIZWlnaHQgPSB0aGlzLmltYWdlV2lkdGg7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaW1hZ2VIZWlnaHR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LnN0eWxlLnBvc2l0aW9uID0gYHJlbGF0aXZlYDtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5wb3NpdGlvbiA9IGBhYnNvbHV0ZWA7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMub3B0aW9ucy5waWlvRG9tYWluS2V5ID0gKG9wdGlvbnMucGlpb0RvbWFpbktleSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IG9wdGlvbnMucGlpb0RvbWFpbktleSk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgPSBvcHRpb25zLmdhbGxlcnlTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPSAob3B0aW9ucy50cmFuc2l0aW9uID09PSB1bmRlZmluZWQgPyBcInNsaWRlXCIgOiBvcHRpb25zLnRyYW5zaXRpb24pO1xuICAgICAgICB0aGlzLm9wdGlvbnMudGhlbWVQcm9wcyA9IG9wdGlvbnMudGhlbWVQcm9wcyA9PT0gdW5kZWZpbmVkID8ge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogXCJoc2xhKDIzNCwgNzYlLCA1MCUsIDEpXCIsXG4gICAgICAgICAgICBjb2xvcjogXCJoc2xhKDAsIDEwMCUsIDEwMCUsIDEpXCIsXG4gICAgICAgIH0gOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IChvcHRpb25zLnRoZW1lUHJvcHMuYmFja2dyb3VuZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gXCJoc2xhKDIzNCwgNzYlLCA1MCUsIDEpXCJcbiAgICAgICAgICAgICAgICAgICAgOiBvcHRpb25zLnRoZW1lUHJvcHMuYmFja2dyb3VuZCksXG4gICAgICAgICAgICAgICAgY29sb3I6IChvcHRpb25zLnRoZW1lUHJvcHMuY29sb3IgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IFwiaHNsYSgwLCAxMDAlLCAxMDAlLCAxKVwiXG4gICAgICAgICAgICAgICAgICAgIDogb3B0aW9ucy50aGVtZVByb3BzLmNvbG9yKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMub3B0aW9ucy52YXJpYW50U2VsZWN0b3IgPSBvcHRpb25zLnZhcmlhbnRTZWxlY3RvcjtcbiAgICAgICAgLy8gUmVzcG9uc2l2ZSBzZXR0aW5ncy5cbiAgICAgICAgbGV0IHJlc3BvbnNpdmVPcHRpb247XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZS5tb2JpbGUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmRldmljZVdpZHRoIDwgNzY0KSB7XG4gICAgICAgICAgICByZXNwb25zaXZlT3B0aW9uID0gb3B0aW9ucy5yZXNwb25zaXZlLm1vYmlsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZS50YWJsZXQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmRldmljZVdpZHRoIDwgMTAyNCkge1xuICAgICAgICAgICAgcmVzcG9uc2l2ZU9wdGlvbiA9IG9wdGlvbnMucmVzcG9uc2l2ZS50YWJsZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNwb25zaXZlT3B0aW9uID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8gPSAocmVzcG9uc2l2ZU9wdGlvbi5hc3BlY3RSYXRpbyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIFwic3F1YXJlXCIgOiByZXNwb25zaXZlT3B0aW9uLmFzcGVjdFJhdGlvKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmNhcm91c2VsT2Zmc2V0ID0gKHJlc3BvbnNpdmVPcHRpb24uY2Fyb3VzZWxPZmZzZXQgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAxNSA6IHJlc3BvbnNpdmVPcHRpb24uY2Fyb3VzZWxPZmZzZXQpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuY2Fyb3VzZWxQb3NpdGlvbiA9IChyZXNwb25zaXZlT3B0aW9uLmNhcm91c2VsUG9zaXRpb24gPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICBcImJvdHRvbVwiIDogcmVzcG9uc2l2ZU9wdGlvbi5jYXJvdXNlbFBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPSAocmVzcG9uc2l2ZU9wdGlvbi5jYXJvdXNlbFN0eWxlID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgXCJ0aHVtYm5haWxzXCIgOiByZXNwb25zaXZlT3B0aW9uLmNhcm91c2VsU3R5bGUpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMgPSByZXNwb25zaXZlT3B0aW9uLmluZGljYXRvclByb3BzID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0SW5kaWNhdG9yUHJvcHMgOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNoYXBlOiAocmVzcG9uc2l2ZU9wdGlvbi5pbmRpY2F0b3JQcm9wcy5zaGFwZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgXCJjaXJjbGVcIiA6IHJlc3BvbnNpdmVPcHRpb24uaW5kaWNhdG9yUHJvcHMuc2hhcGUpLFxuICAgICAgICAgICAgICAgIHNpemU6IChyZXNwb25zaXZlT3B0aW9uLmluZGljYXRvclByb3BzLnNpemUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIDEzIDogcmVzcG9uc2l2ZU9wdGlvbi5pbmRpY2F0b3JQcm9wcy5zaXplKSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiAocmVzcG9uc2l2ZU9wdGlvbi5pbmRpY2F0b3JQcm9wcy5zcGFjaW5nID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICA2IDogcmVzcG9uc2l2ZU9wdGlvbi5pbmRpY2F0b3JQcm9wcy5zcGFjaW5nKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMub3B0aW9ucy5tYWluTmF2aWdhdGlvbiA9IChyZXNwb25zaXZlT3B0aW9uLm1haW5OYXZpZ2F0aW9uID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgXCJyZWN0YW5nbGVcIiA6IHJlc3BvbnNpdmVPcHRpb24ubWFpbk5hdmlnYXRpb24pO1xuICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMgPSByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdGhpcy5kZWZhdWx0VGh1bWJuYWlsUHJvcHNcbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcy5oZWlnaHQgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICA3MCA6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMubWFyZ2luID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgMTAgOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLm1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvblNoYXBlOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLm5hdmlnYXRpb25TaGFwZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwicmVjdGFuZ2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQm9yZGVyUG9zaXRpb246IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRCb3JkZXJQb3NpdGlvbiA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMub3B0aW9ucy5jYXJvdXNlbFBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRCb3JkZXJQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRCb3JkZXJXaWR0aDogcmVzcG9uc2l2ZU9wdGlvbi50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlcldpZHRoID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gM1xuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNwb25zaXZlT3B0aW9uLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU3R5bGU6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwib3ZlcmxheVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMud2lkdGggPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICA3MCA6IHJlc3BvbnNpdmVPcHRpb24udGh1bWJuYWlsUHJvcHMud2lkdGgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnpvb21Qcm9wcyA9IHJlc3BvbnNpdmVPcHRpb24uem9vbVByb3BzID09PSB1bmRlZmluZWQgPyB0aGlzLmRlZmF1bHRab29tUHJvcHMgOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZXNwb25zaXZlT3B0aW9uLnpvb21Qcm9wcy5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgXCJyaWdodFwiIDogcmVzcG9uc2l2ZU9wdGlvbi56b29tUHJvcHMucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgcmF0aW86IHJlc3BvbnNpdmVPcHRpb24uem9vbVByb3BzLnJhdGlvID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAyIDogcmVzcG9uc2l2ZU9wdGlvbi56b29tUHJvcHMucmF0aW8sXG4gICAgICAgICAgICAgICAgdHlwZTogcmVzcG9uc2l2ZU9wdGlvbi56b29tUHJvcHMudHlwZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgXCJpbmxpbmVcIiA6IHJlc3BvbnNpdmVPcHRpb24uem9vbVByb3BzLnR5cGUsXG4gICAgICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yfWApKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0aGlzLm9wdGlvbnMucGlpb0RvbWFpbktleSkgJiYgKHdpbmRvdy5waWlvID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5yZW5kZXIoKTsgfSwgMTApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTWFrZSBhcnJheSBvZiBpbWFnZXMgdXJsJ3NcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmFyaWFudFNlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcmlhbnRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5vcHRpb25zLnZhcmlhbnRTZWxlY3Rvcn1gKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcmlhbnRzID0gdGhpcy52YXJpYW50U2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtbGlzdF1gKTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlcyA9IHRoaXMudmFyaWFudHNbMF0ucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtaW1hZ2VdYCk7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50c0FycmF5ID0gQXJyYXkuZnJvbSh0aGlzLnZhcmlhbnRTZWxlY3Rvci5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50U2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRMaXN0ID0gdGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1saXN0XVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudEluZGV4ID0gdGhpcy52YXJpYW50c0FycmF5LmZpbmRJbmRleCgobGlzdCkgPT4gbGlzdCA9PT0gdGFyZ2V0TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzID0gdGhpcy52YXJpYW50c1t2YXJpYW50SW5kZXhdLnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWltYWdlXWApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KHZhcmlhbnRJbmRleCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yfSBbZGF0YS1pbWFnZV1gKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnQodmFyaWFudEluZGV4KSB7XG4gICAgICAgIHRoaXMuZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3Rvcn1gKTtcbiAgICAgICAgbGV0IGNsaWVudEl0ZW1zO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZhcmlhbnRTZWxlY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGllbnRJdGVtcyA9IEFycmF5LmZyb20odGhpcy52YXJpYW50c0FycmF5W3ZhcmlhbnRJbmRleF0ucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtaW1hZ2VdYCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpZW50SXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuZ2FsbGVyeS5jaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIGEgd3JhcHBlciBmb3IgZWFjaCBlbGVtZW50IG9uIHRoZSBjbGllbnQgZ2FsbGVyeSBodG1sXG4gICAgICAgIHRoaXMubWFpbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLm1haW5XcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJtYWluLXdyYXBwZXJcIik7XG4gICAgICAgIGNsaWVudEl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY2hpbGRXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRhdGEtZ2FsbGVyeVwiLCBgaXRlbS0ke2luZGV4fWApO1xuICAgICAgICAgICAgY2hpbGRXcmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGluZGV4ID09PSAwID8gXCJjdXJyZW50XCIgOiBcIlwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmFyaWFudFNlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IGl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIGNoaWxkV3JhcHBlci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGlsZFdyYXBwZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1haW5XcmFwcGVyLmFwcGVuZENoaWxkKGNoaWxkV3JhcHBlcik7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIG5ldyBIVE1MIG1hcmt1cFxuICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImdhbGxlcnktY29udGFpbmVyXCIpO1xuICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFpbi1pbWdcIik7XG4gICAgICAgIHRoaXMubWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFpbi1jb250YWluZXJcIik7XG4gICAgICAgIHRoaXMuY29udGV4dE1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51LmNsYXNzTGlzdC5hZGQoXCJjb250ZXh0LW1lbnVcIik7XG4gICAgICAgIC8vIEFwcGVuZCB0aGUgY29udGFpbmVyc1xuICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tYWluV3JhcHBlcik7XG4gICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tYWluQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaW1hZ2VDb250YWluZXIpO1xuICAgICAgICAvLyBSZXBsYWNlIHRoZSBleGlzdGluZyBodG1sIHdpdGggdGhlIG5ldyBzdHJ1Y3R1cmVcbiAgICAgICAgdGhpcy5nYWxsZXJ5LmlubmVySFRNTCA9IFwiIFwiO1xuICAgICAgICB0aGlzLmdhbGxlcnkuYXBwZW5kQ2hpbGQodGhpcy5nYWxsZXJ5Q29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5nYWxsZXJ5LmFwcGVuZENoaWxkKHRoaXMuY29udGV4dE1lbnUpO1xuICAgICAgICAvLyBDYXJvdXNlbCBzdHlsZVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwiaW5kaWNhdG9yc1wiKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG5ldyBIVE1MIG1hcmt1cFxuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbE9mZnNldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsT2Zmc2V0LmNsYXNzTGlzdC5hZGQoXCJjYXJvdXNlbC1vZmZzZXRcIik7XG4gICAgICAgICAgICB0aGlzLm5hdkluZGljYXRvcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5uYXZJbmRpY2F0b3JzLmNsYXNzTGlzdC5hZGQoXCJuYXZJbmRpY2F0b3JzXCIpO1xuICAgICAgICAgICAgLy8gQWRkIG5ldyBzdHJ1Y3R1cmVcbiAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhcm91c2VsT2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLm5hdkluZGljYXRvcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgSFRNTCBtYXJrdXBcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxPZmZzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbE9mZnNldC5jbGFzc0xpc3QuYWRkKFwiY2Fyb3VzZWwtb2Zmc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsLmNsYXNzTGlzdC5hZGQoXCJjYXJvdXNlbFwiKTtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlci5jbGFzc0xpc3QuYWRkKFwiY2Fyb3VzZWwtc2xpZGVyXCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuaGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJjYXJvdXNlbC13cmFwcGVyXCIpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLmhlaWdodH1weGA7XG4gICAgICAgICAgICAvLyBBcHBlbmQgbmV3IHN0cnVjdHVyZVxuICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY2Fyb3VzZWxPZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlci5hcHBlbmRDaGlsZCh0aGlzLmNhcm91c2VsV3JhcHBlcik7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsLmFwcGVuZENoaWxkKHRoaXMuY2Fyb3VzZWxTbGlkZXIpO1xuICAgICAgICAgICAgLy8gSWYgQ2Fyb3VzZWwgYnV0dG9ucyBhcmUgZW5hYmxlZFxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHByZXZpb3VzIGJ1dHRvblxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZDYXJvdXNlbFN2ZyA9IHRoaXMuY3JlYXRlUHJldlN2ZygpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZDYXJvdXNlbC5jbGFzc0xpc3QuYWRkKFwiYXJyb3dcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuY2xhc3NMaXN0LmFkZChcInByZXYtYXJyb3dcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBgYnV0dG9uYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgYHByZXZDYXJvdXNlbGApO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGBkaXNwbGF5Om5vbmVgKTtcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgcHJldmlvdXMgYnV0dG9uXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuYXBwZW5kQ2hpbGQocHJldkNhcm91c2VsU3ZnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsLmFwcGVuZENoaWxkKHRoaXMucHJldkNhcm91c2VsKTtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV4dCBidXR0b25cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2Fyb3VzZWxTdmcgPSB0aGlzLmNyZWF0ZU5leHRTdmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuY2xhc3NMaXN0LmFkZChcImFycm93XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLmNsYXNzTGlzdC5hZGQoXCJuZXh0LWFycm93XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgYGJ1dHRvbmApO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnNldEF0dHJpYnV0ZShcImlkXCIsIGBuZXh0Q2Fyb3VzZWxgKTtcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgbmV4dCBidXR0b25cbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbC5hcHBlbmRDaGlsZChuZXh0Q2Fyb3VzZWxTdmcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWwuYXBwZW5kQ2hpbGQodGhpcy5uZXh0Q2Fyb3VzZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIG5ldyBzdHJ1Y3R1cmVcbiAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhcm91c2VsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFTkQgUElJT1xuICAgICAgICAvLyBJbWFnZSBkaXN0cmlidXRpb24gYWNjb3JkaW5nIGNhcm91c2VsIHN0eWxlXG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goKGltZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNyYyA9IGltZy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWltYWdlXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcImluZGljYXRvcnNcIikge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBlYWNoIGluZGljYXRvclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGluZGV4ID09PSAwID8gXCJhY3RpdmVcIiA6IFwiXCIpO1xuICAgICAgICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKFwiaW5kaWNhdG9yXCIpO1xuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBpdCB0byBpdCdzIHBhcmVudFxuICAgICAgICAgICAgICAgIHRoaXMubmF2SW5kaWNhdG9ycy5hcHBlbmRDaGlsZChpbmRpY2F0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGVhY2ggdGh1bWJuYWlsXG4gICAgICAgICAgICAgICAgY29uc3QgdGh1bWJJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgICAgICAgdGh1bWJJbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQVwiKTtcbiAgICAgICAgICAgICAgICB0aHVtYkltYWdlLnNldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2VcIiwgc3JjKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdUaHVtYldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGltZ1RodW1iV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiaW1nVGh1bWItd3JhcHBlclwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aHVtYlNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICB0aHVtYlNsaWRlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGluZGV4ID09PSAwID8gXCJhY3RpdmVcIiA6IFwiXCIpO1xuICAgICAgICAgICAgICAgIHRodW1iU2xpZGUuY2xhc3NMaXN0LmFkZChcInNsaWRlXCIpO1xuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBlbGVtZW50cyB0byBpdCdzIHBhcmVudHMgdG8gY3JlYXRlIHRoZSBzdHJ1Y3R1cmVcbiAgICAgICAgICAgICAgICBpbWdUaHVtYldyYXBwZXIuYXBwZW5kQ2hpbGQodGh1bWJJbWFnZSk7XG4gICAgICAgICAgICAgICAgdGh1bWJTbGlkZS5hcHBlbmRDaGlsZChpbWdUaHVtYldyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxXcmFwcGVyLmFwcGVuZENoaWxkKHRodW1iU2xpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBub25lfGZhZGV8c2xpZGVcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtdHJhbnNpdGlvblwiLCB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiAvKiB8fCBcInNsaWRlXCIgKi8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzIG5vbmV8ZWxzZVxuICAgICAgICAvLyBJZiBNYWluIGJ1dHRvbnMgYXJlIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYWluTmF2aWdhdGlvbiAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBwcmV2aW91cyBidXR0b25cbiAgICAgICAgICAgIGNvbnN0IHByZXZNYWluU3ZnID0gdGhpcy5jcmVhdGVQcmV2U3ZnKCk7XG4gICAgICAgICAgICBwcmV2TWFpblN2Zy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgXCIyNHB4XCIpO1xuICAgICAgICAgICAgcHJldk1haW5Tdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIyNHB4XCIpO1xuICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhcnJvd1wiKTtcbiAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uY2xhc3NMaXN0LmFkZChcInByZXYtYXJyb3dcIik7XG4gICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgYGJ1dHRvbmApO1xuICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgcHJldk1haW5CdXR0b25gKTtcbiAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYGRpc3BsYXk6bm9uZWApO1xuICAgICAgICAgICAgLy8gQXBwZW5kIHByZXZpb3VzIGJ1dHRvblxuICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5hcHBlbmRDaGlsZChwcmV2TWFpblN2Zyk7XG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucHJldk1haW5CdXR0b24pO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIG5leHQgYnV0dG9uXG4gICAgICAgICAgICBjb25zdCBuZXh0TWFpblN2ZyA9IHRoaXMuY3JlYXRlTmV4dFN2ZygpO1xuICAgICAgICAgICAgbmV4dE1haW5Tdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMjRweFwiKTtcbiAgICAgICAgICAgIG5leHRNYWluU3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiMjRweFwiKTtcbiAgICAgICAgICAgIHRoaXMubmV4dE1haW5CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYXJyb3dcIik7XG4gICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJuZXh0LWFycm93XCIpO1xuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIGBidXR0b25gKTtcbiAgICAgICAgICAgIHRoaXMubmV4dE1haW5CdXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgYG5leHRNYWluQnV0dG9uYCk7XG4gICAgICAgICAgICAvLyBBcHBlbmQgbmV4dCBidXR0b25cbiAgICAgICAgICAgIHRoaXMubmV4dE1haW5CdXR0b24uYXBwZW5kQ2hpbGQobmV4dE1haW5TdmcpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLm5leHRNYWluQnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRldmljZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIC8vIFpvb20gbm9uZXxwb3B1cHxmbHlvdXR8aW5saW5lXG4gICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgW2RhdGEtZ2FsbGVyeV0gYVwiKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSA9PT0gXCJwb3B1cFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtem9vbVwiLCBcInBvcHVwXCIpO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjcm9zcyBzdmdcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZVN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICAgICAgICAgIGNsb3NlU3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMjMgMjNcIik7XG4gICAgICAgICAgICAgICAgY2xvc2VTdmcuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZTFQYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpO1xuICAgICAgICAgICAgICAgIGxpbmUxUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIFwiTTIxLjUxNDcgMjEuNTE0N0wxLjUxNDcxIDEuNTE0NzFcIik7XG4gICAgICAgICAgICAgICAgbGluZTFQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBgY3VycmVudENvbG9yYCk7XG4gICAgICAgICAgICAgICAgbGluZTFQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBgMmApO1xuICAgICAgICAgICAgICAgIGxpbmUxUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWNhcFwiLCBgcm91bmRgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lMlBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIik7XG4gICAgICAgICAgICAgICAgbGluZTJQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgXCJNMS41MTQ2OSAyMS41MTQ3TDIxLjUxNDcgMS41MTQ3MVwiKTtcbiAgICAgICAgICAgICAgICBsaW5lMlBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIGBjdXJyZW50Q29sb3JgKTtcbiAgICAgICAgICAgICAgICBsaW5lMlBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIGAyYCk7XG4gICAgICAgICAgICAgICAgbGluZTJQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsIGByb3VuZGApO1xuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBwYXRocyB0byBzdmdcbiAgICAgICAgICAgICAgICBjbG9zZVN2Zy5hcHBlbmRDaGlsZChsaW5lMVBhdGgpO1xuICAgICAgICAgICAgICAgIGNsb3NlU3ZnLmFwcGVuZENoaWxkKGxpbmUyUGF0aCk7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG1hcmt1cCBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBDbG9zZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBDbG9zZS5jbGFzc0xpc3QuYWRkKFwicG9wdXAtY2xvc2VcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwSW1hZ2UuY2xhc3NMaXN0LmFkZChcInBvcHVwLWltYWdlXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwXCIpO1xuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBzdmcgdG8gc3BhblxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBDbG9zZS5hcHBlbmRDaGlsZChjbG9zZVN2Zyk7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIGltZyBhbmQgc3BhbiB0byBwb3B1cCBkaXZcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmFwcGVuZENoaWxkKHRoaXMucG9wdXBDbG9zZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwSW1hZ2UpO1xuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBwb3B1cCBkaXYgdG8gZ2FsbGVyeVxuICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSA9PT0gXCJmbHlvdXRcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlWm9vbURpdigpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRldmljZVdpZHRoIDwgOTkyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLXpvb21cIiwgXCJpbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS16b29tXCIsIFwiZmx5b3V0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS16b29tXCIsIFwiaW5saW5lXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlWm9vbURpdigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF1bmNoR2FsbGVyeSgpO1xuICAgIH1cbiAgICAvLyBBcnJvd3Mgc3ZnJ3NcbiAgICBjcmVhdGVOZXh0U3ZnKCkge1xuICAgICAgICBjb25zdCBuZXh0U3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgICAgIG5leHRTdmcuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgIG5leHRTdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBcIjAgMCAyNCAyNFwiKTtcbiAgICAgICAgY29uc3QgbmV4dFBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIik7XG4gICAgICAgIG5leHRQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgXCJNOSAxOEwxNSAxMkw5IDZcIik7XG4gICAgICAgIG5leHRQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBgY3VycmVudENvbG9yYCk7XG4gICAgICAgIG5leHRQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBgMnB4YCk7XG4gICAgICAgIG5leHRQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsIGByb3VuZGApO1xuICAgICAgICBuZXh0UGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgYHJvdW5kYCk7XG4gICAgICAgIC8vIEFwcGVuZCBwYXRoIHRvIHN2Z1xuICAgICAgICBuZXh0U3ZnLmFwcGVuZENoaWxkKG5leHRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5leHRTdmc7XG4gICAgfVxuICAgIGNyZWF0ZVByZXZTdmcoKSB7XG4gICAgICAgIGNvbnN0IHByZXZTdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgcHJldlN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDI0IDI0XCIpO1xuICAgICAgICBwcmV2U3ZnLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJub25lXCIpO1xuICAgICAgICBjb25zdCBwcmV2UGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicGF0aFwiKTtcbiAgICAgICAgcHJldlBhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBcIk0xNSAxOEw5IDEyTDE1IDZcIik7XG4gICAgICAgIHByZXZQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBgY3VycmVudENvbG9yYCk7XG4gICAgICAgIHByZXZQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBgMnB4YCk7XG4gICAgICAgIHByZXZQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsIGByb3VuZGApO1xuICAgICAgICBwcmV2UGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgYHJvdW5kYCk7XG4gICAgICAgIC8vIEFwcGVuZCBwYXRoIHRvIHN2Z1xuICAgICAgICBwcmV2U3ZnLmFwcGVuZENoaWxkKHByZXZQYXRoKTtcbiAgICAgICAgcmV0dXJuIHByZXZTdmc7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBab29tIGNvbnRhaW5lclxuICAgIGNyZWF0ZVpvb21EaXYoKSB7XG4gICAgICAgIC8vIENyZWF0ZSBkaXYgd2hlcmUgem9vbSB3aWxsIGJlIGRpc3BsYXllZFxuICAgICAgICB0aGlzLnpvb21EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnpvb21EaXYuY2xhc3NMaXN0LmFkZChcImRpc3BsYXktem9vbVwiKTtcbiAgICAgICAgLy8gQXBwZW5kIGl0IHRvIGl0J3MgcGFyZW50XG4gICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy56b29tRGl2KTtcbiAgICB9XG4gICAgLy8gR2V0IGNhcm91c2VsIHNsaWRlciBzY3JlZW4gc2l6ZVxuICAgIGdldGNhcm91c2VsU2xpZGVyU2NyZWVuU2l6ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhcm91c2VsU2xpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2Fyb3VzZWxTbGlkZXJEaW1lbnNpb24gPSAodGhpcy5pc1NsaWRlclZlcnRpY2FsKSA/XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCA6XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICByZXR1cm4gY2Fyb3VzZWxTbGlkZXJEaW1lbnNpb247XG4gICAgfVxuICAgIC8vIEdldCBjYXJvdXNlbCB3cmFwcGVyIGRpbWVuc2lvblxuICAgIGdldENhcm91c2VsV3JhcHBlckRpbWVuc2lvbigpIHtcbiAgICAgICAgY29uc3QgY2Fyb3VzZWxTbGlkZXMgPSBBcnJheS5mcm9tKHRoaXMuY2Fyb3VzZWxXcmFwcGVyLmNoaWxkcmVuKTtcbiAgICAgICAgcmV0dXJuIGNhcm91c2VsU2xpZGVzLmxlbmd0aCAqIHRoaXMuY2Fyb3VzZWxTbGlkZVNpemU7XG4gICAgfVxuICAgIC8vIEdldCBtYWluIGltYWdlIHdpZHRoXG4gICAgZ2V0TWFpbkltYWdlV2lkdGgoKSB7XG4gICAgICAgIGxldCBpbWFnZVNjcmVlbldpZHRoO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiKSB7XG4gICAgICAgICAgICBpbWFnZVNjcmVlbldpZHRoID0gKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkgP1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtIHRoaXMub3B0aW9ucy5jYXJvdXNlbE9mZnNldCAtIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy53aWR0aCA6XG4gICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcImluZGljYXRvcnNcIikge1xuICAgICAgICAgICAgaW1hZ2VTY3JlZW5XaWR0aCA9ICh0aGlzLmlzU2xpZGVyVmVydGljYWwpID9cbiAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSB0aGlzLm9wdGlvbnMuY2Fyb3VzZWxPZmZzZXQgLVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc2l6ZSAtIHRoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zcGFjaW5nICogMiA6XG4gICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2VTY3JlZW5XaWR0aCA9IHRoaXMuZ2FsbGVyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1hZ2VTY3JlZW5XaWR0aDtcbiAgICB9XG4gICAgZ2V0UGlpb0ltYWdlcygpIHtcbiAgICAgICAgY29uc3QgcGlpb0VsZW1lbnRzID0gd2luZG93LnBpaW8uZ2V0UGlpb0VsZW1lbnRzKHRoaXMuaW1hZ2VzKTtcbiAgICAgICAgd2luZG93LnBpaW8uZ2V0UGlpb0ltYWdlcyhwaWlvRWxlbWVudHMsIHRoaXMub3B0aW9ucy56b29tUHJvcHMucmF0aW8pO1xuICAgIH1cbiAgICAvLyBHZXQgdGhlIG51bWJlciBvZiBUaHVtYm5haWxzIGluIHNpZ2h0XG4gICAgZ2V0VGh1bWJzSW5TaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5jYXJvdXNlbFNsaWRlclNjcmVlblNpemUgLyAodGhpcy5jbGllbnRUaHVtYlNpemUgKyB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luKSk7XG4gICAgfVxuICAgIC8vIE1vdmUgY2Fyb3VzZWwgaWYgc2VsZWN0ZWQgVGh1bWJuYWlsIGdldHMgb3V0IG9mIHNpZ2h0XG4gICAga2VlcFRodW1iU2VsZWN0ZWRPblNpZ2h0KGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmFyZUFsbFRodW1ic0luU2lnaHQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWxlY3RlZFRodW1iU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlIC5pbWdUaHVtYi13cmFwcGVyXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBjYXJvdXNlbFNsaWRlclNpemUgPSB0aGlzLmNhcm91c2VsU2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoc2VsZWN0ZWRUaHVtYlNpemUucmlnaHQgPiBjYXJvdXNlbFNsaWRlclNpemUucmlnaHQgfHxcbiAgICAgICAgICAgIHNlbGVjdGVkVGh1bWJTaXplLmxlZnQgPCBjYXJvdXNlbFNsaWRlclNpemUubGVmdCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWRUaHVtYlNpemUudG9wIDwgY2Fyb3VzZWxTbGlkZXJTaXplLnRvcCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWRUaHVtYlNpemUuYm90dG9tID4gY2Fyb3VzZWxTbGlkZXJTaXplLmJvdHRvbSkge1xuICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgc2VsZWN0ZWRUaHVtYlNpemUud2lkdGgsIGluZGV4LCB0aGlzLmNhcm91c2VsU2xpZGVyLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luLCB0aGlzLmlzU2xpZGVyVmVydGljYWwpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZUNhcm91c2VsQnV0dG9uc18xLmRlZmF1bHQoaW5kZXgsIHRoaXMudGh1bWJzSW5TaWdodCwgdGhpcy5jYXJvdXNlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsQ291bnRlciA9IGluZGV4O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IChpbmRleCArIHRoaXMudGh1bWJzSW5TaWdodCArIDEpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRJbWFnZSh0aGlzLnRodW1iSW1hZ2VzW2ldLCB7IHR5cGU6IFwidGh1bWJuYWlsXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTGF6eSBsb2FkIGltYWdlc1xuICAgIGxvYWRJbWFnZShpbWFnZSwgeyB0eXBlIH0pIHtcbiAgICAgICAgaWYgKGltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBodG1sSW1hZ2VTcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgICAgIGlmIChodG1sSW1hZ2VTcmMgIT09IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUFcIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFJbWFnZVNyYyA9IGltYWdlLmdldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2VcIik7XG4gICAgICAgIGltYWdlLnNyYyA9IGRhdGFJbWFnZVNyYztcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5waWlvRG9tYWluS2V5ICYmIHdpbmRvdy5waWlvKSB7XG4gICAgICAgICAgICB3aW5kb3cucGlpby5vbkxvYWRJbWFnZShpbWFnZSwgZGF0YUltYWdlU3JjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBMb2FkIFRodW1ibmFpbCBpbWFnZXMgaW4gc2lnaHRcbiAgICBsb2FkVGh1bWJuYWlsSW1hZ2VzSW5TaWdodCgpIHtcbiAgICAgICAgdGhpcy50aHVtYkltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3Rvcn0gLmltZ1RodW1iLXdyYXBwZXIgaW1nYCk7XG4gICAgICAgIHRoaXMudGh1bWJzSW5TaWdodCA9IHRoaXMuZ2V0VGh1bWJzSW5TaWdodCgpO1xuICAgICAgICBjb25zdCB0aHVtYnNUb0xvYWQgPSAodGhpcy50aHVtYnNJblNpZ2h0IDwgdGhpcy50aHVtYkltYWdlcy5sZW5ndGgpID9cbiAgICAgICAgICAgIHRoaXMudGh1bWJzSW5TaWdodCArIDEgOiB0aGlzLnRodW1ic0luU2lnaHQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGh1bWJzVG9Mb2FkOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMudGh1bWJJbWFnZXNbaV0sIHsgdHlwZTogXCJ0aHVtYm5haWxcIiB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXQgY2Fyb3VzZWwgRGltZW5zaW9uc1xuICAgIHNldENhcm91c2VsRGltZW5zaW9uKCkge1xuICAgICAgICBjb25zdCBjYXJvdXNlbEltYWdlc1dyYXBwZXJzID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZSAuaW1nVGh1bWItd3JhcHBlclwiKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkge1xuICAgICAgICAgICAgLy8gZXQgc2xpZGVyIGhlaWdodFxuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmltYWdlQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodH1weGA7XG4gICAgICAgICAgICAvLyBTZXQgd3JhcHBlciBkaW1lbnNpb25cbiAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZVNpemUgPSBjYXJvdXNlbEltYWdlc1dyYXBwZXJzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxuICAgICAgICAgICAgICAgICsgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm1hcmdpbjtcbiAgICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMuZ2V0Q2Fyb3VzZWxXcmFwcGVyRGltZW5zaW9uKCk7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHtkaW1lbnNpb259cHhgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU2V0IHdyYXBwZXIgZGltZW5zaW9uXG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVTaXplID0gY2Fyb3VzZWxJbWFnZXNXcmFwcGVyc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aFxuICAgICAgICAgICAgICAgICsgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm1hcmdpbjtcbiAgICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMuZ2V0Q2Fyb3VzZWxXcmFwcGVyRGltZW5zaW9uKCk7XG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlci5zdHlsZS53aWR0aCA9IGAke2RpbWVuc2lvbn1weGA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2V0IGluZGljYXRvcnMgRGltZW5zaW9uc1xuICAgIHNldE5hdkluZGljYXRvcnNEaW1lbnNpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU2xpZGVyVmVydGljYWwpIHtcbiAgICAgICAgICAgIHRoaXMubmF2SW5kaWNhdG9ycy5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLm1haW5Db250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0fXB4YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmF2SW5kaWNhdG9ycy5zdHlsZS53aWR0aCA9IGAke3RoaXMuZ2V0TWFpbkltYWdlV2lkdGh9cHhgO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNldCBzbGlkZXIgaW4gTWFpbiBTbGlkZXJcbiAgICBzZXRQb3NpdGlvbkJ5SW5kZXhJbk1haW5TbGlkZXIoaSkge1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPCB0aGlzLmltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW2ldLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFRyYW5zbGF0ZSA9IHRoaXMudGFyZ2V0SW5kZXggKiAtdGhpcy5pbWFnZVdpZHRoO1xuICAgICAgICB0aGlzLnByZXZUcmFuc2xhdGUgPSB0aGlzLmN1cnJlbnRUcmFuc2xhdGU7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmN1cnJlbnRcIik7XG4gICAgICAgIGNvbnN0IHRhcmdldFNsaWRlID0gZ2V0VGFyZ2V0RWxlbWVudF8xLmRlZmF1bHQoY3VycmVudFNsaWRlLCB0aGlzLnRhcmdldEluZGV4LCB0aGlzLm1haW5TbGlkZXMpO1xuICAgICAgICBtb3ZlTWFpblNsaWRlcl8xLmRlZmF1bHQodGhpcy5tYWluV3JhcHBlciwgY3VycmVudFNsaWRlLCB0YXJnZXRTbGlkZSwgdGhpcy50YXJnZXRJbmRleCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmNvbnRleHRNZW51LCB0aGlzLm9wZW5JbWFnZVRleHQpO1xuICAgICAgICAvLyBpZiBUaHVtYm5haWxzIGFyZSBlbmFibGVkIHVwZGF0ZSB0aHVtYm5haWxcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRodW1iID0gdGhpcy5jYXJvdXNlbFdyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcm91c2VsU2xpZGVzID0gQXJyYXkuZnJvbSh0aGlzLmNhcm91c2VsV3JhcHBlci5jaGlsZHJlbik7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRUaHVtYiA9IGdldFRhcmdldEVsZW1lbnRfMS5kZWZhdWx0KGN1cnJlbnRUaHVtYiwgdGhpcy50YXJnZXRJbmRleCwgY2Fyb3VzZWxTbGlkZXMpO1xuICAgICAgICAgICAgY29uc3QgbmV4dFRodW1iSW5kZXggPSBjYXJvdXNlbFNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHRhcmdldFRodW1iKTtcbiAgICAgICAgICAgIGNvbnN0IHRodW1iSW1hZ2VUb0xvYWQgPSAobmV4dFRodW1iSW5kZXggPCBjYXJvdXNlbFNsaWRlcy5sZW5ndGggLSAxKSA/XG4gICAgICAgICAgICAgICAgbmV4dFRodW1iSW5kZXggKyAxIDpcbiAgICAgICAgICAgICAgICBjYXJvdXNlbFNsaWRlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEuZGVmYXVsdChjdXJyZW50VGh1bWIsIHRhcmdldFRodW1iLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmtlZXBUaHVtYlNlbGVjdGVkT25TaWdodCh0aGlzLnRhcmdldEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMudGh1bWJJbWFnZXNbdGh1bWJJbWFnZVRvTG9hZF0sIHsgdHlwZTogXCJ0aHVtYm5haWxcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBJbmRpY2F0b3JzIGFyZSBlbmFibGVkIHVwZGF0ZSBpbmRpY2F0b3JcbiAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcImluZGljYXRvcnNcIikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kaWNhdG9yID0gdGhpcy5uYXZJbmRpY2F0b3JzLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGljYXRvcnMgPSBBcnJheS5mcm9tKHRoaXMubmF2SW5kaWNhdG9ycy5jaGlsZHJlbik7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRJbmRpY2F0b3IgPSBnZXRUYXJnZXRFbGVtZW50XzEuZGVmYXVsdCh0aGlzLmN1cnJlbnRJbmRpY2F0b3IsIHRoaXMudGFyZ2V0SW5kZXgsIGluZGljYXRvcnMpO1xuICAgICAgICAgICAgdXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEuZGVmYXVsdCh0aGlzLmN1cnJlbnRJbmRpY2F0b3IsIHRhcmdldEluZGljYXRvciwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlclBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNldCBtYWluIGltYWdlIHNpemVcbiAgICBzZXRTbGlkZXJEaW1lbnNpb25zKCkge1xuICAgICAgICB0aGlzLmltYWdlV2lkdGggPSB0aGlzLmdldE1haW5JbWFnZVdpZHRoKCk7XG4gICAgICAgIC8vIHNldCBpbWFnZSBhbmQgd3JhcHBlciBoZWlnaHRcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8gPT09IFwic3RyaW5nXCIgJiYgdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRzID0gdGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuaW1hZ2VXaWR0aCAvIHBhcnNlSW50KGZpZWxkc1swXSwgMTApICogcGFyc2VJbnQoZmllbGRzWzFdLCAxMCk7XG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgICAgICAgICB0aGlzLm1haW5XcmFwcGVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpbyA9PT0gXCJvYmplY3RcIiAmJiB0aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW8gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5vcHRpb25zLmFzcGVjdFJhdGlvLmhlaWdodH1weGA7XG4gICAgICAgICAgICB0aGlzLm1haW5XcmFwcGVyLnN0eWxlLmhlaWdodCA9IGAke3RoaXMub3B0aW9ucy5hc3BlY3RSYXRpby5oZWlnaHR9cHhgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmltYWdlV2lkdGh9cHhgO1xuICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmltYWdlV2lkdGh9cHhgO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBpbWFnZSB3aWR0aFxuICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7dGhpcy5pbWFnZVdpZHRofXB4YDtcbiAgICAgICAgLy8gc2V0IHdyYXBwZXIgd2lkdGhcbiAgICAgICAgdGhpcy5tYWluV3JhcHBlci5zdHlsZS53aWR0aCA9IGAke3RoaXMuaW1hZ2VXaWR0aCAqIHRoaXMubWFpblNsaWRlcy5sZW5ndGh9cHhgO1xuICAgIH1cbiAgICAvLyBTZXQgWm9vbSB0eXBlXG4gICAgc2V0Wm9vbSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnpvb21EaXYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmltYWdlV2lkdGggPSB0aGlzLmdldE1haW5JbWFnZVdpZHRoKCk7XG4gICAgICAgIC8vIEFkZCB6b29tIHBvaW50ZXJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VDb250YWluZXIuc3R5bGUuY3Vyc29yID0gXCJ6b29tLWluXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLnN0eWxlLmN1cnNvciA9IFwiZ3JhYlwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBvcHVwIHpvb21cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIFtkYXRhLXpvb209cG9wdXBdXCIpKSB7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SW1hZ2UgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5jdXJyZW50IGltZ1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBJbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgYCR7Y3VycmVudEltYWdlLmdldEF0dHJpYnV0ZShcImRhdGEtaW1hZ2VcIil9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIiAucG9wdXAtaW1hZ2VcIikuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUFcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gRmx5b3V0IHpvb21cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPWZseW91dF1cIilcbiAgICAgICAgICAgICYmIHRoaXMuZGV2aWNlV2lkdGggPj0gOTkyKSB7XG4gICAgICAgICAgICB0aGlzLmlzRmx5b3V0VmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gU2V0IGZseW91dCBkaW1lbnNpb25cbiAgICAgICAgICAgIHRoaXMuc2V0Wm9vbURpdkRpbWVuc2lvbigpO1xuICAgICAgICAgICAgLy8gU2V0IGZseW91dCBwb3NpdGlvblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMucG9zaXRpb24gPT09IFwibGVmdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmxlZnQgPSBgLSR7dGhpcy5pbWFnZVdpZHRofXB4YDtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUudG9wID0gYDBweGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuem9vbVByb3BzLnBvc2l0aW9uID09PSBcInRvcFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmxlZnQgPSBgMHB4YDtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUudG9wID0gYC0ke3RoaXMuaW1hZ2VIZWlnaHR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy5wb3NpdGlvbiA9PT0gXCJib3R0b21cIikge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS5sZWZ0ID0gYDBweGA7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnRvcCA9IGAke3RoaXMuaW1hZ2VIZWlnaHR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmxlZnQgPSBgJHt0aGlzLmltYWdlV2lkdGh9cHhgO1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5zdHlsZS50b3AgPSBgMHB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm92ZXJcIiwgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLmhhbmRsZVByZWxvYWRCZ1pvb20sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5mbHlvdXRIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIHpvb20gaWYgY2xpY2tlZCBvdXRzaWRlXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNDbGlja0luc2lkZSA9IHRoaXMubWFpbkNvbnRhaW5lci5jb250YWlucyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmN1cnJlbnRcIik7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0NsaWNrSW5zaWRlICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIFtkYXRhLXpvb209Zmx5b3V0XVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZseW91dFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGbHlvdXRWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUuY2xhc3NMaXN0LnJlbW92ZShcImZseW91dC1vcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5mbHlvdXRab29tLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gWm9vbSBpbmxpbmVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuem9vbVByb3BzLnR5cGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAvLyBTZXQgaW5saW5lIGRpbWVuc2lvblxuICAgICAgICAgICAgdGhpcy5zZXRab29tRGl2RGltZW5zaW9uKCk7XG4gICAgICAgICAgICAvLyBTZXQgaW5saW5lIHBvc2l0aW9uXG4gICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUubGVmdCA9IGAwcHhgO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLnpJbmRleCA9IGAxYDtcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm92ZXJcIiwgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5oYW5kbGVQcmVsb2FkQmdab29tLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLmhhbmRsZVByZWxvYWRCZ1pvb20sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5pbmxpbmVFbnRlckhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuem9vbURpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5pbmxpbmVMZWF2ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIERpc2FibGUgem9vbSBpZiBjbGlja2VkIG91dHNpZGVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0NsaWNrSW5zaWRlID0gdGhpcy5tYWluQ29udGFpbmVyLmNvbnRhaW5zKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQ2xpY2tJbnNpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21EaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaW5saW5lWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTEFVTkNIIEdBTExFUllcbiAgICBsYXVuY2hHYWxsZXJ5KCkge1xuICAgICAgICB0aGlzLm1haW5TbGlkZXMgPSBBcnJheS5mcm9tKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIiBbZGF0YS1nYWxsZXJ5XVwiKSk7XG4gICAgICAgIC8vIFNldCB2ZXJ0aWNhbCB2YXJpYWJsZSBhY29ycmRpbmcgdG8gY2Fyb3VzZWxQb3NpdGlvblxuICAgICAgICAodGhpcy5vcHRpb25zLmNhcm91c2VsUG9zaXRpb24gPT09IFwibGVmdFwiIHx8IHRoaXMub3B0aW9ucy5jYXJvdXNlbFBvc2l0aW9uID09PSBcInJpZ2h0XCIpXG4gICAgICAgICAgICA/IHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCA9IHRydWUgOiB0aGlzLmlzU2xpZGVyVmVydGljYWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoID0gdGhpcy5nZXRNYWluSW1hZ2VXaWR0aCgpO1xuICAgICAgICB0aGlzLnNldFNsaWRlckRpbWVuc2lvbnMoKTtcbiAgICAgICAgLy8gU2V0IEhvdmVyIGFuZCBGb2N1cyBjb2xvcnMgYWNjb3JkaW5nIHRvIHRoZSB0aGVtZVByb3BzLmJhY2tncm91bmQgcGlja2VkLlxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLm9wdGlvbnMudGhlbWVQcm9wcy5iYWNrZ3JvdW5kO1xuICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yLmluY2x1ZGVzKFwiaHNsXCIpIHx8IGJhY2tncm91bmRDb2xvci5pbmNsdWRlcyhcImhzbGFcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yV2l0aG91dFNwYWNlcyA9IGJhY2tncm91bmRDb2xvci5zcGxpdChcIixcIik7XG4gICAgICAgICAgICBjb25zdCBoc2xMdW1pbm9zaXR5ID0gcGFyc2VJbnQoY29sb3JXaXRob3V0U3BhY2VzWzJdLnNwbGl0KFwiJVwiKVswXSwgMTApO1xuICAgICAgICAgICAgaWYgKGhzbEx1bWlub3NpdHkgPj0gNTApIHtcbiAgICAgICAgICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yLmluY2x1ZGVzKFwiaHNsYVwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdmVyQmFja2dyb3VuZENvbG9yID0gYCR7Y29sb3JXaXRob3V0U3BhY2VzWzBdfSwke2NvbG9yV2l0aG91dFNwYWNlc1sxXX0sICR7aHNsTHVtaW5vc2l0eSAtIDIwfSUsJHtjb2xvcldpdGhvdXRTcGFjZXNbM119YDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c0JhY2tncm91bmRDb2xvciA9IGAke2NvbG9yV2l0aG91dFNwYWNlc1swXX0sJHtjb2xvcldpdGhvdXRTcGFjZXNbMV19LCAke2hzbEx1bWlub3NpdHkgLSAzMH0lLCR7Y29sb3JXaXRob3V0U3BhY2VzWzNdfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdmVyQmFja2dyb3VuZENvbG9yID0gYCR7Y29sb3JXaXRob3V0U3BhY2VzWzBdfSwke2NvbG9yV2l0aG91dFNwYWNlc1sxXX0sICR7aHNsTHVtaW5vc2l0eSAtIDIwfSUpYDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c0JhY2tncm91bmRDb2xvciA9IGAke2NvbG9yV2l0aG91dFNwYWNlc1swXX0sJHtjb2xvcldpdGhvdXRTcGFjZXNbMV19LCAke2hzbEx1bWlub3NpdHkgLSAzMH0lKWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvci5pbmNsdWRlcyhcImhzbGFcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlckJhY2tncm91bmRDb2xvciA9IGAke2NvbG9yV2l0aG91dFNwYWNlc1swXX0sJHtjb2xvcldpdGhvdXRTcGFjZXNbMV19LCAke2hzbEx1bWlub3NpdHkgKyAyMH0lLCR7Y29sb3JXaXRob3V0U3BhY2VzWzNdfWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNCYWNrZ3JvdW5kQ29sb3IgPSBgJHtjb2xvcldpdGhvdXRTcGFjZXNbMF19LCR7Y29sb3JXaXRob3V0U3BhY2VzWzFdfSwgJHtoc2xMdW1pbm9zaXR5ICsgMTB9JSwke2NvbG9yV2l0aG91dFNwYWNlc1szXX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlckJhY2tncm91bmRDb2xvciA9IGAke2NvbG9yV2l0aG91dFNwYWNlc1swXX0sJHtjb2xvcldpdGhvdXRTcGFjZXNbMV19LCAke2hzbEx1bWlub3NpdHkgKyAyMH0lKWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNCYWNrZ3JvdW5kQ29sb3IgPSBgJHtjb2xvcldpdGhvdXRTcGFjZXNbMF19LCR7Y29sb3JXaXRob3V0U3BhY2VzWzFdfSwgJHtoc2xMdW1pbm9zaXR5ICsgMTB9JSlgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgVGhlbWUgQ29sb3JzXG4gICAgICAgIGNvbnN0IHNlbGVjdG9yU3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IpO1xuICAgICAgICBzZWxlY3RvclN0eWxlLnN0eWxlLnNldFByb3BlcnR5KGAtLW1haW4tY29sb3JgLCB0aGlzLm9wdGlvbnMudGhlbWVQcm9wcy5jb2xvcik7XG4gICAgICAgIHNlbGVjdG9yU3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoYC0tYmctY29sb3JgLCB0aGlzLm9wdGlvbnMudGhlbWVQcm9wcy5iYWNrZ3JvdW5kKTtcbiAgICAgICAgc2VsZWN0b3JTdHlsZS5zdHlsZS5zZXRQcm9wZXJ0eShgLS1iZy1ob3Zlci1jb2xvcmAsIHRoaXMuaG92ZXJCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICBzZWxlY3RvclN0eWxlLnN0eWxlLnNldFByb3BlcnR5KGAtLWJnLWZvY3VzLWNvbG9yYCwgdGhpcy5mb2N1c0JhY2tncm91bmRDb2xvcik7XG4gICAgICAgIHRoaXMuaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yfSAgW2RhdGEtaW1hZ2VdYCk7XG4gICAgICAgIC8vIFNldCB0aHVtYm5haWwgc2l6ZSBhY29yZGluZyB0byB0aGUgY2Fyb3VzZWwgcG9zaXRpb25cbiAgICAgICAgdGhpcy5jbGllbnRUaHVtYlNpemUgPSAodGhpcy5pc1NsaWRlclZlcnRpY2FsKSA/XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuaGVpZ2h0IDpcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy53aWR0aDtcbiAgICAgICAgLy8gUmlnaHQgY2xpY2sgbWVudVxuICAgICAgICB0aGlzLm1haW5Db250YWluZXIub25jb250ZXh0bWVudSA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBtb3VzZVggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICBjb25zdCBtb3VzZVkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnN0eWxlLnRvcCA9IGAke21vdXNlWX1weGA7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LnN0eWxlLmxlZnQgPSBgJHttb3VzZVh9cHhgO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudS5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0Lm9mZnNldFBhcmVudCAhPT0gdGhpcy5jb250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZXQgcmlnaHQgY2xpY2sgbWVudSB0ZXh0IGNvbnRlbnRcbiAgICAgICAgY29uc3QgbmF2aWdhdG9yTGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2Uuc3BsaXQoXCItXCIpO1xuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IG5hdmlnYXRvckxhbmd1YWdlLnNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IGNvdW50cnkgPSBuYXZpZ2F0b3JMYW5ndWFnZS5wb3AoKTtcbiAgICAgICAgaWYgKGxhbmd1YWdlc19qc29uXzEuZGVmYXVsdFtsYW5ndWFnZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QganNvbkxhbmd1YWdlID0gbGFuZ3VhZ2VzX2pzb25fMS5kZWZhdWx0W2xhbmd1YWdlXTtcbiAgICAgICAgICAgIGlmIChjb3VudHJ5ICE9PSB1bmRlZmluZWQgJiYganNvbkxhbmd1YWdlLmhhc093blByb3BlcnR5KGNvdW50cnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuSW1hZ2VUZXh0ID0ganNvbkxhbmd1YWdlW2NvdW50cnldLk9wZW5JbWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gT2JqZWN0LmtleXMoanNvbkxhbmd1YWdlKVswXTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5JbWFnZVRleHQgPSBqc29uTGFuZ3VhZ2VbZmlyc3RdLk9wZW5JbWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkltYWdlVGV4dCA9IGxhbmd1YWdlc19qc29uXzEuZGVmYXVsdC5lbi5VUy5PcGVuSW1hZ2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHJpZ2h0IGNsaWNrIG1lbnUgZmlyc3QgaW1hZ2UgdXJsXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVVJMID0gdGhpcy5pbWFnZXNbMF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1pbWFnZVwiKTtcbiAgICAgICAgLy8gQ3JlYXRlIGFuY2hvciB0YWdcbiAgICAgICAgY29uc3QgYW5jaG9ydGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIGFuY2hvcnRhZy5jbGFzc0xpc3QuYWRkKFwiaXRlbVwiKTtcbiAgICAgICAgYW5jaG9ydGFnLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcbiAgICAgICAgYW5jaG9ydGFnLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIik7XG4gICAgICAgIGFuY2hvcnRhZy5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG9yaWdpbmFsVVJMKTtcbiAgICAgICAgYW5jaG9ydGFnLmNsYXNzTGlzdC5hZGQoXCJpdGVtXCIpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5vcGVuSW1hZ2VUZXh0KTtcbiAgICAgICAgLy8gQXBwZW5kIGl0IHRvIGl0J3MgcGFyZW50XG4gICAgICAgIGFuY2hvcnRhZy5hcHBlbmRDaGlsZCh0ZXh0KTtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudS5hcHBlbmRDaGlsZChhbmNob3J0YWcpO1xuICAgICAgICB0aGlzLmNhcm91c2VsQ291bnRlciA9IDA7XG4gICAgICAgIC8vIE1BSU4gTkFWSUdBVElPTiBCVVRUT05TXG4gICAgICAgIC8vIElmIE5hdmlnYXRpb24gQnV0dG9ucyBlbmFibGVkXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWFpbk5hdmlnYXRpb24gIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAvLyBTZXQgbWFpbiBidXR0b24gc3R5bGVzXG4gICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLmNsYXNzTGlzdC5hZGQoYGJ0bi1tYWluLSR7dGhpcy5vcHRpb25zLm1haW5OYXZpZ2F0aW9ufWApO1xuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKGBidG4tbWFpbi0ke3RoaXMub3B0aW9ucy5tYWluTmF2aWdhdGlvbn1gKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIE1haW4gQnV0dG9ucyBtdXN0IGJlIGRpc2FibGVkXG4gICAgICAgICAgICBpZiAodGhpcy5tYWluU2xpZGVzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcmVsb2FkIEltYWdlXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVQcmV2TWFpbkltYWdlTG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGUgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2U2xpZGUgPSBjdXJyZW50U2xpZGUucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SW5kZXggPSB0aGlzLm1haW5TbGlkZXMuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09PSBwcmV2U2xpZGUpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2SW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW3ByZXZJbmRleF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFByZXZpb3VzIE1haW4gQnV0dG9uXG4gICAgICAgICAgICAvLyBQcmVsb2FkIGltYWdlXG4gICAgICAgICAgICBpZiAod2luZG93LlBvaW50ZXJFdmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdmVyXCIsIGhhbmRsZVByZXZNYWluSW1hZ2VMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZNYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVByZXZNYWluSW1hZ2VMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2TWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhhbmRsZVByZXZNYWluSW1hZ2VMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPbiBjbGljayBiZWhhdmlvdXJcbiAgICAgICAgICAgIHRoaXMucHJldk1haW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2U2xpZGUgPSBjdXJyZW50U2xpZGUucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SW5kZXggPSB0aGlzLm1haW5TbGlkZXMuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09PSBwcmV2U2xpZGUpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2SW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW3ByZXZJbmRleF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIHByZXZTbGlkZSwgcHJldkluZGV4LCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuY29udGV4dE1lbnUsIHRoaXMub3BlbkltYWdlVGV4dCk7XG4gICAgICAgICAgICAgICAgZGlzYWJsZU1haW5CdXR0b25zXzEuZGVmYXVsdCh0aGlzLm1haW5TbGlkZXMsIHRoaXMucHJldk1haW5CdXR0b24sIHRoaXMubmV4dE1haW5CdXR0b24sIHByZXZJbmRleCk7XG4gICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbnNcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwiZmFkZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZhZGVJbl8xLmRlZmF1bHQodGhpcy5nYWxsZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcInNsaWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVfMS5kZWZhdWx0KHRoaXMuZ2FsbGVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFpvb20gaW5saW5lXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuaW5saW5lLW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNsaWRlLmNsYXNzTGlzdC50b2dnbGUoXCJpbmxpbmUtb3BlblwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1bnNldGA7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFRodW1ibmFpbHNcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaHVtYiA9IHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldlRodW1iID0gY3VycmVudFRodW1iLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQoY3VycmVudFRodW1iLCBwcmV2VGh1bWIsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZFN0eWxlLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRCb3JkZXJQb3NpdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZWVwVGh1bWJTZWxlY3RlZE9uU2lnaHQocHJldkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwiaW5kaWNhdG9yc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGljYXRvciA9IHRoaXMubmF2SW5kaWNhdG9ycy5xdWVyeVNlbGVjdG9yKFwiIC5hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkluZGljYXRvciA9IHRoaXMuY3VycmVudEluZGljYXRvci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVOYXZFbGVtU2VsZWN0ZWRfMS5kZWZhdWx0KHRoaXMuY3VycmVudEluZGljYXRvciwgdGhpcy5wcmV2SW5kaWNhdG9yLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVOZXh0TWFpbkltYWdlTG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTbGlkZSA9IHRoaXMuY3VycmVudFNsaWRlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRJbmRleCA9IHRoaXMubWFpblNsaWRlcy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHRoaXMubmV4dFNsaWRlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0SW5kZXggPCB0aGlzLmltYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbdGhpcy5uZXh0SW5kZXhdLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBOZXh0IEJ1dHRvblxuICAgICAgICAgICAgaWYgKHdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRNYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3ZlclwiLCBoYW5kbGVOZXh0TWFpbkltYWdlTG9hZCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVOZXh0TWFpbkltYWdlTG9hZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dE1haW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBoYW5kbGVOZXh0TWFpbkltYWdlTG9hZCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5uZXh0TWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGUgPSB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTbGlkZSA9IGN1cnJlbnRTbGlkZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0SW5kZXggPSB0aGlzLm1haW5TbGlkZXMuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09PSBuZXh0U2xpZGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5leHRJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbdGhpcy5uZXh0SW5kZXhdLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtb3ZlTWFpblNsaWRlcl8xLmRlZmF1bHQodGhpcy5tYWluV3JhcHBlciwgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUsIHRoaXMubmV4dEluZGV4LCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuY29udGV4dE1lbnUsIHRoaXMub3BlbkltYWdlVGV4dCk7XG4gICAgICAgICAgICAgICAgZGlzYWJsZU1haW5CdXR0b25zXzEuZGVmYXVsdCh0aGlzLm1haW5TbGlkZXMsIHRoaXMucHJldk1haW5CdXR0b24sIHRoaXMubmV4dE1haW5CdXR0b24sIHRoaXMubmV4dEluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJmYWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFkZUluXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwic2xpZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZV8xLmRlZmF1bHQodGhpcy5nYWxsZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gWm9vbSBpbmxpbmVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5pbmxpbmUtb3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZS5jbGFzc0xpc3QudG9nZ2xlKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdW5zZXRgO1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBUaHVtYm5haWxzXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGh1bWIgPSB0aGlzLmNhcm91c2VsV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUaHVtYiA9IGN1cnJlbnRUaHVtYi5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRodW1ic0FycmF5ID0gQXJyYXkuZnJvbSh0aGlzLmNhcm91c2VsV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFRodW1iSW5kZXggPSB0aHVtYnNBcnJheS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IG5leHRUaHVtYik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRodW1iSW1hZ2VUb0xvYWQgPSAobmV4dFRodW1iSW5kZXggPCB0aHVtYnNBcnJheS5sZW5ndGggLSAxKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0VGh1bWJJbmRleCArIDEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJzQXJyYXkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEuZGVmYXVsdChjdXJyZW50VGh1bWIsIG5leHRUaHVtYiwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlclBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtlZXBUaHVtYlNlbGVjdGVkT25TaWdodCh0aGlzLm5leHRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMudGh1bWJJbWFnZXNbdGh1bWJJbWFnZVRvTG9hZF0sIHsgdHlwZTogXCJ0aHVtYm5haWxcIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwiaW5kaWNhdG9yc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGljYXRvciA9IHRoaXMubmF2SW5kaWNhdG9ycy5xdWVyeVNlbGVjdG9yKFwiIC5hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHREb3QgPSB0aGlzLmN1cnJlbnRJbmRpY2F0b3IubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVOYXZFbGVtU2VsZWN0ZWRfMS5kZWZhdWx0KHRoaXMuY3VycmVudEluZGljYXRvciwgbmV4dERvdCwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkU3R5bGUsIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlclBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPVUNIICYgTU9VU0UgRVZFTlRTIE1BSU4gR0FMTEVSWVxuICAgICAgICAvLyAgUmVtb3ZlIGRyYWcgYmVoYXZpb3VyXG4gICAgICAgIHRoaXMuZ2FsbGVyeS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgICB0aGlzLnN0YXJ0UG9zaXRpb24gPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRUcmFuc2xhdGUgPSAwO1xuICAgICAgICB0aGlzLnByZXZUcmFuc2xhdGUgPSAwO1xuICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gMDtcbiAgICAgICAgZnVuY3Rpb24gZ2V0cG9zaXRpb25YKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnR5cGUuaW5jbHVkZXMoXCJ0b3VjaFwiKSA/IGUudG91Y2hlc1swXS5jbGllbnRYIDogZS5wYWdlWDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRwb3NpdGlvblkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUudHlwZS5pbmNsdWRlcyhcInRvdWNoXCIpID8gZS50b3VjaGVzWzBdLmNsaWVudFkgOiBlLnBhZ2VZO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlc3R1cmVTdGFydCA9IChpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiA9IGdldHBvc2l0aW9uWChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWFpblNsaWRlclN3aXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZ2VzdHVyZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNYWluU2xpZGVyU3dpcGluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQb3NpdGlvbiA9IGdldHBvc2l0aW9uWChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRUcmFuc2xhdGUgPSB0aGlzLnByZXZUcmFuc2xhdGUgKyBjdXJyZW50UG9zaXRpb24gLSB0aGlzLnN0YXJ0UG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGdlc3R1cmVFbmQgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZFBvc2l0aW9uID0gZ2V0cG9zaXRpb25YKGV2KTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPWZseW91dF1cIikgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmRldmljZVdpZHRoIDwgOTkyICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIC5pbmxpbmUtb3BlblwiKSB8fFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIFtkYXRhLXpvb209aW5saW5lXVwiKSAmJlxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiAuaW5saW5lLW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgW2RhdGEtem9vbT1mbHlvdXRdXCIpXG4gICAgICAgICAgICAgICAgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgLmZseW91dC1vcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGVuZFBvc2l0aW9uIC0gdGhpcy5zdGFydFBvc2l0aW9uKSA+PSAxMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzQ3Vyc29yTW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgY2xpY2sgb24gbW91c2V1cCBmb3IgaW5saW5lIGFuZCBmbHlvdXQgem9vbVxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBcIiBbZGF0YS16b29tPWlubGluZV1cIikgfHxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yICsgXCIgW2RhdGEtem9vbT1mbHlvdXRdXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvciArIFwiIFtkYXRhLXpvb209cG9wdXBdXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Lm1hdGNoTWVkaWEoXCIocG9pbnRlcjogY29hcnNlKVwiKS5tYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlQ2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2FwdHVyZUNsaWNrLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYXB0dXJlQ2xpY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFkZCBzbGlkZSBlZmZlY3RcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwic2xpZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZV8xLmRlZmF1bHQodGhpcy5nYWxsZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU2V0IFNsaWRlciBQb3NpdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVkQnkgPSB0aGlzLmN1cnJlbnRUcmFuc2xhdGUgLSB0aGlzLnByZXZUcmFuc2xhdGU7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVkQnkgPCAtMTAgJiYgdGhpcy50YXJnZXRJbmRleCA8IHRoaXMubWFpblNsaWRlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0SW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVkQnkgPiAxMCAmJiB0aGlzLnRhcmdldEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEluZGV4IC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb25CeUluZGV4SW5NYWluU2xpZGVyKHRoaXMudGFyZ2V0SW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIEFkZCBmYWRlIGVmZmVjdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJmYWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFkZUluXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiBOYXZpZ2F0aW9uIGJ1dHRvbnMgYXJlIGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1haW5OYXZpZ2F0aW9uICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTWFpbkJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMubWFpblNsaWRlcywgdGhpcy5wcmV2TWFpbkJ1dHRvbiwgdGhpcy5uZXh0TWFpbkJ1dHRvbiwgdGhpcy50YXJnZXRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYXNDdXJzb3JNb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc01haW5TbGlkZXJTd2lwaW5nID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWFpblNsaWRlcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGRyYWcgYmVoYXZpb3VyIGZvciBtYWluU2xpZGVzXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgICAgICAgICAvLyBSZW1vdmUgbGluayBkZWZhdWx0IGJlaGF2aW91ciB3aGVuIHN3aXBpbmdcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IgKyBgIFtkYXRhLWdhbGxlcnldIGFgKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvclRhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICArIGAgW2RhdGEtZ2FsbGVyeT1pdGVtLSR7aW5kZXh9XSBhYCk7XG4gICAgICAgICAgICAgICAgaWYgKGFuY2hvclRhZykge1xuICAgICAgICAgICAgICAgICAgICBhbmNob3JUYWcub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc0N1cnNvck1vdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCB0b3VjaCBldmVudHNcbiAgICAgICAgICAgIGlmICh3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgZ2VzdHVyZVN0YXJ0KGluZGV4KSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGdlc3R1cmVNb3ZlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGdlc3R1cmVFbmQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIGdlc3R1cmVFbmQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZG93blwiLCBnZXN0dXJlU3RhcnQoaW5kZXgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIGdlc3R1cmVNb3ZlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2h1cFwiLCBnZXN0dXJlRW5kLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIiwgZ2VzdHVyZUVuZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBnZXN0dXJlU3RhcnQoaW5kZXgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGdlc3R1cmVNb3ZlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBnZXN0dXJlRW5kLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBaT09NXG4gICAgICAgIHRoaXMuc2V0Wm9vbSgpO1xuICAgICAgICAvLyBDQVJPVVNFTCBOQVZJR0FUSU9OXG4gICAgICAgIC8vIFNldCB0aHVtbmFpbHMgYW5kIGluZGljYXRvcnMgcG9zaXRpb25cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIiB8fCB0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgIC8vIFNldCBjYXJvdXNlbCBvciBpbmRpY2F0b3JzIFBvc2l0aW9uXG4gICAgICAgICAgICBpZiAodGhpcy5pc1NsaWRlclZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmNhcm91c2VsUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJ0aHVtYm5haWxzXCIpID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFdyYXBwZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCIgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdkluZGljYXRvcnMuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJvdXNlbE9mZnNldC5zdHlsZS53aWR0aCA9IGAke3RoaXMub3B0aW9ucy5jYXJvdXNlbE9mZnNldH1weGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnlDb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJvdXNlbE9mZnNldC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLm9wdGlvbnMuY2Fyb3VzZWxPZmZzZXR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEdldCBjYXJvdXNlbCBzbGlkZXIgc2NyZWVuIHNpemVcbiAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlclNjcmVlblNpemUgPSB0aGlzLmdldGNhcm91c2VsU2xpZGVyU2NyZWVuU2l6ZSgpO1xuICAgICAgICAvLyBDYXNlIHdoZXJlIGNhcm91c2VsU3R5bGUgaXMgdGh1bWJuYWlsc1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwidGh1bWJuYWlsc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjYXJvdXNlbFNsaWRlcyA9IEFycmF5LmZyb20odGhpcy5jYXJvdXNlbFdyYXBwZXIuY2hpbGRyZW4pO1xuICAgICAgICAgICAgY29uc3QgY2Fyb3VzZWxJbWFnZXNXcmFwcGVycyA9IHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGUgLmltZ1RodW1iLXdyYXBwZXJcIik7XG4gICAgICAgICAgICAvLyBTZXQgdGh1bWJuYWlscyBzbGlkZSBhbmQgaW1nIGRpbWVuc2lvbnNcbiAgICAgICAgICAgIGNhcm91c2VsU2xpZGVzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VUaHVtYldyYXBwZXIgPSBjYXJvdXNlbEltYWdlc1dyYXBwZXJzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXNUaHVtYnMgPSB0aGlzLmNhcm91c2VsV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlVGh1bWIgPSBzbGlkZXNUaHVtYnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGltYWdlVGh1bWJXcmFwcGVyLnN0eWxlLndpZHRoID0gYCR7dGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLndpZHRofXB4YDtcbiAgICAgICAgICAgICAgICBpbWFnZVRodW1iV3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuaGVpZ2h0fXB4YDtcbiAgICAgICAgICAgICAgICBzbGlkZVRodW1iLnN0eWxlLmhlaWdodCA9IHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCA/IGAke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5oZWlnaHQgKyB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2lufXB4YCA6IGAke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5oZWlnaHR9cHhgO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENhcm91c2VsRGltZW5zaW9uKCk7XG4gICAgICAgICAgICAvLyBVc2UgcGlpbyBpZiBlbmFibGVkXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9wdGlvbnMucGlpb0RvbWFpbktleSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBpaW9Eb21haW5LZXkgJiYgd2luZG93LnBpaW8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFBpaW9JbWFnZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIExvYWQgY2Fyb3VzZWwgdGh1bWJuYWlsIGltYWdlcyBpbiBzaWdodC5cbiAgICAgICAgICAgIHRoaXMubG9hZFRodW1ibmFpbEltYWdlc0luU2lnaHQoKTtcbiAgICAgICAgICAgIC8vIFNldCBUaHVtYiBCb3JkZXIgV2lkdGhcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yKTtcbiAgICAgICAgICAgIHNlbGVjdG9yLnN0eWxlLnNldFByb3BlcnR5KFwiLS10aHVtYkJvcmRlcldpZHRoXCIsIGAke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5zZWxlY3RlZEJvcmRlcldpZHRofXB4YCk7XG4gICAgICAgICAgICAvLyBTZXQgZmlyc3QgdGh1bWJuYWlsIHNlbGVjdGVkIHN0eWxlXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUaHVtYiA9IHRoaXMuY2Fyb3VzZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0V3JhcHBlciA9IGFjdGl2ZVRodW1iLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nVGh1bWItd3JhcHBlclwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSA9PT0gXCJib3JkZXJcIikge1xuICAgICAgICAgICAgICAgIHRhcmdldFdyYXBwZXIuY2xhc3NMaXN0LmFkZChgYm9yZGVyLSR7dGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG93bmxvYWQgbWFpbiBpbWFnZSB3aGVuIHRodW1ibmFpbCBob3ZlclxuICAgICAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGh1bWIgPSB0YXJnZXQuY2xvc2VzdChcIi5zbGlkZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFRodW1iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IGNhcm91c2VsU2xpZGVzLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gdGFyZ2V0VGh1bWIpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW3RoaXMudGFyZ2V0SW5kZXhdLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBEZXRlY3QgaWYgYWxsIHRodW1iIGltYWdlcyBhcmUgaW4gc2lnaHRcbiAgICAgICAgICAgIGNvbnN0IGFsbFRodW1ic1dpZHRoID0gdGhpcy5nZXRDYXJvdXNlbFdyYXBwZXJEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIGlmIChhbGxUaHVtYnNXaWR0aCA8IHRoaXMuY2Fyb3VzZWxTbGlkZXJTY3JlZW5TaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNldCBpbWFnZSB3aGVuIHRodW1ibmFpbCBjbGlja2VkXG4gICAgICAgICAgICB0aGlzLmNhcm91c2VsU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmlubGluZS1vcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuaW5saW5lLW9wZW5cIikuY2xhc3NMaXN0LnJlbW92ZShcImlubGluZS1vcGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmZseW91dC1vcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuZmx5b3V0LW9wZW5cIikuY2xhc3NMaXN0LnJlbW92ZShcImZseW91dC1vcGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRUaHVtYiA9IHRhcmdldC5jbG9zZXN0KFwiLnNsaWRlXCIpO1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0VGh1bWIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGh1bWIgPSB0aGlzLmNhcm91c2VsV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbmRleCA9IGNhcm91c2VsU2xpZGVzLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gdGFyZ2V0VGh1bWIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNsaWRlID0gdGhpcy5tYWluU2xpZGVzW3RoaXMudGFyZ2V0SW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMudGh1bWJJbWFnZXNbdGhpcy50YXJnZXRJbmRleCArIDFdLCB7IHR5cGU6IFwidGh1bWJuYWlsXCIgfSk7XG4gICAgICAgICAgICAgICAgbW92ZU1haW5TbGlkZXJfMS5kZWZhdWx0KHRoaXMubWFpbldyYXBwZXIsIHRoaXMuY3VycmVudFNsaWRlLCB0YXJnZXRTbGlkZSwgdGhpcy50YXJnZXRJbmRleCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmNvbnRleHRNZW51LCB0aGlzLm9wZW5JbWFnZVRleHQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWFpbk5hdmlnYXRpb24gIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVNYWluQnV0dG9uc18xLmRlZmF1bHQodGhpcy5tYWluU2xpZGVzLCB0aGlzLnByZXZNYWluQnV0dG9uLCB0aGlzLm5leHRNYWluQnV0dG9uLCB0aGlzLnRhcmdldEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlTmF2RWxlbVNlbGVjdGVkXzEuZGVmYXVsdChjdXJyZW50VGh1bWIsIHRhcmdldFRodW1iLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcImZhZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBmYWRlSW5fMS5kZWZhdWx0KHRoaXMuZ2FsbGVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlVGh1bWJMb2FkSW1hZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRUaHVtYnMgPSB0aGlzLmNhcm91c2VsV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKGBpbWc6bm90KFtzcmMqPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUFcIl0pYCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGVkVGh1bWJzLmxlbmd0aCA8PSB0aGlzLnRodW1iSW1hZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRJbWFnZSh0aGlzLnRodW1iSW1hZ2VzW3RoaXMubG9hZGVkVGh1bWJzLmxlbmd0aF0sIHsgdHlwZTogXCJ0aHVtYm5haWxcIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgdGh1bWJJbWFnZVNpemUgPSAodGhpcy5pc1NsaWRlclZlcnRpY2FsKSA/XG4gICAgICAgICAgICAgICAgY2Fyb3VzZWxTbGlkZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IDpcbiAgICAgICAgICAgICAgICBjYXJvdXNlbFNsaWRlc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIC8vIFNldCB0aHVtYm5haWxzIGJ1dHRvbiBzdHlsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgIC8vIENhcm91c2VsIEJ1dHRvbnNcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZDYXJvdXNlbC5jbGFzc0xpc3QuYWRkKGBidG4tY2Fyb3VzZWwtJHt0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubmF2aWdhdGlvblNoYXBlfWApO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLmNsYXNzTGlzdC5hZGQoYGJ0bi1jYXJvdXNlbC0ke3RoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGV9YCk7XG4gICAgICAgICAgICAgICAgLy8gVHJhbnNmb3JtIENhcm91c2VsIEJ1dHRvbnMgU3R5bGUgaWYgaXNTbGlkZXJWZXJ0aWNhbFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzU2xpZGVyVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IFwiY2lyY2xlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IFwicmFkaXVzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgyNSUpIHJvdGF0ZSg5MGRlZylcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwidG9wIGxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuc3R5bGUubGVmdCA9IGA1MCVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUudG9wID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnN0eWxlLmJvdHRvbSA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUucmlnaHQgPSBgNTAlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtMjUlKSByb3RhdGUoOTBkZWcpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcInJpZ2h0IGJvdHRvbVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy50aHVtYm5haWxQcm9wcy5uYXZpZ2F0aW9uU2hhcGUgPT09IFwic3F1YXJlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCg1MCUpIHJvdGF0ZSg5MGRlZylcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwidG9wIGxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuc3R5bGUubGVmdCA9IGA1MCVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUudG9wID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnN0eWxlLmJvdHRvbSA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUucmlnaHQgPSBgNTAlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtNTAlKSByb3RhdGUoOTBkZWcpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcInJpZ2h0IGJvdHRvbVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldkFycm93ID0gdGhpcy5wcmV2Q2Fyb3VzZWwucXVlcnlTZWxlY3RvcihcIiBzdmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0QXJyb3cgPSB0aGlzLm5leHRDYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiIHN2Z1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLmhlaWdodCA9IGAyNHB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLnRvcCA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2Q2Fyb3VzZWwuc3R5bGUudHJhbnNmb3JtID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLndpZHRoID0gYDEwMCVgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkFycm93LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKDkwZGVnKVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUuaGVpZ2h0ID0gYDI0cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUud2lkdGggPSBgMTAwJWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbC5zdHlsZS50b3AgPSBgdW5zZXRgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUudHJhbnNmb3JtID0gYHVuc2V0YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLnN0eWxlLmJvdHRvbSA9IGAwcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEFycm93LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKDkwZGVnKVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIEJ1dHRvbnMgbXVzdCBiZSBkaXNhYmxlZCB3aGVuIGxvYWRpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJvdXNlbFdyYXBwZXJTaXplID0gKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcm91c2VsV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcmVBbGxUaHVtYnNJblNpZ2h0IHx8IGNhcm91c2VsU2xpZGVzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjYXJvdXNlbFdyYXBwZXJTaXplIDwgdGhpcy5jYXJvdXNlbFNsaWRlclNjcmVlblNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgY2Fyb3VzZWwgQnV0dG9uc1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkNhcm91c2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhcm91c2VsQ291bnRlciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgdGh1bWJJbWFnZVNpemUsIHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLmNhcm91c2VsU2xpZGVyLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luLCB0aGlzLmlzU2xpZGVyVmVydGljYWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm5hdmlnYXRpb25TaGFwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLnRodW1ic0luU2lnaHQsIHRoaXMuY2Fyb3VzZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2Fyb3VzZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdmVyXCIsIGhhbmRsZVRodW1iTG9hZEltYWdlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVUaHVtYkxvYWRJbWFnZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDYXJvdXNlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhhbmRsZVRodW1iTG9hZEltYWdlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubmV4dENhcm91c2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVRodW1iTG9hZEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5jYXJvdXNlbENvdW50ZXIgKyB0aGlzLnRodW1ic0luU2lnaHQpIDw9IGNhcm91c2VsU2xpZGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgdGh1bWJJbWFnZVNpemUsIHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLmNhcm91c2VsU2xpZGVyLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luLCB0aGlzLmlzU2xpZGVyVmVydGljYWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm5hdmlnYXRpb25TaGFwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLnRodW1ic0luU2lnaHQsIHRoaXMuY2Fyb3VzZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT1VDSCBFVkVOVFMgZm9yIENhcm91c2VsIFRodW1ibmFpbHNcbiAgICAgICAgICAgIGxldCBpc0Nhcm91c2VsU3dpcGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNhcm91c2VsU3RhcnRQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICBsZXQgY2Fyb3VzZWxQcmV2VHJhbnNsYXRlID0gMDtcbiAgICAgICAgICAgIGxldCBjYXJvdXNlbEN1cmVudFRyYW5zbGF0ZSA9IDA7XG4gICAgICAgICAgICBjb25zdCBnZXN0dXJlU3RhcnRDYXJvdXNlbCA9IChwb3MpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsU3RhcnRQb3NpdGlvbiA9IHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCA/IGdldHBvc2l0aW9uWShldikgOiBnZXRwb3NpdGlvblgoZXYpO1xuICAgICAgICAgICAgICAgICAgICBpc0Nhcm91c2VsU3dpcGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybU1hdHJpeCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY2Fyb3VzZWxXcmFwcGVyKS5nZXRQcm9wZXJ0eVZhbHVlKFwidHJhbnNmb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtTWF0cml4ICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWxQcmV2VHJhbnNsYXRlID0gdGhpcy5pc1NsaWRlclZlcnRpY2FsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0cmFuc2Zvcm1NYXRyaXguc3BsaXQoXCIsXCIpWzVdLnRyaW0oKSwgMTApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0cmFuc2Zvcm1NYXRyaXguc3BsaXQoXCIsXCIpWzRdLnRyaW0oKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBnZXN0dXJlTW92ZUNhcm91c2VsID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNDYXJvdXNlbFN3aXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2Fyb3VzZWxDdXJyZW50UG9zaXRpb24gPSB0aGlzLmlzU2xpZGVyVmVydGljYWwgPyBnZXRwb3NpdGlvblkoZSkgOiBnZXRwb3NpdGlvblgoZSk7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsQ3VyZW50VHJhbnNsYXRlID0gY2Fyb3VzZWxDdXJyZW50UG9zaXRpb24gLSBjYXJvdXNlbFN0YXJ0UG9zaXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGdlc3R1cmVFbmRDYXJvdXNlbCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2Fyb3VzZWxFbmRQb3NpdGlvbiA9IHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCA/IGdldHBvc2l0aW9uWShlKSA6IGdldHBvc2l0aW9uWChlKTtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoY2Fyb3VzZWxFbmRQb3NpdGlvbiAtIGNhcm91c2VsU3RhcnRQb3NpdGlvbikgPj0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VHJhbnNsYXRlID0gY2Fyb3VzZWxQcmV2VHJhbnNsYXRlICsgY2Fyb3VzZWxDdXJlbnRUcmFuc2xhdGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmFuc2xhdGUgPCBjYXJvdXNlbFByZXZUcmFuc2xhdGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyIDwgKGNhcm91c2VsU2xpZGVzLmxlbmd0aCAtIHRoaXMudGh1bWJzSW5TaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUaHVtYkxvYWRJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ld1RyYW5zbGF0ZSA+IGNhcm91c2VsUHJldlRyYW5zbGF0ZSAmJiB0aGlzLmNhcm91c2VsQ291bnRlciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxDb3VudGVyLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW92ZUNhcm91c2VsXzEuZGVmYXVsdCh0aGlzLmNhcm91c2VsV3JhcHBlciwgdGh1bWJJbWFnZVNpemUsIHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLmNhcm91c2VsU2xpZGVyLCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMubWFyZ2luLCB0aGlzLmlzU2xpZGVyVmVydGljYWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLm5hdmlnYXRpb25TaGFwZSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVDYXJvdXNlbEJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMuY2Fyb3VzZWxDb3VudGVyLCB0aGlzLnRodW1ic0luU2lnaHQsIHRoaXMuY2Fyb3VzZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlzQ2Fyb3VzZWxTd2lwaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2Fyb3VzZWxTbGlkZXMuZm9yRWFjaCgodGh1bWIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGRyYWcgYmVoYXZpb3VyIGZvciBtYWluU2xpZGVzXG4gICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LlBvaW50ZXJFdmVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgZ2VzdHVyZVN0YXJ0Q2Fyb3VzZWwoaW5kZXgpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIGdlc3R1cmVNb3ZlQ2Fyb3VzZWwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYi5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGdlc3R1cmVFbmRDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIGdlc3R1cmVFbmRDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdG91Y2ggZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGRvd25cIiwgZ2VzdHVyZVN0YXJ0Q2Fyb3VzZWwoaW5kZXgpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBnZXN0dXJlTW92ZUNhcm91c2VsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNodXBcIiwgZ2VzdHVyZUVuZENhcm91c2VsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIGdlc3R1cmVFbmRDYXJvdXNlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZ2VzdHVyZVN0YXJ0Q2Fyb3VzZWwoaW5kZXgpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBnZXN0dXJlTW92ZUNhcm91c2VsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZ2VzdHVyZUVuZENhcm91c2VsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXNlIHdoZXJlIGNhcm91c2VsU3R5bGUgaXMgaW5kaWNhdG9yc1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhcm91c2VsU3R5bGUgPT09IFwiaW5kaWNhdG9yc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gQXJyYXkuZnJvbSh0aGlzLm5hdkluZGljYXRvcnMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgLy8gU2V0IGluZGljYXRvcidzIHN0eWxlc1xuICAgICAgICAgICAgaW5kaWNhdG9ycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlc0luaWNhdG9ycyA9IHRoaXMubmF2SW5kaWNhdG9ycy5xdWVyeVNlbGVjdG9yQWxsKFwiIC5pbmRpY2F0b3JcIik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVJbmRpY2F0b3IgPSBzbGlkZXNJbmljYXRvcnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHNsaWRlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoYGluZGljYXRvci0ke3RoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zaGFwZX1gKTtcbiAgICAgICAgICAgICAgICBzbGlkZUluZGljYXRvci5zdHlsZS5tYXJnaW4gPSBgJHt0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc3BhY2luZ31weGA7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zaGFwZSA9PT0gXCJsaW5lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTbGlkZXJWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5vcHRpb25zLmluZGljYXRvclByb3BzLnNpemV9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgM3B4YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAzcHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc2l6ZX1weGA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAke3RoaXMub3B0aW9ucy5pbmRpY2F0b3JQcm9wcy5zaXplfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLm9wdGlvbnMuaW5kaWNhdG9yUHJvcHMuc2l6ZX1weGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldE5hdkluZGljYXRvcnNEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIC8vIFNldCBpbWFnZSB3aGVuIGluZGljYXRvciBjbGlja2VkXG4gICAgICAgICAgICB0aGlzLm5hdkluZGljYXRvcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuaW5saW5lLW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5pbmxpbmUtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5saW5lLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuZmx5b3V0LW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZmx5b3V0LW9wZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERvdCA9IHRhcmdldC5jbG9zZXN0KFwiLmluZGljYXRvclwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldERvdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvcihcIiAuY3VycmVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kaWNhdG9yID0gdGhpcy5uYXZJbmRpY2F0b3JzLnF1ZXJ5U2VsZWN0b3IoXCIgLmFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEluZGV4ID0gaW5kaWNhdG9ycy5maW5kSW5kZXgoKGluZGljYXRvcikgPT4gaW5kaWNhdG9yID09PSB0YXJnZXREb3QpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNsaWRlID0gdGhpcy5tYWluU2xpZGVzW3RoaXMudGFyZ2V0SW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuaW1hZ2VzW3RoaXMudGFyZ2V0SW5kZXhdLCB7IHR5cGU6IFwibWFpblwiIH0pO1xuICAgICAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIHRhcmdldFNsaWRlLCB0aGlzLnRhcmdldEluZGV4LCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuY29udGV4dE1lbnUsIHRoaXMub3BlbkltYWdlVGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldk1haW5CdXR0b24gJiYgdGhpcy5uZXh0TWFpbkJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTWFpbkJ1dHRvbnNfMS5kZWZhdWx0KHRoaXMubWFpblNsaWRlcywgdGhpcy5wcmV2TWFpbkJ1dHRvbiwgdGhpcy5uZXh0TWFpbkJ1dHRvbiwgdGhpcy50YXJnZXRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZU5hdkVsZW1TZWxlY3RlZF8xLmRlZmF1bHQoY3VycmVudEluZGljYXRvciwgdGFyZ2V0RG90LCB0aGlzLm9wdGlvbnMudGh1bWJuYWlsUHJvcHMuc2VsZWN0ZWRTdHlsZSwgdGhpcy5vcHRpb25zLnRodW1ibmFpbFByb3BzLnNlbGVjdGVkQm9yZGVyUG9zaXRpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcImZhZGVcIikge1xuICAgICAgICAgICAgICAgICAgICBmYWRlSW5fMS5kZWZhdWx0KHRoaXMuZ2FsbGVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlXzEuZGVmYXVsdCh0aGlzLmdhbGxlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVzZSBwaWlvIGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5waWlvRG9tYWluS2V5ICYmIHdpbmRvdy5waWlvKSB7XG4gICAgICAgICAgICB0aGlzLmdldFBpaW9JbWFnZXMoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgZmlyc3QgaW1hZ2VcbiAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbMF0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgIC8vIE9uIHdpbmRvdyBSZXNpemVcbiAgICAgICAgY29uc3QgcmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5jdXJyZW50XCIpO1xuICAgICAgICAgICAgLy8gUmVzaXplIHRodW1ibmFpbHMgb3IgaW5kaWNhdG9yc1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2Fyb3VzZWxEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2Fyb3VzZWxTdHlsZSA9PT0gXCJpbmRpY2F0b3JzXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE5hdkluZGljYXRvcnNEaW1lbnNpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc2l6ZSBtYWluIHNsaWRlclxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEZXZpY2VXaXRoID0gdGhpcy5kZXZpY2VXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuc2V0U2xpZGVyRGltZW5zaW9ucygpO1xuICAgICAgICAgICAgLy8gTG9hZCBuZXcgVGh1bWJuYWlsIEltYWdlc1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYXJvdXNlbFN0eWxlID09PSBcInRodW1ibmFpbHNcIikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFRodW1ibmFpbEltYWdlc0luU2lnaHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENoYW5nZSBmbHlvdXQgZGlzcGxheSBhY29yZGluZyB0byBzY3JlZW4gc2l6ZVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tUHJvcHMudHlwZSA9PT0gXCJmbHlvdXRcIiAmJiB0aGlzLnpvb21EaXYpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXZpY2VXaWR0aCA8IDk5Mikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluV3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiIC5mbHlvdXQtb3BlblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZmx5b3V0LW9wZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmZseW91dEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtem9vbVwiLCBcImlubGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGV2aWNlV2lkdGggPj0gOTkyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmlubGluZS1vcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIgLmlubGluZS1vcGVuXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJpbmxpbmUtb3BlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Db250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaW5saW5lRW50ZXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbURpdi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5pbmxpbmVMZWF2ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tRGl2LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwidW5zZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtem9vbVwiLCBcImZseW91dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnpvb21Qcm9wcy50eXBlID09PSBcImlubGluZVwiICYmIHRoaXMuem9vbURpdikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Wm9vbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVsb2FkIG1haW4gaW1hZ2VzIGFjY29yZGluZyB0byBzY3JlZW4gc2l6ZVxuICAgICAgICAgICAgaWYgKHByZXZpb3VzRGV2aWNlV2l0aCA8IHRoaXMuZGV2aWNlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZGVkTWFpbkltYWdlcyA9IHRoaXMubWFpbldyYXBwZXIucXVlcnlTZWxlY3RvckFsbChgaW1nOm5vdChbc3JjKj1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBXCJdKWApO1xuICAgICAgICAgICAgICAgIGRvd25sb2FkZWRNYWluSW1hZ2VzLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUFcIikpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG93bmxvYWRlZE1haW5JbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1hZ2UodGhpcy5pbWFnZXNbaV0sIHsgdHlwZTogXCJtYWluXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRqdXN0IHRyYW5zbGF0ZSBpbnNpZGUgd3JhcHBlciBpbiBvcmRlciB0byBkaXNwbGF5IGN1cnJlbnQgc2xpZGVcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VXaWR0aCA9IHRoaXMuZ2V0TWFpbkltYWdlV2lkdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5tYWluU2xpZGVzLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gY3VycmVudFNsaWRlKTtcbiAgICAgICAgICAgIG1vdmVNYWluU2xpZGVyXzEuZGVmYXVsdCh0aGlzLm1haW5XcmFwcGVyLCBjdXJyZW50U2xpZGUsIGN1cnJlbnRTbGlkZSwgaW5kZXgsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5jb250ZXh0TWVudSwgdGhpcy5vcGVuSW1hZ2VUZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplKTtcbiAgICB9XG59XG5jb25zdCBHYWxsZXJ5T2JqZWN0ID0ge1xuICAgIGluaXQob3B0cykge1xuICAgICAgICByZXR1cm4gbmV3IEdhbGxlcnkob3B0cyk7XG4gICAgfSxcbn07XG5leHBvcnRzLnBpaW9HYWxsZXJ5ID0gR2FsbGVyeU9iamVjdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdhbGxlcnlPYmplY3QuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBnYWxsZXJ5T2JqZWN0XzEgPSByZXF1aXJlKFwiLi90eXBlcy9nYWxsZXJ5T2JqZWN0XCIpO1xud2luZG93LnBpaW9HYWxsZXJ5ID0gZ2FsbGVyeU9iamVjdF8xLnBpaW9HYWxsZXJ5O1xudmFyIGdhbGxlcnlPYmplY3RfMiA9IHJlcXVpcmUoXCIuL3R5cGVzL2dhbGxlcnlPYmplY3RcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwaWlvR2FsbGVyeVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2FsbGVyeU9iamVjdF8yLnBpaW9HYWxsZXJ5OyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlpby1nYWxsZXJ5LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gRW5hYmxlIGFuZCBEaXNhYmxlIENhcm91c2VsIGJ1dHRvbnNcbmNvbnN0IGRpc2FibGVDYXJvdXNlbEJ1dHRvbnMgPSAoY291bnRlciwgaW1hZ2VzSW5TaWdodCwgY2Fyb3VzZWwpID0+IHtcbiAgICBjb25zdCBjYXJvdXNlbFdyYXBwZXIgPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiLmNhcm91c2VsLXNsaWRlciAuY2Fyb3VzZWwtd3JhcHBlclwiKTtcbiAgICBjb25zdCBjYXJvdXNlbFNsaWRlcyA9IEFycmF5LmZyb20oY2Fyb3VzZWxXcmFwcGVyLmNoaWxkcmVuKTtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJvdXNlbFwiKSkge1xuICAgICAgICBjb25zdCBwcmV2Q2Fyb3VzZWwgPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZDYXJvdXNlbFwiKTtcbiAgICAgICAgY29uc3QgbmV4dENhcm91c2VsID0gY2Fyb3VzZWwucXVlcnlTZWxlY3RvcihcIiNuZXh0Q2Fyb3VzZWxcIik7XG4gICAgICAgIGlmIChjb3VudGVyID09PSAwICYmIGNhcm91c2VsU2xpZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHByZXZDYXJvdXNlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICBuZXh0Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoY291bnRlciArIGltYWdlc0luU2lnaHQpID4gY2Fyb3VzZWxTbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgcHJldkNhcm91c2VsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBuZXh0Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJldkNhcm91c2VsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBuZXh0Q2Fyb3VzZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnRzLmRlZmF1bHQgPSBkaXNhYmxlQ2Fyb3VzZWxCdXR0b25zO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzYWJsZUNhcm91c2VsQnV0dG9ucy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIEVuYWJsZSBhbmQgRGlzYWJsZSBNYWluIEltYWdlIGJ1dHRvbnNcbmZ1bmN0aW9uIGRpc2FibGVNYWluQnV0dG9ucyhtYWluU2xpZGVzLCBwcmV2TWFpbkJ1dHRvbiwgbmV4dE1haW5CdXR0b24sIHRhcmdldEluZGV4KSB7XG4gICAgaWYgKHRhcmdldEluZGV4ID09PSAwKSB7XG4gICAgICAgIHByZXZNYWluQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgbmV4dE1haW5CdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAodGFyZ2V0SW5kZXggPT09IG1haW5TbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICBwcmV2TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBuZXh0TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmV2TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBuZXh0TWFpbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGRpc2FibGVNYWluQnV0dG9ucztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc2FibGVNYWluQnV0dG9ucy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIEZhZGUgdHJhbnNpdGlvblxuZnVuY3Rpb24gZmFkZUluKGdhbGxlcnkpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKGAuY3VycmVudGApO1xuICAgIC8vIEFkZCBmYWRlIGluIGNsYXNzXG4gICAgY3VycmVudC5jbGFzc0xpc3QuYWRkKFwiZmFkZS1pblwiKTtcbiAgICAvLyBSZW1vdmUgZmFkZSBpbiBjbGFzcyBhZnRlciAwLjUgc2Vjb25kc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmYWRlLWluXCIpO1xuICAgIH0sIDUwMCk7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBmYWRlSW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mYWRlSW4uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiBnZXRUYXJnZXRFbGVtZW50KGN1cnJlbnRFbGVtZW50LCB0YXJnZXRJbmRleCwgZWxlbWVudHNBcnJheSkge1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGVsZW1lbnRzQXJyYXkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09PSBjdXJyZW50RWxlbWVudCk7XG4gICAgbGV0IHRhcmdldEVsZW1lbnQ7XG4gICAgaWYgKGN1cnJlbnRJbmRleCA+IHRhcmdldEluZGV4KSB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIH1cbiAgICBlbHNlIGlmIChjdXJyZW50SW5kZXggPCB0YXJnZXRJbmRleCkge1xuICAgICAgICB0YXJnZXRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0RWxlbWVudDtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IGdldFRhcmdldEVsZW1lbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRUYXJnZXRFbGVtZW50LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gU2V0IENhcm91c2VsIG5hdiBQb3NpdGlvblxuZnVuY3Rpb24gbW92ZUNhcm91c2VsKG5hdldyYXBwZXIsIG5hdkVsZW1lbnRTaXplLCBjb3VudGVyLCBuYXZDb250YWluZXIsIG1hcmdpbiwgaXNTbGlkZXJWZXJ0aWNhbCkge1xuICAgIGNvbnN0IG1vdmVCeSA9IG5hdkVsZW1lbnRTaXplICogY291bnRlcjtcbiAgICBjb25zdCBuYXZDb250YWluZXJTaXplID0gKGlzU2xpZGVyVmVydGljYWwpID9cbiAgICAgICAgbmF2Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCA6XG4gICAgICAgIG5hdkNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBjb25zdCBuYXZXcmFwcGVyU2l6ZSA9IChpc1NsaWRlclZlcnRpY2FsKSA/XG4gICAgICAgIG5hdldyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IDpcbiAgICAgICAgbmF2V3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBpZiAoKG1vdmVCeSArIG5hdkNvbnRhaW5lclNpemUpIDwgbmF2V3JhcHBlclNpemUpIHtcbiAgICAgICAgbmF2V3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAoaXNTbGlkZXJWZXJ0aWNhbCkgPyBgdHJhbnNsYXRlWSggLSR7bW92ZUJ5fXB4KWAgOiBgdHJhbnNsYXRlWCggLSR7bW92ZUJ5fXB4KWA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuYXZXcmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9IChpc1NsaWRlclZlcnRpY2FsKSA/IGB0cmFuc2xhdGVZKCAtJHtuYXZXcmFwcGVyU2l6ZSAtIG5hdkNvbnRhaW5lclNpemUgLSBtYXJnaW59cHgpYCA6IGB0cmFuc2xhdGVYKCAtJHtuYXZXcmFwcGVyU2l6ZSAtIG5hdkNvbnRhaW5lclNpemUgLSBtYXJnaW59cHgpYDtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBtb3ZlQ2Fyb3VzZWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb3ZlQ2Fyb3VzZWwuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBTZXQgc2xpZGVyIFBvc2l0aW9uXG5mdW5jdGlvbiBtb3ZlTWFpblNsaWRlcihtYWluV3JhcHBlciwgY3VycmVudFNsaWRlLCB0YXJnZXRTbGlkZSwgdGFyZ2V0SW5kZXgsIGltYWdlV2lkdGgsIGNvbnRleHRNZW51LCBvcGVuSW1hZ2VUZXh0KSB7XG4gICAgbWFpbldyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoIC0ke2ltYWdlV2lkdGggKiB0YXJnZXRJbmRleH1weClgO1xuICAgIGN1cnJlbnRTbGlkZS5jbGFzc0xpc3QucmVtb3ZlKFwiY3VycmVudFwiKTtcbiAgICB0YXJnZXRTbGlkZS5jbGFzc0xpc3QuYWRkKFwiY3VycmVudFwiKTtcbiAgICBjb25zdCB0YXJnZXRJbWFnZSA9IHRhcmdldFNsaWRlLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbWFnZV1cIik7XG4gICAgY29uc3Qgb3JpZ2luYWxVUkwgPSB0YXJnZXRJbWFnZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWltYWdlXCIpO1xuICAgIC8vIENyZWF0ZSBhbmNob3IgdGFnXG4gICAgY29uc3QgYW5jaG9ydGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgYW5jaG9ydGFnLmNsYXNzTGlzdC5hZGQoXCJpdGVtXCIpO1xuICAgIGFuY2hvcnRhZy5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG4gICAgYW5jaG9ydGFnLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIik7XG4gICAgYW5jaG9ydGFnLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgb3JpZ2luYWxVUkwpO1xuICAgIGFuY2hvcnRhZy5jbGFzc0xpc3QuYWRkKFwiaXRlbVwiKTtcbiAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob3BlbkltYWdlVGV4dCk7XG4gICAgLy8gQXBwZW5kIGl0IHRvIGl0J3MgcGFyZW50XG4gICAgYW5jaG9ydGFnLmFwcGVuZENoaWxkKHRleHQpO1xuICAgIGNvbnRleHRNZW51LmlubmVySFRNTCA9IFwiIFwiO1xuICAgIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGFuY2hvcnRhZyk7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBtb3ZlTWFpblNsaWRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vdmVNYWluU2xpZGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gU2xpZGUgdHJhbnNpdGlvblxuZnVuY3Rpb24gc2xpZGUobm9kZSkge1xuICAgIGNvbnN0IG1haW5XcmFwcGVyID0gbm9kZS5xdWVyeVNlbGVjdG9yKFwiLm1haW4td3JhcHBlclwiKTtcbiAgICBtYWluV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwic2xpZGVcIik7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBzbGlkZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNsaWRlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gVXBkYXRlIHRoZSBzZWxlY3RlZCBlbGVtZW50XG5mdW5jdGlvbiB1cGRhdGVOYXZFbGVtU2VsZWN0ZWQoY3VycmVudCwgdGFyZ2V0LCBzZWxlY3RlZFN0eWxlLCBzZWxlY3RlZEJvcmRlclBvc2l0aW9uLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY3VycmVudFdyYXBwZXIgPSBjdXJyZW50LnF1ZXJ5U2VsZWN0b3IoYCR7b3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3J9IC5pbWdUaHVtYi13cmFwcGVyYCk7XG4gICAgY29uc3QgdGFyZ2V0V3JhcHBlciA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKGAke29wdGlvbnMuZ2FsbGVyeVNlbGVjdG9yfSAuaW1nVGh1bWItd3JhcHBlcmApO1xuICAgIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICBpZiAoY3VycmVudFdyYXBwZXIpIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkU3R5bGUgPT09IFwiYm9yZGVyXCIpIHtcbiAgICAgICAgICAgIGN1cnJlbnRXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoYGJvcmRlci0ke3NlbGVjdGVkQm9yZGVyUG9zaXRpb259YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50V3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmxheVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0ZWRTdHlsZSA9PT0gXCJib3JkZXJcIikge1xuICAgICAgICAgICAgdGFyZ2V0V3JhcHBlci5jbGFzc0xpc3QuYWRkKGBib3JkZXItJHtzZWxlY3RlZEJvcmRlclBvc2l0aW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0V3JhcHBlci5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHVwZGF0ZU5hdkVsZW1TZWxlY3RlZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZU5hdkVsZW1TZWxlY3RlZC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuem9vbSA9IHZvaWQgMDtcbmNvbnN0IHpvb20gPSAoZSkgPT4ge1xuICAgIGxldCBjbGllbnRYO1xuICAgIGxldCBjbGllbnRZO1xuICAgIGUuY2xpZW50WCA/IGNsaWVudFggPSBlLmNsaWVudFggOiBlLnRvdWNoZXMgPyBjbGllbnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFggOiBjbGllbnRYID0gMDtcbiAgICBlLmNsaWVudFkgPyBjbGllbnRZID0gZS5jbGllbnRZIDogZS50b3VjaGVzID8gY2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZIDogY2xpZW50WSA9IDA7XG4gICAgY29uc3QgaW1hZ2Vab29tID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IG9mZnNldFggPSBjbGllbnRYIC0gaW1hZ2Vab29tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IGNsaWVudFkgLSBpbWFnZVpvb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgIGxldCB4QW1vdW50ID0gb2Zmc2V0WCAvIGltYWdlWm9vbS5vZmZzZXRXaWR0aCAqIDEwMDtcbiAgICBsZXQgeUFtb3VudCA9IG9mZnNldFkgLyBpbWFnZVpvb20ub2Zmc2V0SGVpZ2h0ICogMTAwO1xuICAgICgwIDw9IHhBbW91bnQgJiYgeEFtb3VudCA8PSAxMDApID8geEFtb3VudCA9IHhBbW91bnQgOiAwID4geEFtb3VudCA/IHhBbW91bnQgPSAwIDogeEFtb3VudCA9IDEwMDtcbiAgICAoMCA8PSB5QW1vdW50ICYmIHlBbW91bnQgPD0gMTAwKSA/IHlBbW91bnQgPSB5QW1vdW50IDogMCA+IHlBbW91bnQgPyB5QW1vdW50ID0gMCA6IHlBbW91bnQgPSAxMDA7XG4gICAgcmV0dXJuIHhBbW91bnQgKyBcIiVcIiArIHlBbW91bnQgKyBcIiVcIjtcbn07XG5leHBvcnRzLnpvb20gPSB6b29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9vbS5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9